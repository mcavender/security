{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.columns_view.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nexports.ColumnsView = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _element_data = require(\"../../core/element_data\");\n\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\n\nvar _click = require(\"../../events/click\");\n\nvar _double_click = require(\"../../events/double_click\");\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _style = require(\"../../core/utils/style\");\n\nvar _element = require(\"../../core/element\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _position = require(\"../../core/utils/position\");\n\nvar iteratorUtils = _interopRequireWildcard(require(\"../../core/utils/iterator\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _uiGrid_core = _interopRequireDefault(require(\"./ui.grid_core.modules\"));\n\nvar _uiGrid_core2 = _interopRequireDefault(require(\"./ui.grid_core.utils\"));\n\nvar _uiGrid_core3 = _interopRequireDefault(require(\"./ui.grid_core.column_state_mixin\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _getRequireWildcardCache() {\n  if (\"function\" !== typeof WeakMap) {\n    return null;\n  }\n\n  var cache = new WeakMap();\n\n  _getRequireWildcardCache = function () {\n    return cache;\n  };\n\n  return cache;\n}\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  }\n\n  if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\n    return {\n      \"default\": obj\n    };\n  }\n\n  var cache = _getRequireWildcardCache();\n\n  if (cache && cache.has(obj)) {\n    return cache.get(obj);\n  }\n\n  var newObj = {};\n  var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\n\n      if (desc && (desc.get || desc.set)) {\n        Object.defineProperty(newObj, key, desc);\n      } else {\n        newObj[key] = obj[key];\n      }\n    }\n  }\n\n  newObj.default = obj;\n\n  if (cache) {\n    cache.set(obj, newObj);\n  }\n\n  return newObj;\n}\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar SCROLL_CONTAINER_CLASS = \"scroll-container\";\nvar GROUP_SPACE_CLASS = \"group-space\";\nvar CONTENT_CLASS = \"content\";\nvar TABLE_CLASS = \"table\";\nvar TABLE_FIXED_CLASS = \"table-fixed\";\nvar CONTENT_FIXED_CLASS = \"content-fixed\";\nvar ROW_CLASS = \"dx-row\";\nvar GROUP_ROW_CLASS = \"dx-group-row\";\nvar DETAIL_ROW_CLASS = \"dx-master-detail-row\";\nvar FILTER_ROW_CLASS = \"filter-row\";\nvar CELL_UPDATED_ANIMATION_CLASS = \"cell-updated-animation\";\nvar HIDDEN_COLUMNS_WIDTH = \"0.0001px\";\nvar CELL_HINT_VISIBLE = \"dxCellHintVisible\";\nvar FORM_FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\nvar appendElementTemplate = {\n  render: function (options) {\n    options.container.append(options.content);\n  }\n};\n\nvar subscribeToRowEvents = function (that, $table) {\n  var touchTarget;\n  var touchCurrentTarget;\n  var timeoutId;\n\n  function clearTouchTargets(timeout) {\n    return setTimeout(function () {\n      touchTarget = touchCurrentTarget = null;\n    }, timeout);\n  }\n\n  _events_engine.default.on($table, \"touchstart touchend\", \".dx-row\", function (e) {\n    clearTimeout(timeoutId);\n\n    if (\"touchstart\" === e.type) {\n      touchTarget = e.target;\n      touchCurrentTarget = e.currentTarget;\n      timeoutId = clearTouchTargets(1e3);\n    } else {\n      timeoutId = clearTouchTargets();\n    }\n  });\n\n  _events_engine.default.on($table, [_click.name, _double_click.name, _pointer.default.down].join(\" \"), \".dx-row\", {\n    useNative: that._isNativeClick()\n  }, that.createAction(function (e) {\n    var event = e.event;\n\n    if (touchTarget) {\n      event.target = touchTarget;\n      event.currentTarget = touchCurrentTarget;\n    }\n\n    if (!(0, _renderer.default)(event.target).closest(\"a\").length) {\n      e.rowIndex = that.getRowIndex(event.currentTarget);\n\n      if (e.rowIndex >= 0) {\n        e.rowElement = (0, _element.getPublicElement)((0, _renderer.default)(event.currentTarget));\n        e.columns = that.getColumns();\n\n        if (event.type === _pointer.default.down) {\n          that._rowPointerDown(e);\n        } else {\n          if (event.type === _click.name) {\n            that._rowClick(e);\n          } else {\n            that._rowDblClick(e);\n          }\n        }\n      }\n    }\n  }));\n};\n\nvar getWidthStyle = function (width) {\n  if (\"auto\" === width) {\n    return \"\";\n  }\n\n  return (0, _type.isNumeric)(width) ? width + \"px\" : width;\n};\n\nvar setCellWidth = function (cell, column, width) {\n  cell.style.width = cell.style.maxWidth = \"auto\" === column.width ? \"\" : width;\n};\n\nvar copyAttributes = function (element, newElement) {\n  if (!element || !newElement) {\n    return;\n  }\n\n  var oldAttributes = element.attributes;\n  var newAttributes = newElement.attributes;\n  var i;\n\n  for (i = 0; i < oldAttributes.length; i++) {\n    var name = oldAttributes[i].nodeName;\n\n    if (!newElement.hasAttribute(name)) {\n      element.removeAttribute(name);\n    }\n  }\n\n  for (i = 0; i < newAttributes.length; i++) {\n    element.setAttribute(newAttributes[i].nodeName, newAttributes[i].nodeValue);\n  }\n};\n\nvar ColumnsView = _uiGrid_core.default.View.inherit(_uiGrid_core3.default).inherit({\n  _createScrollableOptions: function () {\n    var that = this;\n    var scrollingOptions = that.option(\"scrolling\");\n    var useNativeScrolling = that.option(\"scrolling.useNative\");\n    var options = (0, _extend.extend)({\n      pushBackValue: 0\n    }, scrollingOptions, {\n      direction: \"both\",\n      bounceEnabled: false,\n      useKeyboard: false\n    });\n\n    if (void 0 === useNativeScrolling) {\n      useNativeScrolling = true;\n    }\n\n    if (\"auto\" === useNativeScrolling) {\n      delete options.useNative;\n      delete options.useSimulatedScrollbar;\n    } else {\n      options.useNative = !!useNativeScrolling;\n      options.useSimulatedScrollbar = !useNativeScrolling;\n    }\n\n    return options;\n  },\n  _updateCell: function ($cell, parameters) {\n    if (parameters.rowType) {\n      this._cellPrepared($cell, parameters);\n    }\n  },\n  _createCell: function (options) {\n    var column = options.column;\n    var alignment = column.alignment || (0, _position.getDefaultAlignment)(this.option(\"rtlEnabled\"));\n\n    var cell = _dom_adapter.default.createElement(\"td\");\n\n    cell.style.textAlign = alignment;\n    var $cell = (0, _renderer.default)(cell);\n\n    if (\"data\" === options.rowType && column.headerId && !column.type) {\n      if (this.component.option(\"showColumnHeaders\")) {\n        this.setAria(\"describedby\", column.headerId, $cell);\n      }\n    }\n\n    if (column.cssClass) {\n      $cell.addClass(column.cssClass);\n    }\n\n    if (\"expand\" === column.command) {\n      $cell.addClass(column.cssClass);\n      $cell.addClass(this.addWidgetPrefix(GROUP_SPACE_CLASS));\n    }\n\n    if (column.colspan > 1) {\n      $cell.attr(\"colSpan\", column.colspan);\n    } else {\n      if (!column.isBand && \"auto\" !== column.visibleWidth && !this.option(\"legacyRendering\") && this.option(\"columnAutoWidth\")) {\n        if (column.width || column.minWidth) {\n          cell.style.minWidth = getWidthStyle(column.minWidth || column.width);\n        }\n\n        if (column.width) {\n          setCellWidth(cell, column, getWidthStyle(column.width));\n        }\n      }\n    }\n\n    return $cell;\n  },\n  _createRow: function (rowObject) {\n    var $element = (0, _renderer.default)(\"<tr>\").addClass(ROW_CLASS);\n    this.setAria(\"role\", \"row\", $element);\n    return $element;\n  },\n  _isAltRow: function (row) {\n    return row && row.dataIndex % 2 === 1;\n  },\n  _createTable: function (columns, isAppend) {\n    var that = this;\n    var $table = (0, _renderer.default)(\"<table>\").addClass(that.addWidgetPrefix(TABLE_CLASS)).addClass(that.addWidgetPrefix(TABLE_FIXED_CLASS));\n\n    if (columns && !isAppend) {\n      $table.append(that._createColGroup(columns));\n\n      if (_browser.default.safari) {\n        $table.append((0, _renderer.default)(\"<thead>\").append(\"<tr>\"));\n      }\n\n      that.setAria(\"role\", \"presentation\", $table);\n    } else {\n      that.setAria(\"hidden\", true, $table);\n    }\n\n    this.setAria(\"role\", \"presentation\", (0, _renderer.default)(\"<tbody>\").appendTo($table));\n\n    if (isAppend) {\n      return $table;\n    }\n\n    if (_browser.default.mozilla) {\n      _events_engine.default.on($table, \"mousedown\", \"td\", function (e) {\n        if (e.ctrlKey) {\n          e.preventDefault();\n        }\n      });\n    }\n\n    if (that.option(\"cellHintEnabled\")) {\n      _events_engine.default.on($table, \"mousemove\", \".dx-row > td\", this.createAction(function (args) {\n        var e = args.event;\n        var $element = (0, _renderer.default)(e.target);\n        var $cell = (0, _renderer.default)(e.currentTarget);\n        var $row = $cell.parent();\n        var isDataRow = $row.hasClass(\"dx-data-row\");\n        var isHeaderRow = $row.hasClass(\"dx-header-row\");\n        var isGroupRow = $row.hasClass(GROUP_ROW_CLASS);\n        var isMasterDetailRow = $row.hasClass(DETAIL_ROW_CLASS);\n        var isFilterRow = $row.hasClass(that.addWidgetPrefix(FILTER_ROW_CLASS));\n\n        var visibleColumns = that._columnsController.getVisibleColumns();\n\n        var rowOptions = $row.data(\"options\");\n        var columnIndex = $cell.index();\n        var cellOptions = rowOptions && rowOptions.cells && rowOptions.cells[columnIndex];\n        var column = cellOptions ? cellOptions.column : visibleColumns[columnIndex];\n        var msieCorrection = _browser.default.msie ? 1 : 0;\n\n        if (!isMasterDetailRow && !isFilterRow && (!isDataRow || isDataRow && column && !column.cellTemplate) && (!isHeaderRow || isHeaderRow && column && !column.headerCellTemplate) && (!isGroupRow || isGroupRow && column && (void 0 === column.groupIndex || !column.groupCellTemplate))) {\n          if ($element.data(CELL_HINT_VISIBLE)) {\n            $element.removeAttr(\"title\");\n            $element.data(CELL_HINT_VISIBLE, false);\n          }\n\n          var difference = $element[0].scrollWidth - $element[0].clientWidth - msieCorrection;\n\n          if (difference > 0 && !(0, _type.isDefined)($element.attr(\"title\"))) {\n            $element.attr(\"title\", $element.text());\n            $element.data(CELL_HINT_VISIBLE, true);\n          }\n        }\n      }));\n    }\n\n    var getOptions = function (event) {\n      var $cell = (0, _renderer.default)(event.currentTarget);\n      var $fieldItemContent = (0, _renderer.default)(event.target).closest(\".\" + FORM_FIELD_ITEM_CONTENT_CLASS);\n      var rowOptions = $cell.parent().data(\"options\");\n      var options = rowOptions && rowOptions.cells && rowOptions.cells[$cell.index()];\n\n      if (!$cell.closest(\"table\").is(event.delegateTarget)) {\n        return;\n      }\n\n      var resultOptions = (0, _extend.extend)({}, options, {\n        cellElement: (0, _element.getPublicElement)($cell),\n        event: event,\n        eventType: event.type\n      });\n\n      if ($fieldItemContent.length) {\n        var formItemOptions = $fieldItemContent.data(\"dx-form-item\");\n\n        if (formItemOptions.column) {\n          resultOptions.column = formItemOptions.column;\n          resultOptions.columnIndex = that._columnsController.getVisibleIndex(resultOptions.column.index);\n        }\n      }\n\n      return resultOptions;\n    };\n\n    _events_engine.default.on($table, \"mouseover\", \".dx-row > td\", function (e) {\n      var options = getOptions(e);\n      options && that.executeAction(\"onCellHoverChanged\", options);\n    });\n\n    _events_engine.default.on($table, \"mouseout\", \".dx-row > td\", function (e) {\n      var options = getOptions(e);\n      options && that.executeAction(\"onCellHoverChanged\", options);\n    });\n\n    _events_engine.default.on($table, _click.name, \".dx-row > td\", function (e) {\n      var options = getOptions(e);\n      options && that.executeAction(\"onCellClick\", options);\n    });\n\n    _events_engine.default.on($table, _double_click.name, \".dx-row > td\", function (e) {\n      var options = getOptions(e);\n      options && that.executeAction(\"onCellDblClick\", options);\n    });\n\n    subscribeToRowEvents(that, $table);\n    return $table;\n  },\n  _isNativeClick: _common.noop,\n  _rowPointerDown: _common.noop,\n  _rowClick: _common.noop,\n  _rowDblClick: _common.noop,\n  _createColGroup: function (columns) {\n    var colgroupElement = (0, _renderer.default)(\"<colgroup>\");\n\n    for (var i = 0; i < columns.length; i++) {\n      var colspan = columns[i].colspan || 1;\n\n      for (var j = 0; j < colspan; j++) {\n        colgroupElement.append(this._createCol(columns[i]));\n      }\n    }\n\n    return colgroupElement;\n  },\n  _createCol: function (column) {\n    var width = column.visibleWidth || column.width;\n\n    if (\"adaptiveHidden\" === width) {\n      width = HIDDEN_COLUMNS_WIDTH;\n    }\n\n    var col = (0, _renderer.default)(\"<col>\");\n    (0, _style.setWidth)(col, width);\n    return col;\n  },\n  renderDelayedTemplates: function () {\n    var delayedTemplates = this._delayedTemplates;\n    var syncTemplates = delayedTemplates.filter(function (template) {\n      return !template.async;\n    });\n    var asyncTemplates = delayedTemplates.filter(function (template) {\n      return template.async;\n    });\n    this._delayedTemplates = [];\n\n    this._renderDelayedTemplatesCore(syncTemplates);\n\n    this._renderDelayedTemplatesCoreAsync(asyncTemplates);\n  },\n  _renderDelayedTemplatesCoreAsync: function (templates) {\n    var that = this;\n\n    if (templates.length) {\n      (0, _window.getWindow)().setTimeout(function () {\n        that._renderDelayedTemplatesCore(templates, true);\n      });\n    }\n  },\n  _renderDelayedTemplatesCore: function (templates, isAsync) {\n    var date = new Date();\n\n    while (templates.length) {\n      var templateParameters = templates.shift();\n      var options = templateParameters.options;\n\n      var doc = _dom_adapter.default.getDocument();\n\n      if (!isAsync || (0, _renderer.default)(options.container).closest(doc).length) {\n        templateParameters.template.render(options);\n      }\n\n      if (isAsync && new Date() - date > 30) {\n        this._renderDelayedTemplatesCoreAsync(templates);\n\n        break;\n      }\n    }\n\n    if (!templates.length && this._delayedTemplates.length) {\n      this.renderDelayedTemplates();\n    }\n  },\n  _processTemplate: function (template) {\n    var that = this;\n    var renderingTemplate;\n\n    if (template && template.render && !(0, _type.isRenderer)(template)) {\n      renderingTemplate = {\n        allowRenderToDetachedContainer: template.allowRenderToDetachedContainer,\n        render: function (options) {\n          template.render(options.container, options.model);\n          options.deferred && options.deferred.resolve();\n        }\n      };\n    } else {\n      if ((0, _type.isFunction)(template)) {\n        renderingTemplate = {\n          render: function (options) {\n            var renderedTemplate = template((0, _element.getPublicElement)(options.container), options.model);\n\n            if (renderedTemplate && (renderedTemplate.nodeType || (0, _type.isRenderer)(renderedTemplate))) {\n              options.container.append(renderedTemplate);\n            }\n\n            options.deferred && options.deferred.resolve();\n          }\n        };\n      } else {\n        var templateID = (0, _type.isString)(template) ? template : (0, _renderer.default)(template).attr(\"id\");\n\n        if (!templateID) {\n          renderingTemplate = that.getTemplate(template);\n        } else {\n          if (!that._templatesCache[templateID]) {\n            that._templatesCache[templateID] = that.getTemplate(template);\n          }\n\n          renderingTemplate = that._templatesCache[templateID];\n        }\n      }\n    }\n\n    return renderingTemplate;\n  },\n  renderTemplate: function (container, template, options, allowRenderToDetachedContainer) {\n    var that = this;\n\n    var renderingTemplate = that._processTemplate(template, options);\n\n    var column = options.column;\n    var isDataRow = \"data\" === options.rowType;\n    var templateDeferred = new _deferred.Deferred();\n    var templateOptions = {\n      container: container,\n      model: options,\n      deferred: templateDeferred,\n      onRendered: function () {\n        templateDeferred.resolve();\n      }\n    };\n\n    if (renderingTemplate) {\n      options.component = that.component;\n      var async = column && (column.renderAsync && isDataRow || that.option(\"renderAsync\") && (false !== column.renderAsync && (column.command || column.showEditorAlways) && isDataRow || \"filter\" === options.rowType));\n\n      if ((renderingTemplate.allowRenderToDetachedContainer || allowRenderToDetachedContainer) && !async) {\n        renderingTemplate.render(templateOptions);\n      } else {\n        that._delayedTemplates.push({\n          template: renderingTemplate,\n          options: templateOptions,\n          async: async\n        });\n      }\n    } else {\n      templateDeferred.reject();\n    }\n\n    return templateDeferred.promise();\n  },\n  _getBodies: function (tableElement) {\n    return (0, _renderer.default)(tableElement).children(\"tbody\").not(\".dx-header\").not(\".dx-footer\");\n  },\n  _wrapRowIfNeed: function ($table, $row) {\n    var $tBodies = this.option(\"rowTemplate\") && this._getBodies(this._tableElement || $table);\n\n    if ($tBodies && $tBodies.filter(\".\" + ROW_CLASS).length) {\n      var $tbody = (0, _renderer.default)(\"<tbody>\").addClass($row.attr(\"class\"));\n      this.setAria(\"role\", \"presentation\", $tbody);\n      return $tbody.append($row);\n    }\n\n    return $row;\n  },\n  _appendRow: function ($table, $row, appendTemplate) {\n    appendTemplate = appendTemplate || appendElementTemplate;\n    appendTemplate.render({\n      content: $row,\n      container: $table\n    });\n  },\n  _resizeCore: function () {\n    var scrollLeft = this._scrollLeft;\n\n    if (scrollLeft >= 0) {\n      this._scrollLeft = 0;\n      this.scrollTo({\n        left: scrollLeft\n      });\n    }\n  },\n  _renderCore: function (e) {\n    var $root = this.element().parent();\n\n    if (!$root || $root.parent().length) {\n      this.renderDelayedTemplates(e);\n    }\n  },\n  _renderTable: function (options) {\n    options = options || {};\n    options.columns = this._columnsController.getVisibleColumns();\n    var changeType = options.change && options.change.changeType;\n\n    var $table = this._createTable(options.columns, \"append\" === changeType || \"prepend\" === changeType || \"update\" === changeType);\n\n    this._renderRows($table, options);\n\n    return $table;\n  },\n  _renderRows: function ($table, options) {\n    var that = this;\n\n    var rows = that._getRows(options.change);\n\n    var columnIndices = options.change && options.change.columnIndices || [];\n    var changeTypes = options.change && options.change.changeTypes || [];\n\n    for (var i = 0; i < rows.length; i++) {\n      that._renderRow($table, (0, _extend.extend)({\n        row: rows[i],\n        columnIndices: columnIndices[i],\n        changeType: changeTypes[i]\n      }, options));\n    }\n  },\n  _renderRow: function ($table, options) {\n    if (!options.columnIndices) {\n      options.row.cells = [];\n    }\n\n    var $row = this._createRow(options.row);\n\n    var $wrappedRow = this._wrapRowIfNeed($table, $row);\n\n    if (\"remove\" !== options.changeType) {\n      this._renderCells($row, options);\n    }\n\n    this._appendRow($table, $wrappedRow);\n\n    var rowOptions = (0, _extend.extend)({\n      columns: options.columns\n    }, options.row);\n\n    this._addWatchMethod(rowOptions, options.row);\n\n    this._rowPrepared($wrappedRow, rowOptions, options.row);\n  },\n  _needRenderCell: function (columnIndex, columnIndices) {\n    return !columnIndices || columnIndices.indexOf(columnIndex) >= 0;\n  },\n  _renderCells: function ($row, options) {\n    var that = this;\n    var columnIndex = 0;\n    var row = options.row;\n    var columns = options.columns;\n\n    for (var i = 0; i < columns.length; i++) {\n      if (this._needRenderCell(i, options.columnIndices)) {\n        that._renderCell($row, (0, _extend.extend)({\n          column: columns[i],\n          columnIndex: columnIndex,\n          value: row.values && row.values[columnIndex],\n          oldValue: row.oldValues && row.oldValues[columnIndex]\n        }, options));\n      }\n\n      if (columns[i].colspan > 1) {\n        columnIndex += columns[i].colspan;\n      } else {\n        columnIndex++;\n      }\n    }\n  },\n  _updateCells: function ($rowElement, $newRowElement, columnIndices) {\n    var $cells = $rowElement.children();\n    var $newCells = $newRowElement.children();\n    var highlightChanges = this.option(\"highlightChanges\");\n    var cellUpdatedClass = this.addWidgetPrefix(CELL_UPDATED_ANIMATION_CLASS);\n    columnIndices.forEach(function (columnIndex, index) {\n      var $cell = $cells.eq(columnIndex);\n      var $newCell = $newCells.eq(index);\n      $cell.replaceWith($newCell);\n\n      if (highlightChanges && !$newCell.hasClass(\"dx-command-expand\")) {\n        $newCell.addClass(cellUpdatedClass);\n      }\n    });\n    copyAttributes($rowElement.get(0), $newRowElement.get(0));\n  },\n  _setCellAriaAttributes: function ($cell, cellOptions) {\n    if (\"freeSpace\" !== cellOptions.rowType) {\n      this.setAria(\"selected\", false, $cell);\n      this.setAria(\"role\", \"gridcell\", $cell);\n\n      var columnIndexOffset = this._columnsController.getColumnIndexOffset();\n\n      var ariaColIndex = cellOptions.columnIndex + columnIndexOffset + 1;\n      this.setAria(\"colindex\", ariaColIndex, $cell);\n    }\n  },\n  _renderCell: function ($row, options) {\n    var cellOptions = this._getCellOptions(options);\n\n    if (options.columnIndices) {\n      if (options.row.cells) {\n        options.row.cells[cellOptions.columnIndex] = cellOptions;\n      }\n    } else {\n      options.row.cells.push(cellOptions);\n    }\n\n    var $cell = this._createCell(cellOptions);\n\n    this._setCellAriaAttributes($cell, cellOptions);\n\n    this._renderCellContent($cell, cellOptions);\n\n    $row.get(0).appendChild($cell.get(0));\n    return $cell;\n  },\n  _renderCellContent: function ($cell, options) {\n    var _this = this;\n\n    var template = this._getCellTemplate(options);\n\n    (0, _deferred.when)(!template || this.renderTemplate($cell, template, options)).done(function () {\n      _this._updateCell($cell, options);\n    });\n  },\n  _getCellTemplate: function () {},\n  _getRows: function () {\n    return [];\n  },\n  _getCellOptions: function (options) {\n    var cellOptions = {\n      column: options.column,\n      columnIndex: options.columnIndex,\n      rowType: options.row.rowType,\n      isAltRow: this._isAltRow(options.row)\n    };\n\n    this._addWatchMethod(cellOptions);\n\n    return cellOptions;\n  },\n  _addWatchMethod: function (options, source) {\n    if (!this.option(\"repaintChangesOnly\")) {\n      return;\n    }\n\n    var watchers = [];\n    source = source || options;\n\n    source.watch = source.watch || function (getter, updateFunc) {\n      var oldValue = getter(source.data);\n\n      var watcher = function (row) {\n        var newValue = getter(source.data);\n\n        if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {\n          if (row) {\n            updateFunc(newValue, oldValue);\n          }\n\n          oldValue = newValue;\n        }\n      };\n\n      watchers.push(watcher);\n\n      var stopWatch = function () {\n        var index = watchers.indexOf(watcher);\n\n        if (index >= 0) {\n          watchers.splice(index, 1);\n        }\n      };\n\n      return stopWatch;\n    };\n\n    source.update = source.update || function (row) {\n      if (row) {\n        this.data = options.data = row.data;\n        this.rowIndex = options.rowIndex = row.rowIndex;\n        this.dataIndex = options.dataIndex = row.dataIndex;\n        this.isExpanded = options.isExpanded = row.isExpanded;\n\n        if (options.row) {\n          options.row = row;\n        }\n      }\n\n      watchers.forEach(function (watcher) {\n        watcher(row);\n      });\n    };\n\n    if (source !== options) {\n      options.watch = source.watch.bind(source);\n    }\n\n    return options;\n  },\n  _cellPrepared: function (cell, options) {\n    options.cellElement = (0, _element.getPublicElement)((0, _renderer.default)(cell));\n    this.executeAction(\"onCellPrepared\", options);\n  },\n  _rowPrepared: function ($row, options) {\n    (0, _element_data.data)($row.get(0), \"options\", options);\n    options.rowElement = (0, _element.getPublicElement)($row);\n    this.executeAction(\"onRowPrepared\", options);\n  },\n  _columnOptionChanged: function (e) {\n    var optionNames = e.optionNames;\n\n    if (_uiGrid_core2.default.checkChanges(optionNames, [\"width\", \"visibleWidth\"])) {\n      var visibleColumns = this._columnsController.getVisibleColumns();\n\n      var widths = iteratorUtils.map(visibleColumns, function (column) {\n        var width = column.visibleWidth || column.width;\n        return (0, _type.isDefined)(width) ? width : \"auto\";\n      });\n      this.setColumnWidths({\n        widths: widths,\n        optionNames: optionNames\n      });\n      return;\n    }\n\n    if (!this._requireReady) {\n      this.render();\n    }\n  },\n  getCellIndex: function ($cell) {\n    var cellIndex = $cell.length ? $cell[0].cellIndex : -1;\n    return cellIndex;\n  },\n  getTableElements: function () {\n    return this._tableElement || (0, _renderer.default)();\n  },\n  getTableElement: function () {\n    return this._tableElement;\n  },\n  setTableElement: function (tableElement) {\n    this._tableElement = tableElement;\n  },\n  optionChanged: function (args) {\n    this.callBase(args);\n\n    switch (args.name) {\n      case \"cellHintEnabled\":\n      case \"onCellPrepared\":\n      case \"onRowPrepared\":\n      case \"onCellHoverChanged\":\n        this._invalidate(true, true);\n\n        args.handled = true;\n    }\n  },\n  init: function () {\n    var that = this;\n    that._scrollLeft = -1;\n    that._columnsController = that.getController(\"columns\");\n    that._dataController = that.getController(\"data\");\n    that._delayedTemplates = [];\n    that._templatesCache = {};\n    that.createAction(\"onCellClick\");\n    that.createAction(\"onRowClick\");\n    that.createAction(\"onCellDblClick\");\n    that.createAction(\"onRowDblClick\");\n    that.createAction(\"onCellHoverChanged\", {\n      excludeValidators: [\"disabled\", \"readOnly\"]\n    });\n    that.createAction(\"onCellPrepared\", {\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\"\n    });\n    that.createAction(\"onRowPrepared\", {\n      excludeValidators: [\"disabled\", \"readOnly\"],\n      category: \"rendering\",\n      afterExecute: function (e) {\n        that._afterRowPrepared(e);\n      }\n    });\n\n    that._columnsController.columnsChanged.add(that._columnOptionChanged.bind(that));\n\n    that._dataController && that._dataController.changed.add(that._handleDataChanged.bind(that));\n  },\n  _afterRowPrepared: _common.noop,\n  _handleDataChanged: function () {},\n  callbackNames: function () {\n    return [\"scrollChanged\"];\n  },\n  scrollTo: function (pos) {\n    var $element = this.element();\n    var $scrollContainer = $element && $element.children(\".\" + this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).not(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS));\n\n    if ((0, _type.isDefined)(pos) && (0, _type.isDefined)(pos.left) && this._scrollLeft !== pos.left) {\n      this._scrollLeft = pos.left;\n      $scrollContainer && $scrollContainer.scrollLeft(pos.left);\n    }\n  },\n  _wrapTableInScrollContainer: function ($table) {\n    var _this2 = this;\n\n    var $scrollContainer = (0, _renderer.default)(\"<div>\");\n\n    _events_engine.default.on($scrollContainer, \"scroll\", function () {\n      var scrollLeft = $scrollContainer.scrollLeft();\n\n      if (scrollLeft !== _this2._scrollLeft) {\n        _this2.scrollChanged.fire({\n          left: scrollLeft\n        }, _this2.name);\n      }\n    });\n\n    $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_CLASS)).addClass(this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).append($table).appendTo(this.element());\n    this.setAria(\"role\", \"presentation\", $scrollContainer);\n    return $scrollContainer;\n  },\n  _updateContent: function ($newTableElement) {\n    this.setTableElement($newTableElement);\n\n    this._wrapTableInScrollContainer($newTableElement);\n  },\n  _findContentElement: _common.noop,\n  _getWidths: function ($cellElements) {\n    var result = [];\n    var legacyRendering = this.option(\"legacyRendering\");\n    var width;\n\n    if ($cellElements) {\n      iteratorUtils.each($cellElements, function (index, item) {\n        width = item.offsetWidth;\n\n        if (item.getBoundingClientRect) {\n          var clientRect = (0, _position.getBoundingRect)(item);\n\n          if (clientRect.width > width - 1) {\n            width = legacyRendering ? Math.ceil(clientRect.width) : clientRect.width;\n          }\n        }\n\n        result.push(width);\n      });\n    }\n\n    return result;\n  },\n  getColumnWidths: function ($tableElement) {\n    var that = this;\n    var result = [];\n    var $rows;\n    var $cells;\n\n    (this.option(\"forceApplyBindings\") || _common.noop)();\n\n    $tableElement = $tableElement || that.getTableElement();\n\n    if ($tableElement) {\n      $rows = $tableElement.children(\"tbody:not(.dx-header)\").children();\n\n      for (var i = 0; i < $rows.length; i++) {\n        var $row = $rows.eq(i);\n        var isRowVisible = \"none\" !== $row.get(0).style.display && !$row.hasClass(\"dx-state-invisible\");\n\n        if (!$row.is(\".\" + GROUP_ROW_CLASS) && !$row.is(\".\" + DETAIL_ROW_CLASS) && isRowVisible) {\n          $cells = $row.children(\"td\");\n          break;\n        }\n      }\n\n      result = that._getWidths($cells);\n    }\n\n    return result;\n  },\n  getVisibleColumnIndex: function (columnIndex, rowIndex) {\n    return columnIndex;\n  },\n  setColumnWidths: function (_ref) {\n    var widths = _ref.widths,\n        $tableElement = _ref.$tableElement,\n        columns = _ref.columns,\n        fixed = _ref.fixed;\n    var $cols;\n    var width;\n    var minWidth;\n    var columnIndex;\n    var columnAutoWidth = this.option(\"columnAutoWidth\");\n    var legacyRendering = this.option(\"legacyRendering\");\n    $tableElement = $tableElement || this.getTableElement();\n\n    if ($tableElement && $tableElement.length && widths) {\n      columnIndex = 0;\n      $cols = $tableElement.children(\"colgroup\").children(\"col\");\n      (0, _style.setWidth)($cols, \"auto\");\n      columns = columns || this.getColumns(null, $tableElement);\n\n      for (var i = 0; i < columns.length; i++) {\n        if (!legacyRendering && columnAutoWidth && !fixed) {\n          width = columns[i].width;\n\n          if (width && !columns[i].command) {\n            width = columns[i].visibleWidth || width;\n            width = getWidthStyle(width);\n            minWidth = getWidthStyle(columns[i].minWidth || width);\n            var $rows = $rows || $tableElement.children().children(\".dx-row\").not(\".\" + GROUP_ROW_CLASS).not(\".\" + DETAIL_ROW_CLASS);\n\n            for (var rowIndex = 0; rowIndex < $rows.length; rowIndex++) {\n              var visibleIndex = this.getVisibleColumnIndex(i, rowIndex);\n              var cell = $rows[rowIndex].cells[visibleIndex];\n\n              if (cell) {\n                setCellWidth(cell, columns[i], width);\n                cell.style.minWidth = minWidth;\n              }\n            }\n          }\n        }\n\n        if (columns[i].colspan) {\n          columnIndex += columns[i].colspan;\n          continue;\n        }\n\n        width = widths[columnIndex];\n\n        if (\"adaptiveHidden\" === width) {\n          width = HIDDEN_COLUMNS_WIDTH;\n        }\n\n        if (\"number\" === typeof width) {\n          width = width.toFixed(3) + \"px\";\n        }\n\n        (0, _style.setWidth)($cols.eq(columnIndex), (0, _type.isDefined)(width) ? width : \"auto\");\n        columnIndex++;\n      }\n    }\n  },\n  getCellElements: function (rowIndex) {\n    return this._getCellElementsCore(rowIndex);\n  },\n  _getCellElementsCore: function (rowIndex) {\n    var $row = this._getRowElements().eq(rowIndex);\n\n    return $row.children();\n  },\n  _getCellElement: function (rowIndex, columnIdentifier) {\n    var that = this;\n    var $cell;\n    var $cells = that.getCellElements(rowIndex);\n\n    var columnVisibleIndex = that._getVisibleColumnIndex($cells, rowIndex, columnIdentifier);\n\n    if ($cells.length && columnVisibleIndex >= 0) {\n      $cell = $cells.eq(columnVisibleIndex);\n    }\n\n    if ($cell && $cell.length) {\n      return $cell;\n    }\n  },\n  _getRowElement: function (rowIndex) {\n    var that = this;\n    var $rowElement = (0, _renderer.default)();\n    var $tableElements = that.getTableElements();\n    iteratorUtils.each($tableElements, function (_, tableElement) {\n      $rowElement = $rowElement.add(that._getRowElements((0, _renderer.default)(tableElement)).eq(rowIndex));\n    });\n\n    if ($rowElement.length) {\n      return $rowElement;\n    }\n  },\n  getCellElement: function (rowIndex, columnIdentifier) {\n    return (0, _element.getPublicElement)(this._getCellElement(rowIndex, columnIdentifier));\n  },\n  getRowElement: function (rowIndex) {\n    var $rows = this._getRowElement(rowIndex);\n\n    var elements = [];\n\n    if ($rows && !(0, _element.getPublicElement)($rows).get) {\n      for (var i = 0; i < $rows.length; i++) {\n        elements.push($rows[i]);\n      }\n    } else {\n      elements = $rows;\n    }\n\n    return elements;\n  },\n  _getVisibleColumnIndex: function ($cells, rowIndex, columnIdentifier) {\n    if ((0, _type.isString)(columnIdentifier)) {\n      var columnIndex = this._columnsController.columnOption(columnIdentifier, \"index\");\n\n      return this._columnsController.getVisibleIndex(columnIndex);\n    }\n\n    return columnIdentifier;\n  },\n  getColumnElements: function () {},\n  getColumns: function (rowIndex) {\n    return this._columnsController.getVisibleColumns(rowIndex);\n  },\n  getCell: function (cellPosition, rows) {\n    var $rows = rows || this._getRowElements();\n\n    var $cells;\n\n    if ($rows.length > 0 && cellPosition.rowIndex >= 0) {\n      if (\"virtual\" !== this.option(\"scrolling.mode\")) {\n        cellPosition.rowIndex = cellPosition.rowIndex < $rows.length ? cellPosition.rowIndex : $rows.length - 1;\n      }\n\n      $cells = this.getCellElements(cellPosition.rowIndex);\n\n      if ($cells && $cells.length > 0) {\n        return $cells.eq($cells.length > cellPosition.columnIndex ? cellPosition.columnIndex : $cells.length - 1);\n      }\n    }\n  },\n  getRowsCount: function () {\n    var tableElement = this.getTableElement();\n\n    if (tableElement && 1 === tableElement.length) {\n      return tableElement[0].rows.length;\n    }\n\n    return 0;\n  },\n  _getRowElementsCore: function (tableElement) {\n    tableElement = tableElement || this.getTableElement();\n\n    if (tableElement) {\n      var tBodies = this.option(\"rowTemplate\") && tableElement.find(\"> tbody.\" + ROW_CLASS);\n      return tBodies && tBodies.length ? tBodies : tableElement.find(\"> tbody > .\" + ROW_CLASS + \", > .\" + ROW_CLASS);\n    }\n\n    return (0, _renderer.default)();\n  },\n  _getRowElements: function (tableElement) {\n    return this._getRowElementsCore(tableElement);\n  },\n  getRowIndex: function ($row) {\n    return this._getRowElements().index($row);\n  },\n  getBoundingRect: function () {},\n  getName: function () {},\n  setScrollerSpacing: function (width) {\n    var that = this;\n    var $element = that.element();\n    var rtlEnabled = that.option(\"rtlEnabled\");\n    $element && $element.css({\n      paddingLeft: rtlEnabled ? width : \"\",\n      paddingRight: !rtlEnabled ? width : \"\"\n    });\n  },\n  isScrollbarVisible: function (isHorizontal) {\n    var $element = this.element();\n    var $tableElement = this._tableElement;\n\n    if ($element && $tableElement) {\n      return isHorizontal ? $tableElement.outerWidth() - $element.width() > 0 : $tableElement.outerHeight() - $element.height() > 0;\n    }\n\n    return false;\n  }\n});\n\nexports.ColumnsView = ColumnsView;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/grid_core/ui.grid_core.columns_view.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","exports","ColumnsView","_renderer","_interopRequireDefault","require","_dom_adapter","_window","_events_engine","_element_data","_pointer","_click","_double_click","_browser","_common","_style","_element","_type","_position","iteratorUtils","_interopRequireWildcard","_extend","_uiGrid_core","_uiGrid_core2","_uiGrid_core3","_deferred","_getRequireWildcardCache","WeakMap","cache","__esModule","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","default","SCROLL_CONTAINER_CLASS","GROUP_SPACE_CLASS","CONTENT_CLASS","TABLE_CLASS","TABLE_FIXED_CLASS","CONTENT_FIXED_CLASS","ROW_CLASS","GROUP_ROW_CLASS","DETAIL_ROW_CLASS","FILTER_ROW_CLASS","CELL_UPDATED_ANIMATION_CLASS","HIDDEN_COLUMNS_WIDTH","CELL_HINT_VISIBLE","FORM_FIELD_ITEM_CONTENT_CLASS","appendElementTemplate","render","options","container","append","content","subscribeToRowEvents","that","$table","touchTarget","touchCurrentTarget","timeoutId","clearTouchTargets","timeout","setTimeout","on","e","clearTimeout","type","target","currentTarget","name","down","join","useNative","_isNativeClick","createAction","event","closest","length","rowIndex","getRowIndex","rowElement","getPublicElement","columns","getColumns","_rowPointerDown","_rowClick","_rowDblClick","getWidthStyle","width","isNumeric","setCellWidth","cell","column","style","maxWidth","copyAttributes","element","newElement","oldAttributes","attributes","newAttributes","i","nodeName","hasAttribute","removeAttribute","setAttribute","nodeValue","View","inherit","_createScrollableOptions","scrollingOptions","option","useNativeScrolling","extend","pushBackValue","direction","bounceEnabled","useKeyboard","useSimulatedScrollbar","_updateCell","$cell","parameters","rowType","_cellPrepared","_createCell","alignment","getDefaultAlignment","createElement","textAlign","headerId","component","setAria","cssClass","addClass","command","addWidgetPrefix","colspan","attr","isBand","visibleWidth","minWidth","_createRow","rowObject","$element","_isAltRow","row","dataIndex","_createTable","isAppend","_createColGroup","safari","appendTo","mozilla","ctrlKey","preventDefault","args","$row","parent","isDataRow","hasClass","isHeaderRow","isGroupRow","isMasterDetailRow","isFilterRow","visibleColumns","_columnsController","getVisibleColumns","rowOptions","data","columnIndex","index","cellOptions","cells","msieCorrection","msie","cellTemplate","headerCellTemplate","groupIndex","groupCellTemplate","removeAttr","difference","scrollWidth","clientWidth","isDefined","text","getOptions","$fieldItemContent","is","delegateTarget","resultOptions","cellElement","eventType","formItemOptions","getVisibleIndex","executeAction","noop","colgroupElement","j","_createCol","col","setWidth","renderDelayedTemplates","delayedTemplates","_delayedTemplates","syncTemplates","filter","template","async","asyncTemplates","_renderDelayedTemplatesCore","_renderDelayedTemplatesCoreAsync","templates","getWindow","isAsync","date","Date","templateParameters","shift","doc","getDocument","_processTemplate","renderingTemplate","isRenderer","allowRenderToDetachedContainer","model","deferred","resolve","isFunction","renderedTemplate","nodeType","templateID","isString","getTemplate","_templatesCache","renderTemplate","templateDeferred","Deferred","templateOptions","onRendered","renderAsync","showEditorAlways","push","reject","promise","_getBodies","tableElement","children","not","_wrapRowIfNeed","$tBodies","_tableElement","$tbody","_appendRow","appendTemplate","_resizeCore","scrollLeft","_scrollLeft","scrollTo","left","_renderCore","$root","_renderTable","changeType","change","_renderRows","rows","_getRows","columnIndices","changeTypes","_renderRow","$wrappedRow","_renderCells","_addWatchMethod","_rowPrepared","_needRenderCell","indexOf","_renderCell","value","values","oldValue","oldValues","_updateCells","$rowElement","$newRowElement","$cells","$newCells","highlightChanges","cellUpdatedClass","forEach","eq","$newCell","replaceWith","_setCellAriaAttributes","columnIndexOffset","getColumnIndexOffset","ariaColIndex","_getCellOptions","_renderCellContent","appendChild","_this","_getCellTemplate","when","done","isAltRow","source","watchers","watch","getter","updateFunc","watcher","newValue","JSON","stringify","stopWatch","splice","update","isExpanded","bind","_columnOptionChanged","optionNames","checkChanges","widths","map","setColumnWidths","_requireReady","getCellIndex","cellIndex","getTableElements","getTableElement","setTableElement","optionChanged","callBase","_invalidate","handled","init","getController","_dataController","excludeValidators","category","afterExecute","_afterRowPrepared","columnsChanged","add","changed","_handleDataChanged","callbackNames","pos","$scrollContainer","_wrapTableInScrollContainer","_this2","scrollChanged","fire","_updateContent","$newTableElement","_findContentElement","_getWidths","$cellElements","result","legacyRendering","each","item","offsetWidth","getBoundingClientRect","clientRect","getBoundingRect","Math","ceil","getColumnWidths","$tableElement","$rows","isRowVisible","display","getVisibleColumnIndex","_ref","fixed","$cols","columnAutoWidth","visibleIndex","toFixed","getCellElements","_getCellElementsCore","_getRowElements","_getCellElement","columnIdentifier","columnVisibleIndex","_getVisibleColumnIndex","_getRowElement","$tableElements","_","getCellElement","getRowElement","elements","columnOption","getColumnElements","getCell","cellPosition","getRowsCount","_getRowElementsCore","tBodies","find","getName","setScrollerSpacing","rtlEnabled","css","paddingLeft","paddingRight","isScrollbarVisible","isHorizontal","outerWidth","outerHeight","height"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.columns_view.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\n\r\nfunction _typeof(obj) {\r\n    \"@babel/helpers - typeof\";\r\n    if (\"function\" === typeof Symbol && \"symbol\" === typeof Symbol.iterator) {\r\n        _typeof = function(obj) {\r\n            return typeof obj\r\n        }\r\n    } else {\r\n        _typeof = function(obj) {\r\n            return obj && \"function\" === typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj\r\n        }\r\n    }\r\n    return _typeof(obj)\r\n}\r\nexports.ColumnsView = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _element_data = require(\"../../core/element_data\");\r\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\r\nvar _click = require(\"../../events/click\");\r\nvar _double_click = require(\"../../events/double_click\");\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _style = require(\"../../core/utils/style\");\r\nvar _element = require(\"../../core/element\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _position = require(\"../../core/utils/position\");\r\nvar iteratorUtils = _interopRequireWildcard(require(\"../../core/utils/iterator\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _uiGrid_core = _interopRequireDefault(require(\"./ui.grid_core.modules\"));\r\nvar _uiGrid_core2 = _interopRequireDefault(require(\"./ui.grid_core.utils\"));\r\nvar _uiGrid_core3 = _interopRequireDefault(require(\"./ui.grid_core.column_state_mixin\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _getRequireWildcardCache() {\r\n    if (\"function\" !== typeof WeakMap) {\r\n        return null\r\n    }\r\n    var cache = new WeakMap;\r\n    _getRequireWildcardCache = function() {\r\n        return cache\r\n    };\r\n    return cache\r\n}\r\n\r\nfunction _interopRequireWildcard(obj) {\r\n    if (obj && obj.__esModule) {\r\n        return obj\r\n    }\r\n    if (null === obj || \"object\" !== _typeof(obj) && \"function\" !== typeof obj) {\r\n        return {\r\n            \"default\": obj\r\n        }\r\n    }\r\n    var cache = _getRequireWildcardCache();\r\n    if (cache && cache.has(obj)) {\r\n        return cache.get(obj)\r\n    }\r\n    var newObj = {};\r\n    var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor;\r\n    for (var key in obj) {\r\n        if (Object.prototype.hasOwnProperty.call(obj, key)) {\r\n            var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null;\r\n            if (desc && (desc.get || desc.set)) {\r\n                Object.defineProperty(newObj, key, desc)\r\n            } else {\r\n                newObj[key] = obj[key]\r\n            }\r\n        }\r\n    }\r\n    newObj.default = obj;\r\n    if (cache) {\r\n        cache.set(obj, newObj)\r\n    }\r\n    return newObj\r\n}\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar SCROLL_CONTAINER_CLASS = \"scroll-container\";\r\nvar GROUP_SPACE_CLASS = \"group-space\";\r\nvar CONTENT_CLASS = \"content\";\r\nvar TABLE_CLASS = \"table\";\r\nvar TABLE_FIXED_CLASS = \"table-fixed\";\r\nvar CONTENT_FIXED_CLASS = \"content-fixed\";\r\nvar ROW_CLASS = \"dx-row\";\r\nvar GROUP_ROW_CLASS = \"dx-group-row\";\r\nvar DETAIL_ROW_CLASS = \"dx-master-detail-row\";\r\nvar FILTER_ROW_CLASS = \"filter-row\";\r\nvar CELL_UPDATED_ANIMATION_CLASS = \"cell-updated-animation\";\r\nvar HIDDEN_COLUMNS_WIDTH = \"0.0001px\";\r\nvar CELL_HINT_VISIBLE = \"dxCellHintVisible\";\r\nvar FORM_FIELD_ITEM_CONTENT_CLASS = \"dx-field-item-content\";\r\nvar appendElementTemplate = {\r\n    render: function(options) {\r\n        options.container.append(options.content)\r\n    }\r\n};\r\nvar subscribeToRowEvents = function(that, $table) {\r\n    var touchTarget;\r\n    var touchCurrentTarget;\r\n    var timeoutId;\r\n\r\n    function clearTouchTargets(timeout) {\r\n        return setTimeout(function() {\r\n            touchTarget = touchCurrentTarget = null\r\n        }, timeout)\r\n    }\r\n    _events_engine.default.on($table, \"touchstart touchend\", \".dx-row\", function(e) {\r\n        clearTimeout(timeoutId);\r\n        if (\"touchstart\" === e.type) {\r\n            touchTarget = e.target;\r\n            touchCurrentTarget = e.currentTarget;\r\n            timeoutId = clearTouchTargets(1e3)\r\n        } else {\r\n            timeoutId = clearTouchTargets()\r\n        }\r\n    });\r\n    _events_engine.default.on($table, [_click.name, _double_click.name, _pointer.default.down].join(\" \"), \".dx-row\", {\r\n        useNative: that._isNativeClick()\r\n    }, that.createAction(function(e) {\r\n        var event = e.event;\r\n        if (touchTarget) {\r\n            event.target = touchTarget;\r\n            event.currentTarget = touchCurrentTarget\r\n        }\r\n        if (!(0, _renderer.default)(event.target).closest(\"a\").length) {\r\n            e.rowIndex = that.getRowIndex(event.currentTarget);\r\n            if (e.rowIndex >= 0) {\r\n                e.rowElement = (0, _element.getPublicElement)((0, _renderer.default)(event.currentTarget));\r\n                e.columns = that.getColumns();\r\n                if (event.type === _pointer.default.down) {\r\n                    that._rowPointerDown(e)\r\n                } else {\r\n                    if (event.type === _click.name) {\r\n                        that._rowClick(e)\r\n                    } else {\r\n                        that._rowDblClick(e)\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }))\r\n};\r\nvar getWidthStyle = function(width) {\r\n    if (\"auto\" === width) {\r\n        return \"\"\r\n    }\r\n    return (0, _type.isNumeric)(width) ? width + \"px\" : width\r\n};\r\nvar setCellWidth = function(cell, column, width) {\r\n    cell.style.width = cell.style.maxWidth = \"auto\" === column.width ? \"\" : width\r\n};\r\nvar copyAttributes = function(element, newElement) {\r\n    if (!element || !newElement) {\r\n        return\r\n    }\r\n    var oldAttributes = element.attributes;\r\n    var newAttributes = newElement.attributes;\r\n    var i;\r\n    for (i = 0; i < oldAttributes.length; i++) {\r\n        var name = oldAttributes[i].nodeName;\r\n        if (!newElement.hasAttribute(name)) {\r\n            element.removeAttribute(name)\r\n        }\r\n    }\r\n    for (i = 0; i < newAttributes.length; i++) {\r\n        element.setAttribute(newAttributes[i].nodeName, newAttributes[i].nodeValue)\r\n    }\r\n};\r\nvar ColumnsView = _uiGrid_core.default.View.inherit(_uiGrid_core3.default).inherit({\r\n    _createScrollableOptions: function() {\r\n        var that = this;\r\n        var scrollingOptions = that.option(\"scrolling\");\r\n        var useNativeScrolling = that.option(\"scrolling.useNative\");\r\n        var options = (0, _extend.extend)({\r\n            pushBackValue: 0\r\n        }, scrollingOptions, {\r\n            direction: \"both\",\r\n            bounceEnabled: false,\r\n            useKeyboard: false\r\n        });\r\n        if (void 0 === useNativeScrolling) {\r\n            useNativeScrolling = true\r\n        }\r\n        if (\"auto\" === useNativeScrolling) {\r\n            delete options.useNative;\r\n            delete options.useSimulatedScrollbar\r\n        } else {\r\n            options.useNative = !!useNativeScrolling;\r\n            options.useSimulatedScrollbar = !useNativeScrolling\r\n        }\r\n        return options\r\n    },\r\n    _updateCell: function($cell, parameters) {\r\n        if (parameters.rowType) {\r\n            this._cellPrepared($cell, parameters)\r\n        }\r\n    },\r\n    _createCell: function(options) {\r\n        var column = options.column;\r\n        var alignment = column.alignment || (0, _position.getDefaultAlignment)(this.option(\"rtlEnabled\"));\r\n        var cell = _dom_adapter.default.createElement(\"td\");\r\n        cell.style.textAlign = alignment;\r\n        var $cell = (0, _renderer.default)(cell);\r\n        if (\"data\" === options.rowType && column.headerId && !column.type) {\r\n            if (this.component.option(\"showColumnHeaders\")) {\r\n                this.setAria(\"describedby\", column.headerId, $cell)\r\n            }\r\n        }\r\n        if (column.cssClass) {\r\n            $cell.addClass(column.cssClass)\r\n        }\r\n        if (\"expand\" === column.command) {\r\n            $cell.addClass(column.cssClass);\r\n            $cell.addClass(this.addWidgetPrefix(GROUP_SPACE_CLASS))\r\n        }\r\n        if (column.colspan > 1) {\r\n            $cell.attr(\"colSpan\", column.colspan)\r\n        } else {\r\n            if (!column.isBand && \"auto\" !== column.visibleWidth && !this.option(\"legacyRendering\") && this.option(\"columnAutoWidth\")) {\r\n                if (column.width || column.minWidth) {\r\n                    cell.style.minWidth = getWidthStyle(column.minWidth || column.width)\r\n                }\r\n                if (column.width) {\r\n                    setCellWidth(cell, column, getWidthStyle(column.width))\r\n                }\r\n            }\r\n        }\r\n        return $cell\r\n    },\r\n    _createRow: function(rowObject) {\r\n        var $element = (0, _renderer.default)(\"<tr>\").addClass(ROW_CLASS);\r\n        this.setAria(\"role\", \"row\", $element);\r\n        return $element\r\n    },\r\n    _isAltRow: function(row) {\r\n        return row && row.dataIndex % 2 === 1\r\n    },\r\n    _createTable: function(columns, isAppend) {\r\n        var that = this;\r\n        var $table = (0, _renderer.default)(\"<table>\").addClass(that.addWidgetPrefix(TABLE_CLASS)).addClass(that.addWidgetPrefix(TABLE_FIXED_CLASS));\r\n        if (columns && !isAppend) {\r\n            $table.append(that._createColGroup(columns));\r\n            if (_browser.default.safari) {\r\n                $table.append((0, _renderer.default)(\"<thead>\").append(\"<tr>\"))\r\n            }\r\n            that.setAria(\"role\", \"presentation\", $table)\r\n        } else {\r\n            that.setAria(\"hidden\", true, $table)\r\n        }\r\n        this.setAria(\"role\", \"presentation\", (0, _renderer.default)(\"<tbody>\").appendTo($table));\r\n        if (isAppend) {\r\n            return $table\r\n        }\r\n        if (_browser.default.mozilla) {\r\n            _events_engine.default.on($table, \"mousedown\", \"td\", function(e) {\r\n                if (e.ctrlKey) {\r\n                    e.preventDefault()\r\n                }\r\n            })\r\n        }\r\n        if (that.option(\"cellHintEnabled\")) {\r\n            _events_engine.default.on($table, \"mousemove\", \".dx-row > td\", this.createAction(function(args) {\r\n                var e = args.event;\r\n                var $element = (0, _renderer.default)(e.target);\r\n                var $cell = (0, _renderer.default)(e.currentTarget);\r\n                var $row = $cell.parent();\r\n                var isDataRow = $row.hasClass(\"dx-data-row\");\r\n                var isHeaderRow = $row.hasClass(\"dx-header-row\");\r\n                var isGroupRow = $row.hasClass(GROUP_ROW_CLASS);\r\n                var isMasterDetailRow = $row.hasClass(DETAIL_ROW_CLASS);\r\n                var isFilterRow = $row.hasClass(that.addWidgetPrefix(FILTER_ROW_CLASS));\r\n                var visibleColumns = that._columnsController.getVisibleColumns();\r\n                var rowOptions = $row.data(\"options\");\r\n                var columnIndex = $cell.index();\r\n                var cellOptions = rowOptions && rowOptions.cells && rowOptions.cells[columnIndex];\r\n                var column = cellOptions ? cellOptions.column : visibleColumns[columnIndex];\r\n                var msieCorrection = _browser.default.msie ? 1 : 0;\r\n                if (!isMasterDetailRow && !isFilterRow && (!isDataRow || isDataRow && column && !column.cellTemplate) && (!isHeaderRow || isHeaderRow && column && !column.headerCellTemplate) && (!isGroupRow || isGroupRow && column && (void 0 === column.groupIndex || !column.groupCellTemplate))) {\r\n                    if ($element.data(CELL_HINT_VISIBLE)) {\r\n                        $element.removeAttr(\"title\");\r\n                        $element.data(CELL_HINT_VISIBLE, false)\r\n                    }\r\n                    var difference = $element[0].scrollWidth - $element[0].clientWidth - msieCorrection;\r\n                    if (difference > 0 && !(0, _type.isDefined)($element.attr(\"title\"))) {\r\n                        $element.attr(\"title\", $element.text());\r\n                        $element.data(CELL_HINT_VISIBLE, true)\r\n                    }\r\n                }\r\n            }))\r\n        }\r\n        var getOptions = function(event) {\r\n            var $cell = (0, _renderer.default)(event.currentTarget);\r\n            var $fieldItemContent = (0, _renderer.default)(event.target).closest(\".\" + FORM_FIELD_ITEM_CONTENT_CLASS);\r\n            var rowOptions = $cell.parent().data(\"options\");\r\n            var options = rowOptions && rowOptions.cells && rowOptions.cells[$cell.index()];\r\n            if (!$cell.closest(\"table\").is(event.delegateTarget)) {\r\n                return\r\n            }\r\n            var resultOptions = (0, _extend.extend)({}, options, {\r\n                cellElement: (0, _element.getPublicElement)($cell),\r\n                event: event,\r\n                eventType: event.type\r\n            });\r\n            if ($fieldItemContent.length) {\r\n                var formItemOptions = $fieldItemContent.data(\"dx-form-item\");\r\n                if (formItemOptions.column) {\r\n                    resultOptions.column = formItemOptions.column;\r\n                    resultOptions.columnIndex = that._columnsController.getVisibleIndex(resultOptions.column.index)\r\n                }\r\n            }\r\n            return resultOptions\r\n        };\r\n        _events_engine.default.on($table, \"mouseover\", \".dx-row > td\", function(e) {\r\n            var options = getOptions(e);\r\n            options && that.executeAction(\"onCellHoverChanged\", options)\r\n        });\r\n        _events_engine.default.on($table, \"mouseout\", \".dx-row > td\", function(e) {\r\n            var options = getOptions(e);\r\n            options && that.executeAction(\"onCellHoverChanged\", options)\r\n        });\r\n        _events_engine.default.on($table, _click.name, \".dx-row > td\", function(e) {\r\n            var options = getOptions(e);\r\n            options && that.executeAction(\"onCellClick\", options)\r\n        });\r\n        _events_engine.default.on($table, _double_click.name, \".dx-row > td\", function(e) {\r\n            var options = getOptions(e);\r\n            options && that.executeAction(\"onCellDblClick\", options)\r\n        });\r\n        subscribeToRowEvents(that, $table);\r\n        return $table\r\n    },\r\n    _isNativeClick: _common.noop,\r\n    _rowPointerDown: _common.noop,\r\n    _rowClick: _common.noop,\r\n    _rowDblClick: _common.noop,\r\n    _createColGroup: function(columns) {\r\n        var colgroupElement = (0, _renderer.default)(\"<colgroup>\");\r\n        for (var i = 0; i < columns.length; i++) {\r\n            var colspan = columns[i].colspan || 1;\r\n            for (var j = 0; j < colspan; j++) {\r\n                colgroupElement.append(this._createCol(columns[i]))\r\n            }\r\n        }\r\n        return colgroupElement\r\n    },\r\n    _createCol: function(column) {\r\n        var width = column.visibleWidth || column.width;\r\n        if (\"adaptiveHidden\" === width) {\r\n            width = HIDDEN_COLUMNS_WIDTH\r\n        }\r\n        var col = (0, _renderer.default)(\"<col>\");\r\n        (0, _style.setWidth)(col, width);\r\n        return col\r\n    },\r\n    renderDelayedTemplates: function() {\r\n        var delayedTemplates = this._delayedTemplates;\r\n        var syncTemplates = delayedTemplates.filter(function(template) {\r\n            return !template.async\r\n        });\r\n        var asyncTemplates = delayedTemplates.filter(function(template) {\r\n            return template.async\r\n        });\r\n        this._delayedTemplates = [];\r\n        this._renderDelayedTemplatesCore(syncTemplates);\r\n        this._renderDelayedTemplatesCoreAsync(asyncTemplates)\r\n    },\r\n    _renderDelayedTemplatesCoreAsync: function(templates) {\r\n        var that = this;\r\n        if (templates.length) {\r\n            (0, _window.getWindow)().setTimeout(function() {\r\n                that._renderDelayedTemplatesCore(templates, true)\r\n            })\r\n        }\r\n    },\r\n    _renderDelayedTemplatesCore: function(templates, isAsync) {\r\n        var date = new Date;\r\n        while (templates.length) {\r\n            var templateParameters = templates.shift();\r\n            var options = templateParameters.options;\r\n            var doc = _dom_adapter.default.getDocument();\r\n            if (!isAsync || (0, _renderer.default)(options.container).closest(doc).length) {\r\n                templateParameters.template.render(options)\r\n            }\r\n            if (isAsync && new Date - date > 30) {\r\n                this._renderDelayedTemplatesCoreAsync(templates);\r\n                break\r\n            }\r\n        }\r\n        if (!templates.length && this._delayedTemplates.length) {\r\n            this.renderDelayedTemplates()\r\n        }\r\n    },\r\n    _processTemplate: function(template) {\r\n        var that = this;\r\n        var renderingTemplate;\r\n        if (template && template.render && !(0, _type.isRenderer)(template)) {\r\n            renderingTemplate = {\r\n                allowRenderToDetachedContainer: template.allowRenderToDetachedContainer,\r\n                render: function(options) {\r\n                    template.render(options.container, options.model);\r\n                    options.deferred && options.deferred.resolve()\r\n                }\r\n            }\r\n        } else {\r\n            if ((0, _type.isFunction)(template)) {\r\n                renderingTemplate = {\r\n                    render: function(options) {\r\n                        var renderedTemplate = template((0, _element.getPublicElement)(options.container), options.model);\r\n                        if (renderedTemplate && (renderedTemplate.nodeType || (0, _type.isRenderer)(renderedTemplate))) {\r\n                            options.container.append(renderedTemplate)\r\n                        }\r\n                        options.deferred && options.deferred.resolve()\r\n                    }\r\n                }\r\n            } else {\r\n                var templateID = (0, _type.isString)(template) ? template : (0, _renderer.default)(template).attr(\"id\");\r\n                if (!templateID) {\r\n                    renderingTemplate = that.getTemplate(template)\r\n                } else {\r\n                    if (!that._templatesCache[templateID]) {\r\n                        that._templatesCache[templateID] = that.getTemplate(template)\r\n                    }\r\n                    renderingTemplate = that._templatesCache[templateID]\r\n                }\r\n            }\r\n        }\r\n        return renderingTemplate\r\n    },\r\n    renderTemplate: function(container, template, options, allowRenderToDetachedContainer) {\r\n        var that = this;\r\n        var renderingTemplate = that._processTemplate(template, options);\r\n        var column = options.column;\r\n        var isDataRow = \"data\" === options.rowType;\r\n        var templateDeferred = new _deferred.Deferred;\r\n        var templateOptions = {\r\n            container: container,\r\n            model: options,\r\n            deferred: templateDeferred,\r\n            onRendered: function() {\r\n                templateDeferred.resolve()\r\n            }\r\n        };\r\n        if (renderingTemplate) {\r\n            options.component = that.component;\r\n            var async = column && (column.renderAsync && isDataRow || that.option(\"renderAsync\") && (false !== column.renderAsync && (column.command || column.showEditorAlways) && isDataRow || \"filter\" === options.rowType));\r\n            if ((renderingTemplate.allowRenderToDetachedContainer || allowRenderToDetachedContainer) && !async) {\r\n                renderingTemplate.render(templateOptions)\r\n            } else {\r\n                that._delayedTemplates.push({\r\n                    template: renderingTemplate,\r\n                    options: templateOptions,\r\n                    async: async\r\n                })\r\n            }\r\n        } else {\r\n            templateDeferred.reject()\r\n        }\r\n        return templateDeferred.promise()\r\n    },\r\n    _getBodies: function(tableElement) {\r\n        return (0, _renderer.default)(tableElement).children(\"tbody\").not(\".dx-header\").not(\".dx-footer\")\r\n    },\r\n    _wrapRowIfNeed: function($table, $row) {\r\n        var $tBodies = this.option(\"rowTemplate\") && this._getBodies(this._tableElement || $table);\r\n        if ($tBodies && $tBodies.filter(\".\" + ROW_CLASS).length) {\r\n            var $tbody = (0, _renderer.default)(\"<tbody>\").addClass($row.attr(\"class\"));\r\n            this.setAria(\"role\", \"presentation\", $tbody);\r\n            return $tbody.append($row)\r\n        }\r\n        return $row\r\n    },\r\n    _appendRow: function($table, $row, appendTemplate) {\r\n        appendTemplate = appendTemplate || appendElementTemplate;\r\n        appendTemplate.render({\r\n            content: $row,\r\n            container: $table\r\n        })\r\n    },\r\n    _resizeCore: function() {\r\n        var scrollLeft = this._scrollLeft;\r\n        if (scrollLeft >= 0) {\r\n            this._scrollLeft = 0;\r\n            this.scrollTo({\r\n                left: scrollLeft\r\n            })\r\n        }\r\n    },\r\n    _renderCore: function(e) {\r\n        var $root = this.element().parent();\r\n        if (!$root || $root.parent().length) {\r\n            this.renderDelayedTemplates(e)\r\n        }\r\n    },\r\n    _renderTable: function(options) {\r\n        options = options || {};\r\n        options.columns = this._columnsController.getVisibleColumns();\r\n        var changeType = options.change && options.change.changeType;\r\n        var $table = this._createTable(options.columns, \"append\" === changeType || \"prepend\" === changeType || \"update\" === changeType);\r\n        this._renderRows($table, options);\r\n        return $table\r\n    },\r\n    _renderRows: function($table, options) {\r\n        var that = this;\r\n        var rows = that._getRows(options.change);\r\n        var columnIndices = options.change && options.change.columnIndices || [];\r\n        var changeTypes = options.change && options.change.changeTypes || [];\r\n        for (var i = 0; i < rows.length; i++) {\r\n            that._renderRow($table, (0, _extend.extend)({\r\n                row: rows[i],\r\n                columnIndices: columnIndices[i],\r\n                changeType: changeTypes[i]\r\n            }, options))\r\n        }\r\n    },\r\n    _renderRow: function($table, options) {\r\n        if (!options.columnIndices) {\r\n            options.row.cells = []\r\n        }\r\n        var $row = this._createRow(options.row);\r\n        var $wrappedRow = this._wrapRowIfNeed($table, $row);\r\n        if (\"remove\" !== options.changeType) {\r\n            this._renderCells($row, options)\r\n        }\r\n        this._appendRow($table, $wrappedRow);\r\n        var rowOptions = (0, _extend.extend)({\r\n            columns: options.columns\r\n        }, options.row);\r\n        this._addWatchMethod(rowOptions, options.row);\r\n        this._rowPrepared($wrappedRow, rowOptions, options.row)\r\n    },\r\n    _needRenderCell: function(columnIndex, columnIndices) {\r\n        return !columnIndices || columnIndices.indexOf(columnIndex) >= 0\r\n    },\r\n    _renderCells: function($row, options) {\r\n        var that = this;\r\n        var columnIndex = 0;\r\n        var row = options.row;\r\n        var columns = options.columns;\r\n        for (var i = 0; i < columns.length; i++) {\r\n            if (this._needRenderCell(i, options.columnIndices)) {\r\n                that._renderCell($row, (0, _extend.extend)({\r\n                    column: columns[i],\r\n                    columnIndex: columnIndex,\r\n                    value: row.values && row.values[columnIndex],\r\n                    oldValue: row.oldValues && row.oldValues[columnIndex]\r\n                }, options))\r\n            }\r\n            if (columns[i].colspan > 1) {\r\n                columnIndex += columns[i].colspan\r\n            } else {\r\n                columnIndex++\r\n            }\r\n        }\r\n    },\r\n    _updateCells: function($rowElement, $newRowElement, columnIndices) {\r\n        var $cells = $rowElement.children();\r\n        var $newCells = $newRowElement.children();\r\n        var highlightChanges = this.option(\"highlightChanges\");\r\n        var cellUpdatedClass = this.addWidgetPrefix(CELL_UPDATED_ANIMATION_CLASS);\r\n        columnIndices.forEach(function(columnIndex, index) {\r\n            var $cell = $cells.eq(columnIndex);\r\n            var $newCell = $newCells.eq(index);\r\n            $cell.replaceWith($newCell);\r\n            if (highlightChanges && !$newCell.hasClass(\"dx-command-expand\")) {\r\n                $newCell.addClass(cellUpdatedClass)\r\n            }\r\n        });\r\n        copyAttributes($rowElement.get(0), $newRowElement.get(0))\r\n    },\r\n    _setCellAriaAttributes: function($cell, cellOptions) {\r\n        if (\"freeSpace\" !== cellOptions.rowType) {\r\n            this.setAria(\"selected\", false, $cell);\r\n            this.setAria(\"role\", \"gridcell\", $cell);\r\n            var columnIndexOffset = this._columnsController.getColumnIndexOffset();\r\n            var ariaColIndex = cellOptions.columnIndex + columnIndexOffset + 1;\r\n            this.setAria(\"colindex\", ariaColIndex, $cell)\r\n        }\r\n    },\r\n    _renderCell: function($row, options) {\r\n        var cellOptions = this._getCellOptions(options);\r\n        if (options.columnIndices) {\r\n            if (options.row.cells) {\r\n                options.row.cells[cellOptions.columnIndex] = cellOptions\r\n            }\r\n        } else {\r\n            options.row.cells.push(cellOptions)\r\n        }\r\n        var $cell = this._createCell(cellOptions);\r\n        this._setCellAriaAttributes($cell, cellOptions);\r\n        this._renderCellContent($cell, cellOptions);\r\n        $row.get(0).appendChild($cell.get(0));\r\n        return $cell\r\n    },\r\n    _renderCellContent: function($cell, options) {\r\n        var _this = this;\r\n        var template = this._getCellTemplate(options);\r\n        (0, _deferred.when)(!template || this.renderTemplate($cell, template, options)).done(function() {\r\n            _this._updateCell($cell, options)\r\n        })\r\n    },\r\n    _getCellTemplate: function() {},\r\n    _getRows: function() {\r\n        return []\r\n    },\r\n    _getCellOptions: function(options) {\r\n        var cellOptions = {\r\n            column: options.column,\r\n            columnIndex: options.columnIndex,\r\n            rowType: options.row.rowType,\r\n            isAltRow: this._isAltRow(options.row)\r\n        };\r\n        this._addWatchMethod(cellOptions);\r\n        return cellOptions\r\n    },\r\n    _addWatchMethod: function(options, source) {\r\n        if (!this.option(\"repaintChangesOnly\")) {\r\n            return\r\n        }\r\n        var watchers = [];\r\n        source = source || options;\r\n        source.watch = source.watch || function(getter, updateFunc) {\r\n            var oldValue = getter(source.data);\r\n            var watcher = function(row) {\r\n                var newValue = getter(source.data);\r\n                if (JSON.stringify(oldValue) !== JSON.stringify(newValue)) {\r\n                    if (row) {\r\n                        updateFunc(newValue, oldValue)\r\n                    }\r\n                    oldValue = newValue\r\n                }\r\n            };\r\n            watchers.push(watcher);\r\n            var stopWatch = function() {\r\n                var index = watchers.indexOf(watcher);\r\n                if (index >= 0) {\r\n                    watchers.splice(index, 1)\r\n                }\r\n            };\r\n            return stopWatch\r\n        };\r\n        source.update = source.update || function(row) {\r\n            if (row) {\r\n                this.data = options.data = row.data;\r\n                this.rowIndex = options.rowIndex = row.rowIndex;\r\n                this.dataIndex = options.dataIndex = row.dataIndex;\r\n                this.isExpanded = options.isExpanded = row.isExpanded;\r\n                if (options.row) {\r\n                    options.row = row\r\n                }\r\n            }\r\n            watchers.forEach(function(watcher) {\r\n                watcher(row)\r\n            })\r\n        };\r\n        if (source !== options) {\r\n            options.watch = source.watch.bind(source)\r\n        }\r\n        return options\r\n    },\r\n    _cellPrepared: function(cell, options) {\r\n        options.cellElement = (0, _element.getPublicElement)((0, _renderer.default)(cell));\r\n        this.executeAction(\"onCellPrepared\", options)\r\n    },\r\n    _rowPrepared: function($row, options) {\r\n        (0, _element_data.data)($row.get(0), \"options\", options);\r\n        options.rowElement = (0, _element.getPublicElement)($row);\r\n        this.executeAction(\"onRowPrepared\", options)\r\n    },\r\n    _columnOptionChanged: function(e) {\r\n        var optionNames = e.optionNames;\r\n        if (_uiGrid_core2.default.checkChanges(optionNames, [\"width\", \"visibleWidth\"])) {\r\n            var visibleColumns = this._columnsController.getVisibleColumns();\r\n            var widths = iteratorUtils.map(visibleColumns, function(column) {\r\n                var width = column.visibleWidth || column.width;\r\n                return (0, _type.isDefined)(width) ? width : \"auto\"\r\n            });\r\n            this.setColumnWidths({\r\n                widths: widths,\r\n                optionNames: optionNames\r\n            });\r\n            return\r\n        }\r\n        if (!this._requireReady) {\r\n            this.render()\r\n        }\r\n    },\r\n    getCellIndex: function($cell) {\r\n        var cellIndex = $cell.length ? $cell[0].cellIndex : -1;\r\n        return cellIndex\r\n    },\r\n    getTableElements: function() {\r\n        return this._tableElement || (0, _renderer.default)()\r\n    },\r\n    getTableElement: function() {\r\n        return this._tableElement\r\n    },\r\n    setTableElement: function(tableElement) {\r\n        this._tableElement = tableElement\r\n    },\r\n    optionChanged: function(args) {\r\n        this.callBase(args);\r\n        switch (args.name) {\r\n            case \"cellHintEnabled\":\r\n            case \"onCellPrepared\":\r\n            case \"onRowPrepared\":\r\n            case \"onCellHoverChanged\":\r\n                this._invalidate(true, true);\r\n                args.handled = true\r\n        }\r\n    },\r\n    init: function() {\r\n        var that = this;\r\n        that._scrollLeft = -1;\r\n        that._columnsController = that.getController(\"columns\");\r\n        that._dataController = that.getController(\"data\");\r\n        that._delayedTemplates = [];\r\n        that._templatesCache = {};\r\n        that.createAction(\"onCellClick\");\r\n        that.createAction(\"onRowClick\");\r\n        that.createAction(\"onCellDblClick\");\r\n        that.createAction(\"onRowDblClick\");\r\n        that.createAction(\"onCellHoverChanged\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"]\r\n        });\r\n        that.createAction(\"onCellPrepared\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\"\r\n        });\r\n        that.createAction(\"onRowPrepared\", {\r\n            excludeValidators: [\"disabled\", \"readOnly\"],\r\n            category: \"rendering\",\r\n            afterExecute: function(e) {\r\n                that._afterRowPrepared(e)\r\n            }\r\n        });\r\n        that._columnsController.columnsChanged.add(that._columnOptionChanged.bind(that));\r\n        that._dataController && that._dataController.changed.add(that._handleDataChanged.bind(that))\r\n    },\r\n    _afterRowPrepared: _common.noop,\r\n    _handleDataChanged: function() {},\r\n    callbackNames: function() {\r\n        return [\"scrollChanged\"]\r\n    },\r\n    scrollTo: function(pos) {\r\n        var $element = this.element();\r\n        var $scrollContainer = $element && $element.children(\".\" + this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).not(\".\" + this.addWidgetPrefix(CONTENT_FIXED_CLASS));\r\n        if ((0, _type.isDefined)(pos) && (0, _type.isDefined)(pos.left) && this._scrollLeft !== pos.left) {\r\n            this._scrollLeft = pos.left;\r\n            $scrollContainer && $scrollContainer.scrollLeft(pos.left)\r\n        }\r\n    },\r\n    _wrapTableInScrollContainer: function($table) {\r\n        var _this2 = this;\r\n        var $scrollContainer = (0, _renderer.default)(\"<div>\");\r\n        _events_engine.default.on($scrollContainer, \"scroll\", function() {\r\n            var scrollLeft = $scrollContainer.scrollLeft();\r\n            if (scrollLeft !== _this2._scrollLeft) {\r\n                _this2.scrollChanged.fire({\r\n                    left: scrollLeft\r\n                }, _this2.name)\r\n            }\r\n        });\r\n        $scrollContainer.addClass(this.addWidgetPrefix(CONTENT_CLASS)).addClass(this.addWidgetPrefix(SCROLL_CONTAINER_CLASS)).append($table).appendTo(this.element());\r\n        this.setAria(\"role\", \"presentation\", $scrollContainer);\r\n        return $scrollContainer\r\n    },\r\n    _updateContent: function($newTableElement) {\r\n        this.setTableElement($newTableElement);\r\n        this._wrapTableInScrollContainer($newTableElement)\r\n    },\r\n    _findContentElement: _common.noop,\r\n    _getWidths: function($cellElements) {\r\n        var result = [];\r\n        var legacyRendering = this.option(\"legacyRendering\");\r\n        var width;\r\n        if ($cellElements) {\r\n            iteratorUtils.each($cellElements, function(index, item) {\r\n                width = item.offsetWidth;\r\n                if (item.getBoundingClientRect) {\r\n                    var clientRect = (0, _position.getBoundingRect)(item);\r\n                    if (clientRect.width > width - 1) {\r\n                        width = legacyRendering ? Math.ceil(clientRect.width) : clientRect.width\r\n                    }\r\n                }\r\n                result.push(width)\r\n            })\r\n        }\r\n        return result\r\n    },\r\n    getColumnWidths: function($tableElement) {\r\n        var that = this;\r\n        var result = [];\r\n        var $rows;\r\n        var $cells;\r\n        (this.option(\"forceApplyBindings\") || _common.noop)();\r\n        $tableElement = $tableElement || that.getTableElement();\r\n        if ($tableElement) {\r\n            $rows = $tableElement.children(\"tbody:not(.dx-header)\").children();\r\n            for (var i = 0; i < $rows.length; i++) {\r\n                var $row = $rows.eq(i);\r\n                var isRowVisible = \"none\" !== $row.get(0).style.display && !$row.hasClass(\"dx-state-invisible\");\r\n                if (!$row.is(\".\" + GROUP_ROW_CLASS) && !$row.is(\".\" + DETAIL_ROW_CLASS) && isRowVisible) {\r\n                    $cells = $row.children(\"td\");\r\n                    break\r\n                }\r\n            }\r\n            result = that._getWidths($cells)\r\n        }\r\n        return result\r\n    },\r\n    getVisibleColumnIndex: function(columnIndex, rowIndex) {\r\n        return columnIndex\r\n    },\r\n    setColumnWidths: function(_ref) {\r\n        var widths = _ref.widths,\r\n            $tableElement = _ref.$tableElement,\r\n            columns = _ref.columns,\r\n            fixed = _ref.fixed;\r\n        var $cols;\r\n        var width;\r\n        var minWidth;\r\n        var columnIndex;\r\n        var columnAutoWidth = this.option(\"columnAutoWidth\");\r\n        var legacyRendering = this.option(\"legacyRendering\");\r\n        $tableElement = $tableElement || this.getTableElement();\r\n        if ($tableElement && $tableElement.length && widths) {\r\n            columnIndex = 0;\r\n            $cols = $tableElement.children(\"colgroup\").children(\"col\");\r\n            (0, _style.setWidth)($cols, \"auto\");\r\n            columns = columns || this.getColumns(null, $tableElement);\r\n            for (var i = 0; i < columns.length; i++) {\r\n                if (!legacyRendering && columnAutoWidth && !fixed) {\r\n                    width = columns[i].width;\r\n                    if (width && !columns[i].command) {\r\n                        width = columns[i].visibleWidth || width;\r\n                        width = getWidthStyle(width);\r\n                        minWidth = getWidthStyle(columns[i].minWidth || width);\r\n                        var $rows = $rows || $tableElement.children().children(\".dx-row\").not(\".\" + GROUP_ROW_CLASS).not(\".\" + DETAIL_ROW_CLASS);\r\n                        for (var rowIndex = 0; rowIndex < $rows.length; rowIndex++) {\r\n                            var visibleIndex = this.getVisibleColumnIndex(i, rowIndex);\r\n                            var cell = $rows[rowIndex].cells[visibleIndex];\r\n                            if (cell) {\r\n                                setCellWidth(cell, columns[i], width);\r\n                                cell.style.minWidth = minWidth\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                if (columns[i].colspan) {\r\n                    columnIndex += columns[i].colspan;\r\n                    continue\r\n                }\r\n                width = widths[columnIndex];\r\n                if (\"adaptiveHidden\" === width) {\r\n                    width = HIDDEN_COLUMNS_WIDTH\r\n                }\r\n                if (\"number\" === typeof width) {\r\n                    width = width.toFixed(3) + \"px\"\r\n                }(0, _style.setWidth)($cols.eq(columnIndex), (0, _type.isDefined)(width) ? width : \"auto\");\r\n                columnIndex++\r\n            }\r\n        }\r\n    },\r\n    getCellElements: function(rowIndex) {\r\n        return this._getCellElementsCore(rowIndex)\r\n    },\r\n    _getCellElementsCore: function(rowIndex) {\r\n        var $row = this._getRowElements().eq(rowIndex);\r\n        return $row.children()\r\n    },\r\n    _getCellElement: function(rowIndex, columnIdentifier) {\r\n        var that = this;\r\n        var $cell;\r\n        var $cells = that.getCellElements(rowIndex);\r\n        var columnVisibleIndex = that._getVisibleColumnIndex($cells, rowIndex, columnIdentifier);\r\n        if ($cells.length && columnVisibleIndex >= 0) {\r\n            $cell = $cells.eq(columnVisibleIndex)\r\n        }\r\n        if ($cell && $cell.length) {\r\n            return $cell\r\n        }\r\n    },\r\n    _getRowElement: function(rowIndex) {\r\n        var that = this;\r\n        var $rowElement = (0, _renderer.default)();\r\n        var $tableElements = that.getTableElements();\r\n        iteratorUtils.each($tableElements, function(_, tableElement) {\r\n            $rowElement = $rowElement.add(that._getRowElements((0, _renderer.default)(tableElement)).eq(rowIndex))\r\n        });\r\n        if ($rowElement.length) {\r\n            return $rowElement\r\n        }\r\n    },\r\n    getCellElement: function(rowIndex, columnIdentifier) {\r\n        return (0, _element.getPublicElement)(this._getCellElement(rowIndex, columnIdentifier))\r\n    },\r\n    getRowElement: function(rowIndex) {\r\n        var $rows = this._getRowElement(rowIndex);\r\n        var elements = [];\r\n        if ($rows && !(0, _element.getPublicElement)($rows).get) {\r\n            for (var i = 0; i < $rows.length; i++) {\r\n                elements.push($rows[i])\r\n            }\r\n        } else {\r\n            elements = $rows\r\n        }\r\n        return elements\r\n    },\r\n    _getVisibleColumnIndex: function($cells, rowIndex, columnIdentifier) {\r\n        if ((0, _type.isString)(columnIdentifier)) {\r\n            var columnIndex = this._columnsController.columnOption(columnIdentifier, \"index\");\r\n            return this._columnsController.getVisibleIndex(columnIndex)\r\n        }\r\n        return columnIdentifier\r\n    },\r\n    getColumnElements: function() {},\r\n    getColumns: function(rowIndex) {\r\n        return this._columnsController.getVisibleColumns(rowIndex)\r\n    },\r\n    getCell: function(cellPosition, rows) {\r\n        var $rows = rows || this._getRowElements();\r\n        var $cells;\r\n        if ($rows.length > 0 && cellPosition.rowIndex >= 0) {\r\n            if (\"virtual\" !== this.option(\"scrolling.mode\")) {\r\n                cellPosition.rowIndex = cellPosition.rowIndex < $rows.length ? cellPosition.rowIndex : $rows.length - 1\r\n            }\r\n            $cells = this.getCellElements(cellPosition.rowIndex);\r\n            if ($cells && $cells.length > 0) {\r\n                return $cells.eq($cells.length > cellPosition.columnIndex ? cellPosition.columnIndex : $cells.length - 1)\r\n            }\r\n        }\r\n    },\r\n    getRowsCount: function() {\r\n        var tableElement = this.getTableElement();\r\n        if (tableElement && 1 === tableElement.length) {\r\n            return tableElement[0].rows.length\r\n        }\r\n        return 0\r\n    },\r\n    _getRowElementsCore: function(tableElement) {\r\n        tableElement = tableElement || this.getTableElement();\r\n        if (tableElement) {\r\n            var tBodies = this.option(\"rowTemplate\") && tableElement.find(\"> tbody.\" + ROW_CLASS);\r\n            return tBodies && tBodies.length ? tBodies : tableElement.find(\"> tbody > .\" + ROW_CLASS + \", > .\" + ROW_CLASS)\r\n        }\r\n        return (0, _renderer.default)()\r\n    },\r\n    _getRowElements: function(tableElement) {\r\n        return this._getRowElementsCore(tableElement)\r\n    },\r\n    getRowIndex: function($row) {\r\n        return this._getRowElements().index($row)\r\n    },\r\n    getBoundingRect: function() {},\r\n    getName: function() {},\r\n    setScrollerSpacing: function(width) {\r\n        var that = this;\r\n        var $element = that.element();\r\n        var rtlEnabled = that.option(\"rtlEnabled\");\r\n        $element && $element.css({\r\n            paddingLeft: rtlEnabled ? width : \"\",\r\n            paddingRight: !rtlEnabled ? width : \"\"\r\n        })\r\n    },\r\n    isScrollbarVisible: function(isHorizontal) {\r\n        var $element = this.element();\r\n        var $tableElement = this._tableElement;\r\n        if ($element && $tableElement) {\r\n            return isHorizontal ? $tableElement.outerWidth() - $element.width() > 0 : $tableElement.outerHeight() - $element.height() > 0\r\n        }\r\n        return false\r\n    }\r\n});\r\nexports.ColumnsView = ColumnsView;\r\n"]},"metadata":{},"sourceType":"script"}