{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.utils.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nvar _filtering = _interopRequireDefault(require(\"../shared/filtering\"));\n\nvar _string = require(\"../../core/utils/string\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _position = require(\"../../core/utils/position\");\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _load_panel = _interopRequireDefault(require(\"../load_panel\"));\n\nvar _utils = _interopRequireDefault(require(\"../../data/utils\"));\n\nvar _format_helper = _interopRequireDefault(require(\"../../format_helper\"));\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\nvar DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\nvar DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\nvar DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\nvar NO_DATA_CLASS = \"nodata\";\nvar DATE_INTERVAL_SELECTORS = {\n  year: function (value) {\n    return value && value.getFullYear();\n  },\n  month: function (value) {\n    return value && value.getMonth() + 1;\n  },\n  day: function (value) {\n    return value && value.getDate();\n  },\n  quarter: function (value) {\n    return value && Math.floor(value.getMonth() / 3) + 1;\n  },\n  hour: function (value) {\n    return value && value.getHours();\n  },\n  minute: function (value) {\n    return value && value.getMinutes();\n  },\n  second: function (value) {\n    return value && value.getSeconds();\n  }\n};\n\nvar getIntervalSelector = function () {\n  var data = arguments[1];\n  var value = this.calculateCellValue(data);\n\n  if (!(0, _type.isDefined)(value)) {\n    return null;\n  } else {\n    if (isDateType(this.dataType)) {\n      var nameIntervalSelector = arguments[0];\n      return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value);\n    } else {\n      if (\"number\" === this.dataType) {\n        var groupInterval = arguments[0];\n        return Math.floor(Number(value) / groupInterval) * groupInterval;\n      }\n    }\n  }\n};\n\nvar equalSelectors = function (selector1, selector2) {\n  if ((0, _type.isFunction)(selector1) && (0, _type.isFunction)(selector2)) {\n    if (selector1.originalCallback && selector2.originalCallback) {\n      return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex;\n    }\n  }\n\n  return selector1 === selector2;\n};\n\nfunction isDateType(dataType) {\n  return \"date\" === dataType || \"datetime\" === dataType;\n}\n\nvar setEmptyText = function ($container) {\n  $container.get(0).textContent = \"\\xa0\";\n};\n\nvar normalizeSortingInfo = function (sort) {\n  sort = sort || [];\n\n  var result = _utils.default.normalizeSortingInfo(sort);\n\n  for (var i = 0; i < sort.length; i++) {\n    if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\n      result[i].isExpanded = sort[i].isExpanded;\n    }\n\n    if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\n      result[i].groupInterval = sort[i].groupInterval;\n    }\n  }\n\n  return result;\n};\n\nvar formatValue = function (value, options) {\n  var valueText = _format_helper.default.format(value, options.format) || value && value.toString() || \"\";\n  var formatObject = {\n    value: value,\n    valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\n    target: options.target || \"row\",\n    groupInterval: options.groupInterval\n  };\n  return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText;\n};\n\nvar getSummaryText = function (summaryItem, summaryTexts) {\n  var displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[summaryItem.summaryType + \"OtherColumn\"] || summaryTexts[summaryItem.summaryType];\n  return formatValue(summaryItem.value, {\n    format: summaryItem.valueFormat,\n    getDisplayFormat: function (valueText) {\n      return displayFormat ? (0, _string.format)(displayFormat, valueText, summaryItem.columnCaption) : valueText;\n    },\n    customizeText: summaryItem.customizeText\n  });\n};\n\nvar getWidgetInstance = function ($element) {\n  var editorData = $element.data && $element.data();\n  var dxComponents = editorData && editorData.dxComponents;\n  var widgetName = dxComponents && dxComponents[0];\n  return widgetName && editorData[widgetName];\n};\n\nvar equalFilterParameters = function equalFilterParameters(filter1, filter2) {\n  if (Array.isArray(filter1) && Array.isArray(filter2)) {\n    if (filter1.length !== filter2.length) {\n      return false;\n    } else {\n      for (var i = 0; i < filter1.length; i++) {\n        if (!equalFilterParameters(filter1[i], filter2[i])) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  } else {\n    if ((0, _type.isFunction)(filter1) && filter1.columnIndex >= 0 && (0, _type.isFunction)(filter2) && filter2.columnIndex >= 0) {\n      return filter1.columnIndex === filter2.columnIndex && (0, _data.toComparable)(filter1.filterValue) === (0, _data.toComparable)(filter2.filterValue);\n    } else {\n      return (0, _data.toComparable)(filter1) == (0, _data.toComparable)(filter2);\n    }\n  }\n};\n\nvar _default = {\n  renderNoDataText: function ($element) {\n    var that = this;\n    $element = $element || this.element();\n\n    if (!$element) {\n      return;\n    }\n\n    var noDataClass = that.addWidgetPrefix(NO_DATA_CLASS);\n    var noDataElement = $element.find(\".\" + noDataClass).last();\n\n    var isVisible = this._dataController.isEmpty();\n\n    var isLoading = this._dataController.isLoading();\n\n    if (!noDataElement.length) {\n      noDataElement = (0, _renderer.default)(\"<span>\").addClass(noDataClass).appendTo($element);\n    }\n\n    if (isVisible && !isLoading) {\n      noDataElement.removeClass(\"dx-hidden\").text(that._getNoDataText());\n    } else {\n      noDataElement.addClass(\"dx-hidden\");\n    }\n  },\n  renderLoadPanel: function ($element, $container, isLocalStore) {\n    var that = this;\n    var loadPanelOptions;\n    that._loadPanel && that._loadPanel.$element().remove();\n    loadPanelOptions = that.option(\"loadPanel\");\n\n    if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\n      loadPanelOptions = (0, _extend.extend)({\n        shading: false,\n        message: loadPanelOptions.text,\n        position: function () {\n          var $window = (0, _renderer.default)((0, _window.getWindow)());\n\n          if ($element.height() > $window.height()) {\n            return {\n              of: $window,\n              boundary: $element,\n              collision: \"fit\"\n            };\n          }\n\n          return {\n            of: $element\n          };\n        },\n        container: $container\n      }, loadPanelOptions);\n      that._loadPanel = that._createComponent((0, _renderer.default)(\"<div>\").appendTo($container), _load_panel.default, loadPanelOptions);\n    } else {\n      that._loadPanel = null;\n    }\n  },\n  getIndexByKey: function (key, items, keyName) {\n    var index = -1;\n\n    if (void 0 !== key && Array.isArray(items)) {\n      keyName = arguments.length <= 2 ? \"key\" : keyName;\n\n      for (var i = 0; i < items.length; i++) {\n        var item = (0, _type.isDefined)(keyName) ? items[i][keyName] : items[i];\n\n        if ((0, _common.equalByValue)(key, item)) {\n          index = i;\n          break;\n        }\n      }\n    }\n\n    return index;\n  },\n  combineFilters: function (filters, operation) {\n    var resultFilter = [];\n    operation = operation || \"and\";\n\n    for (var i = 0; i < filters.length; i++) {\n      if (!filters[i]) {\n        continue;\n      }\n\n      if (resultFilter.length) {\n        resultFilter.push(operation);\n      }\n\n      resultFilter.push(filters[i]);\n    }\n\n    if (1 === resultFilter.length) {\n      resultFilter = resultFilter[0];\n    }\n\n    if (resultFilter.length) {\n      return resultFilter;\n    }\n  },\n  checkChanges: function (changes, changeNames) {\n    var changesWithChangeNamesCount = 0;\n\n    for (var i = 0; i < changeNames.length; i++) {\n      if (changes[changeNames[i]]) {\n        changesWithChangeNamesCount++;\n      }\n    }\n\n    return changes.length && changes.length === changesWithChangeNamesCount;\n  },\n  equalFilterParameters: equalFilterParameters,\n  proxyMethod: function (instance, methodName, defaultResult) {\n    if (!instance[methodName]) {\n      instance[methodName] = function () {\n        var dataSource = this._dataSource;\n        return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult;\n      };\n    }\n  },\n  formatValue: formatValue,\n  getFormatOptionsByColumn: function (column, target) {\n    return {\n      format: column.format,\n      getDisplayFormat: column.getDisplayFormat,\n      customizeText: column.customizeText,\n      target: target,\n      trueText: column.trueText,\n      falseText: column.falseText\n    };\n  },\n  getDisplayValue: function (column, value, data, rowType) {\n    if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\n      return column.displayValueMap[value];\n    } else {\n      if (column.calculateDisplayValue && data && \"group\" !== rowType) {\n        return column.calculateDisplayValue(data);\n      } else {\n        if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\n          return column.lookup.calculateCellValue(value);\n        }\n      }\n    }\n\n    return value;\n  },\n  getGroupRowSummaryText: function (summaryItems, summaryTexts) {\n    var result = \"(\";\n\n    for (var i = 0; i < summaryItems.length; i++) {\n      var summaryItem = summaryItems[i];\n      result += (i > 0 ? \", \" : \"\") + getSummaryText(summaryItem, summaryTexts);\n    }\n\n    return result += \")\";\n  },\n  getSummaryText: getSummaryText,\n  normalizeSortingInfo: normalizeSortingInfo,\n  getFormatByDataType: function (dataType) {\n    switch (dataType) {\n      case \"date\":\n        return \"shortDate\";\n\n      case \"datetime\":\n        return \"shortDateShortTime\";\n    }\n  },\n  getHeaderFilterGroupParameters: function (column, remoteGrouping) {\n    var result = [];\n    var dataField = column.dataField || column.name;\n\n    var groupInterval = _filtering.default.getGroupInterval(column);\n\n    if (groupInterval) {\n      (0, _iterator.each)(groupInterval, function (index, interval) {\n        result.push(remoteGrouping ? {\n          selector: dataField,\n          groupInterval: interval,\n          isExpanded: index < groupInterval.length - 1\n        } : getIntervalSelector.bind(column, interval));\n      });\n      return result;\n    }\n\n    if (remoteGrouping) {\n      result = [{\n        selector: dataField,\n        isExpanded: false\n      }];\n    } else {\n      result = function result(data) {\n        var result = column.calculateCellValue(data);\n\n        if (void 0 === result || \"\" === result) {\n          result = null;\n        }\n\n        return result;\n      };\n\n      if (column.sortingMethod) {\n        result = [{\n          selector: result,\n          compare: column.sortingMethod.bind(column)\n        }];\n      }\n    }\n\n    return result;\n  },\n  equalSortParameters: function (sortParameters1, sortParameters2, ignoreIsExpanded) {\n    sortParameters1 = normalizeSortingInfo(sortParameters1);\n    sortParameters2 = normalizeSortingInfo(sortParameters2);\n\n    if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\n      if (sortParameters1.length !== sortParameters2.length) {\n        return false;\n      } else {\n        for (var i = 0; i < sortParameters1.length; i++) {\n          if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\n            return false;\n          }\n        }\n      }\n\n      return true;\n    } else {\n      return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length);\n    }\n  },\n  getPointsByColumns: function (items, pointCreated, isVertical, startColumnIndex) {\n    var cellsLength = items.length;\n    var notCreatePoint = false;\n    var item;\n    var offset;\n    var columnIndex = startColumnIndex || 0;\n    var result = [];\n    var rtlEnabled;\n\n    for (var i = 0; i <= cellsLength; i++) {\n      if (i < cellsLength) {\n        item = items.eq(i);\n        offset = item.offset();\n        rtlEnabled = \"rtl\" === item.css(\"direction\");\n      }\n\n      var point = {\n        index: columnIndex,\n        x: offset ? offset.left + (!isVertical && rtlEnabled ^ i === cellsLength ? (0, _position.getBoundingRect)(item[0]).width : 0) : 0,\n        y: offset ? offset.top + (isVertical && i === cellsLength ? (0, _position.getBoundingRect)(item[0]).height : 0) : 0,\n        columnIndex: columnIndex\n      };\n\n      if (!isVertical && i > 0) {\n        var prevItemOffset = items.eq(i - 1).offset();\n\n        if (prevItemOffset.top < point.y) {\n          point.y = prevItemOffset.top;\n        }\n      }\n\n      if (pointCreated) {\n        notCreatePoint = pointCreated(point);\n      }\n\n      if (!notCreatePoint) {\n        result.push(point);\n      }\n\n      columnIndex++;\n    }\n\n    return result;\n  },\n  getExpandCellTemplate: function () {\n    return {\n      allowRenderToDetachedContainer: true,\n      render: function (container, options) {\n        var $container = (0, _renderer.default)(container);\n\n        if ((0, _type.isDefined)(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\n          var rowsView = options.component.getView(\"rowsView\");\n          $container.addClass(DATAGRID_EXPAND_CLASS).addClass(DATAGRID_SELECTION_DISABLED_CLASS);\n          (0, _renderer.default)(\"<div>\").addClass(options.value ? DATAGRID_GROUP_OPENED_CLASS : DATAGRID_GROUP_CLOSED_CLASS).appendTo($container);\n          rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container);\n        } else {\n          setEmptyText($container);\n        }\n      }\n    };\n  },\n  setEmptyText: setEmptyText,\n  isDateType: isDateType,\n  getSelectionRange: function (focusedElement) {\n    try {\n      if (focusedElement) {\n        return {\n          selectionStart: focusedElement.selectionStart,\n          selectionEnd: focusedElement.selectionEnd\n        };\n      }\n    } catch (e) {}\n\n    return {};\n  },\n  setSelectionRange: function (focusedElement, selectionRange) {\n    try {\n      if (focusedElement && focusedElement.setSelectionRange) {\n        focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd);\n      }\n    } catch (e) {}\n  },\n  focusAndSelectElement: function (component, $element) {\n    _events_engine.default.trigger($element, \"focus\");\n\n    var isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\n    var keyboardController = component.getController(\"keyboardNavigation\");\n\n    var isEditingNavigationMode = keyboardController && keyboardController._isFastEditingStarted();\n\n    var element = $element.get(0);\n\n    if (isSelectTextOnEditingStart && !isEditingNavigationMode && $element.is(\".dx-texteditor-input\") && !$element.is(\"[readonly]\")) {\n      var editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\n      (0, _deferred.when)(editor && editor._loadItemDeferred).done(function () {\n        element.select();\n      });\n    }\n  },\n  getWidgetInstance: getWidgetInstance,\n  getLastResizableColumnIndex: function (columns, resultWidths) {\n    var hasResizableColumns = columns.some(function (column) {\n      return column && !column.command && !column.fixed && false !== column.allowResizing;\n    });\n    var lastColumnIndex;\n\n    for (lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\n      var column = columns[lastColumnIndex];\n      var width = resultWidths && resultWidths[lastColumnIndex];\n      var allowResizing = !hasResizableColumns || false !== column.allowResizing;\n\n      if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\n        break;\n      }\n    }\n\n    return lastColumnIndex;\n  },\n  isElementInCurrentGrid: function (controller, $element) {\n    if ($element && $element.length) {\n      var $grid = $element.closest(\".\" + controller.getWidgetContainerClass()).parent();\n      return $grid.is(controller.component.$element());\n    }\n\n    return false;\n  }\n};\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/grid_core/ui.grid_core.utils.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_type","_deferred","_filtering","_string","_iterator","_extend","_position","_data","_common","_load_panel","_utils","_format_helper","_window","_events_engine","obj","__esModule","DATAGRID_SELECTION_DISABLED_CLASS","DATAGRID_GROUP_OPENED_CLASS","DATAGRID_GROUP_CLOSED_CLASS","DATAGRID_EXPAND_CLASS","NO_DATA_CLASS","DATE_INTERVAL_SELECTORS","year","value","getFullYear","month","getMonth","day","getDate","quarter","Math","floor","hour","getHours","minute","getMinutes","second","getSeconds","getIntervalSelector","data","arguments","calculateCellValue","isDefined","isDateType","dataType","nameIntervalSelector","groupInterval","Number","equalSelectors","selector1","selector2","isFunction","originalCallback","columnIndex","setEmptyText","$container","get","textContent","normalizeSortingInfo","sort","result","i","length","isExpanded","formatValue","options","valueText","format","toString","formatObject","getDisplayFormat","target","customizeText","call","getSummaryText","summaryItem","summaryTexts","displayFormat","columnCaption","summaryType","valueFormat","getWidgetInstance","$element","editorData","dxComponents","widgetName","equalFilterParameters","filter1","filter2","Array","isArray","toComparable","filterValue","_default","renderNoDataText","that","element","noDataClass","addWidgetPrefix","noDataElement","find","last","isVisible","_dataController","isEmpty","isLoading","addClass","appendTo","removeClass","text","_getNoDataText","renderLoadPanel","isLocalStore","loadPanelOptions","_loadPanel","remove","option","enabled","extend","shading","message","position","$window","getWindow","height","of","boundary","collision","container","_createComponent","getIndexByKey","key","items","keyName","index","item","equalByValue","combineFilters","filters","operation","resultFilter","push","checkChanges","changes","changeNames","changesWithChangeNamesCount","proxyMethod","instance","methodName","defaultResult","dataSource","_dataSource","apply","getFormatOptionsByColumn","column","trueText","falseText","getDisplayValue","rowType","displayValueMap","calculateDisplayValue","lookup","calculateGroupValue","getGroupRowSummaryText","summaryItems","getFormatByDataType","getHeaderFilterGroupParameters","remoteGrouping","dataField","name","getGroupInterval","each","interval","selector","bind","sortingMethod","compare","equalSortParameters","sortParameters1","sortParameters2","ignoreIsExpanded","desc","Boolean","getPointsByColumns","pointCreated","isVertical","startColumnIndex","cellsLength","notCreatePoint","offset","rtlEnabled","eq","css","point","x","left","getBoundingRect","width","y","top","prevItemOffset","getExpandCellTemplate","allowRenderToDetachedContainer","render","isContinuation","row","isNewRow","rowsView","component","getView","setAria","localize","getSelectionRange","focusedElement","selectionStart","selectionEnd","e","setSelectionRange","selectionRange","focusAndSelectElement","trigger","isSelectTextOnEditingStart","keyboardController","getController","isEditingNavigationMode","_isFastEditingStarted","is","editor","closest","when","_loadItemDeferred","done","select","getLastResizableColumnIndex","columns","resultWidths","hasResizableColumns","some","command","fixed","allowResizing","lastColumnIndex","isElementInCurrentGrid","controller","$grid","getWidgetContainerClass","parent","module"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACAA,OAAO,CAACC,OAAR,GAAkB,KAAK,CAAvB;;AACA,IAAIC,SAAS,GAAGC,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAAtC;;AACA,IAAIC,KAAK,GAAGD,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIE,SAAS,GAAGF,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIG,UAAU,GAAGJ,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAAvC;;AACA,IAAII,OAAO,GAAGJ,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIK,SAAS,GAAGL,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIM,OAAO,GAAGN,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIO,SAAS,GAAGP,OAAO,CAAC,2BAAD,CAAvB;;AACA,IAAIQ,KAAK,GAAGR,OAAO,CAAC,uBAAD,CAAnB;;AACA,IAAIS,OAAO,GAAGT,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIU,WAAW,GAAGX,sBAAsB,CAACC,OAAO,CAAC,eAAD,CAAR,CAAxC;;AACA,IAAIW,MAAM,GAAGZ,sBAAsB,CAACC,OAAO,CAAC,kBAAD,CAAR,CAAnC;;AACA,IAAIY,cAAc,GAAGb,sBAAsB,CAACC,OAAO,CAAC,qBAAD,CAAR,CAA3C;;AACA,IAAIa,OAAO,GAAGb,OAAO,CAAC,yBAAD,CAArB;;AACA,IAAIc,cAAc,GAAGf,sBAAsB,CAACC,OAAO,CAAC,iCAAD,CAAR,CAA3C;;AAEA,SAASD,sBAAT,CAAgCgB,GAAhC,EAAqC;AACjC,SAAOA,GAAG,IAAIA,GAAG,CAACC,UAAX,GAAwBD,GAAxB,GAA8B;AACjC,eAAWA;AADsB,GAArC;AAGH;;AACD,IAAIE,iCAAiC,GAAG,uBAAxC;AACA,IAAIC,2BAA2B,GAAG,0BAAlC;AACA,IAAIC,2BAA2B,GAAG,0BAAlC;AACA,IAAIC,qBAAqB,GAAG,oBAA5B;AACA,IAAIC,aAAa,GAAG,QAApB;AACA,IAAIC,uBAAuB,GAAG;AAC1BC,EAAAA,IAAI,EAAE,UAASC,KAAT,EAAgB;AAClB,WAAOA,KAAK,IAAIA,KAAK,CAACC,WAAN,EAAhB;AACH,GAHyB;AAI1BC,EAAAA,KAAK,EAAE,UAASF,KAAT,EAAgB;AACnB,WAAOA,KAAK,IAAIA,KAAK,CAACG,QAAN,KAAmB,CAAnC;AACH,GANyB;AAO1BC,EAAAA,GAAG,EAAE,UAASJ,KAAT,EAAgB;AACjB,WAAOA,KAAK,IAAIA,KAAK,CAACK,OAAN,EAAhB;AACH,GATyB;AAU1BC,EAAAA,OAAO,EAAE,UAASN,KAAT,EAAgB;AACrB,WAAOA,KAAK,IAAIO,IAAI,CAACC,KAAL,CAAWR,KAAK,CAACG,QAAN,KAAmB,CAA9B,IAAmC,CAAnD;AACH,GAZyB;AAa1BM,EAAAA,IAAI,EAAE,UAAST,KAAT,EAAgB;AAClB,WAAOA,KAAK,IAAIA,KAAK,CAACU,QAAN,EAAhB;AACH,GAfyB;AAgB1BC,EAAAA,MAAM,EAAE,UAASX,KAAT,EAAgB;AACpB,WAAOA,KAAK,IAAIA,KAAK,CAACY,UAAN,EAAhB;AACH,GAlByB;AAmB1BC,EAAAA,MAAM,EAAE,UAASb,KAAT,EAAgB;AACpB,WAAOA,KAAK,IAAIA,KAAK,CAACc,UAAN,EAAhB;AACH;AArByB,CAA9B;;AAuBA,IAAIC,mBAAmB,GAAG,YAAW;AACjC,MAAIC,IAAI,GAAGC,SAAS,CAAC,CAAD,CAApB;AACA,MAAIjB,KAAK,GAAG,KAAKkB,kBAAL,CAAwBF,IAAxB,CAAZ;;AACA,MAAI,CAAC,CAAC,GAAGvC,KAAK,CAAC0C,SAAV,EAAqBnB,KAArB,CAAL,EAAkC;AAC9B,WAAO,IAAP;AACH,GAFD,MAEO;AACH,QAAIoB,UAAU,CAAC,KAAKC,QAAN,CAAd,EAA+B;AAC3B,UAAIC,oBAAoB,GAAGL,SAAS,CAAC,CAAD,CAApC;AACA,aAAOnB,uBAAuB,CAACwB,oBAAD,CAAvB,CAA8CtB,KAA9C,CAAP;AACH,KAHD,MAGO;AACH,UAAI,aAAa,KAAKqB,QAAtB,EAAgC;AAC5B,YAAIE,aAAa,GAAGN,SAAS,CAAC,CAAD,CAA7B;AACA,eAAOV,IAAI,CAACC,KAAL,CAAWgB,MAAM,CAACxB,KAAD,CAAN,GAAgBuB,aAA3B,IAA4CA,aAAnD;AACH;AACJ;AACJ;AACJ,CAhBD;;AAiBA,IAAIE,cAAc,GAAG,UAASC,SAAT,EAAoBC,SAApB,EAA+B;AAChD,MAAI,CAAC,GAAGlD,KAAK,CAACmD,UAAV,EAAsBF,SAAtB,KAAoC,CAAC,GAAGjD,KAAK,CAACmD,UAAV,EAAsBD,SAAtB,CAAxC,EAA0E;AACtE,QAAID,SAAS,CAACG,gBAAV,IAA8BF,SAAS,CAACE,gBAA5C,EAA8D;AAC1D,aAAOH,SAAS,CAACG,gBAAV,KAA+BF,SAAS,CAACE,gBAAzC,IAA6DH,SAAS,CAACI,WAAV,KAA0BH,SAAS,CAACG,WAAxG;AACH;AACJ;;AACD,SAAOJ,SAAS,KAAKC,SAArB;AACH,CAPD;;AASA,SAASP,UAAT,CAAoBC,QAApB,EAA8B;AAC1B,SAAO,WAAWA,QAAX,IAAuB,eAAeA,QAA7C;AACH;;AACD,IAAIU,YAAY,GAAG,UAASC,UAAT,EAAqB;AACpCA,EAAAA,UAAU,CAACC,GAAX,CAAe,CAAf,EAAkBC,WAAlB,GAAgC,MAAhC;AACH,CAFD;;AAGA,IAAIC,oBAAoB,GAAG,UAASC,IAAT,EAAe;AACtCA,EAAAA,IAAI,GAAGA,IAAI,IAAI,EAAf;;AACA,MAAIC,MAAM,GAAGlD,MAAM,CAACd,OAAP,CAAe8D,oBAAf,CAAoCC,IAApC,CAAb;;AACA,OAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,IAAI,CAACG,MAAzB,EAAiCD,CAAC,EAAlC,EAAsC;AAClC,QAAIF,IAAI,IAAIA,IAAI,CAACE,CAAD,CAAZ,IAAmB,KAAK,CAAL,KAAWF,IAAI,CAACE,CAAD,CAAJ,CAAQE,UAA1C,EAAsD;AAClDH,MAAAA,MAAM,CAACC,CAAD,CAAN,CAAUE,UAAV,GAAuBJ,IAAI,CAACE,CAAD,CAAJ,CAAQE,UAA/B;AACH;;AACD,QAAIJ,IAAI,IAAIA,IAAI,CAACE,CAAD,CAAZ,IAAmB,KAAK,CAAL,KAAWF,IAAI,CAACE,CAAD,CAAJ,CAAQf,aAA1C,EAAyD;AACrDc,MAAAA,MAAM,CAACC,CAAD,CAAN,CAAUf,aAAV,GAA0Ba,IAAI,CAACE,CAAD,CAAJ,CAAQf,aAAlC;AACH;AACJ;;AACD,SAAOc,MAAP;AACH,CAZD;;AAaA,IAAII,WAAW,GAAG,UAASzC,KAAT,EAAgB0C,OAAhB,EAAyB;AACvC,MAAIC,SAAS,GAAGvD,cAAc,CAACf,OAAf,CAAuBuE,MAAvB,CAA8B5C,KAA9B,EAAqC0C,OAAO,CAACE,MAA7C,KAAwD5C,KAAK,IAAIA,KAAK,CAAC6C,QAAN,EAAjE,IAAqF,EAArG;AACA,MAAIC,YAAY,GAAG;AACf9C,IAAAA,KAAK,EAAEA,KADQ;AAEf2C,IAAAA,SAAS,EAAED,OAAO,CAACK,gBAAR,GAA2BL,OAAO,CAACK,gBAAR,CAAyBJ,SAAzB,CAA3B,GAAiEA,SAF7D;AAGfK,IAAAA,MAAM,EAAEN,OAAO,CAACM,MAAR,IAAkB,KAHX;AAIfzB,IAAAA,aAAa,EAAEmB,OAAO,CAACnB;AAJR,GAAnB;AAMA,SAAOmB,OAAO,CAACO,aAAR,GAAwBP,OAAO,CAACO,aAAR,CAAsBC,IAAtB,CAA2BR,OAA3B,EAAoCI,YAApC,CAAxB,GAA4EA,YAAY,CAACH,SAAhG;AACH,CATD;;AAUA,IAAIQ,cAAc,GAAG,UAASC,WAAT,EAAsBC,YAAtB,EAAoC;AACrD,MAAIC,aAAa,GAAGF,WAAW,CAACE,aAAZ,IAA6BF,WAAW,CAACG,aAAZ,IAA6BF,YAAY,CAACD,WAAW,CAACI,WAAZ,GAA0B,aAA3B,CAAtE,IAAmHH,YAAY,CAACD,WAAW,CAACI,WAAb,CAAnJ;AACA,SAAOf,WAAW,CAACW,WAAW,CAACpD,KAAb,EAAoB;AAClC4C,IAAAA,MAAM,EAAEQ,WAAW,CAACK,WADc;AAElCV,IAAAA,gBAAgB,EAAE,UAASJ,SAAT,EAAoB;AAClC,aAAOW,aAAa,GAAG,CAAC,GAAG1E,OAAO,CAACgE,MAAZ,EAAoBU,aAApB,EAAmCX,SAAnC,EAA8CS,WAAW,CAACG,aAA1D,CAAH,GAA8EZ,SAAlG;AACH,KAJiC;AAKlCM,IAAAA,aAAa,EAAEG,WAAW,CAACH;AALO,GAApB,CAAlB;AAOH,CATD;;AAUA,IAAIS,iBAAiB,GAAG,UAASC,QAAT,EAAmB;AACvC,MAAIC,UAAU,GAAGD,QAAQ,CAAC3C,IAAT,IAAiB2C,QAAQ,CAAC3C,IAAT,EAAlC;AACA,MAAI6C,YAAY,GAAGD,UAAU,IAAIA,UAAU,CAACC,YAA5C;AACA,MAAIC,UAAU,GAAGD,YAAY,IAAIA,YAAY,CAAC,CAAD,CAA7C;AACA,SAAOC,UAAU,IAAIF,UAAU,CAACE,UAAD,CAA/B;AACH,CALD;;AAMA,IAAIC,qBAAqB,GAAG,SAASA,qBAAT,CAA+BC,OAA/B,EAAwCC,OAAxC,EAAiD;AACzE,MAAIC,KAAK,CAACC,OAAN,CAAcH,OAAd,KAA0BE,KAAK,CAACC,OAAN,CAAcF,OAAd,CAA9B,EAAsD;AAClD,QAAID,OAAO,CAACzB,MAAR,KAAmB0B,OAAO,CAAC1B,MAA/B,EAAuC;AACnC,aAAO,KAAP;AACH,KAFD,MAEO;AACH,WAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG0B,OAAO,CAACzB,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,YAAI,CAACyB,qBAAqB,CAACC,OAAO,CAAC1B,CAAD,CAAR,EAAa2B,OAAO,CAAC3B,CAAD,CAApB,CAA1B,EAAoD;AAChD,iBAAO,KAAP;AACH;AACJ;AACJ;;AACD,WAAO,IAAP;AACH,GAXD,MAWO;AACH,QAAI,CAAC,GAAG7D,KAAK,CAACmD,UAAV,EAAsBoC,OAAtB,KAAkCA,OAAO,CAAClC,WAAR,IAAuB,CAAzD,IAA8D,CAAC,GAAGrD,KAAK,CAACmD,UAAV,EAAsBqC,OAAtB,CAA9D,IAAgGA,OAAO,CAACnC,WAAR,IAAuB,CAA3H,EAA8H;AAC1H,aAAOkC,OAAO,CAAClC,WAAR,KAAwBmC,OAAO,CAACnC,WAAhC,IAA+C,CAAC,GAAG9C,KAAK,CAACoF,YAAV,EAAwBJ,OAAO,CAACK,WAAhC,MAAiD,CAAC,GAAGrF,KAAK,CAACoF,YAAV,EAAwBH,OAAO,CAACI,WAAhC,CAAvG;AACH,KAFD,MAEO;AACH,aAAO,CAAC,GAAGrF,KAAK,CAACoF,YAAV,EAAwBJ,OAAxB,KAAoC,CAAC,GAAGhF,KAAK,CAACoF,YAAV,EAAwBH,OAAxB,CAA3C;AACH;AACJ;AACJ,CAnBD;;AAoBA,IAAIK,QAAQ,GAAG;AACXC,EAAAA,gBAAgB,EAAE,UAASZ,QAAT,EAAmB;AACjC,QAAIa,IAAI,GAAG,IAAX;AACAb,IAAAA,QAAQ,GAAGA,QAAQ,IAAI,KAAKc,OAAL,EAAvB;;AACA,QAAI,CAACd,QAAL,EAAe;AACX;AACH;;AACD,QAAIe,WAAW,GAAGF,IAAI,CAACG,eAAL,CAAqB9E,aAArB,CAAlB;AACA,QAAI+E,aAAa,GAAGjB,QAAQ,CAACkB,IAAT,CAAc,MAAMH,WAApB,EAAiCI,IAAjC,EAApB;;AACA,QAAIC,SAAS,GAAG,KAAKC,eAAL,CAAqBC,OAArB,EAAhB;;AACA,QAAIC,SAAS,GAAG,KAAKF,eAAL,CAAqBE,SAArB,EAAhB;;AACA,QAAI,CAACN,aAAa,CAACrC,MAAnB,EAA2B;AACvBqC,MAAAA,aAAa,GAAG,CAAC,GAAGtG,SAAS,CAACD,OAAd,EAAuB,QAAvB,EAAiC8G,QAAjC,CAA0CT,WAA1C,EAAuDU,QAAvD,CAAgEzB,QAAhE,CAAhB;AACH;;AACD,QAAIoB,SAAS,IAAI,CAACG,SAAlB,EAA6B;AACzBN,MAAAA,aAAa,CAACS,WAAd,CAA0B,WAA1B,EAAuCC,IAAvC,CAA4Cd,IAAI,CAACe,cAAL,EAA5C;AACH,KAFD,MAEO;AACHX,MAAAA,aAAa,CAACO,QAAd,CAAuB,WAAvB;AACH;AACJ,GAnBU;AAoBXK,EAAAA,eAAe,EAAE,UAAS7B,QAAT,EAAmB3B,UAAnB,EAA+ByD,YAA/B,EAA6C;AAC1D,QAAIjB,IAAI,GAAG,IAAX;AACA,QAAIkB,gBAAJ;AACAlB,IAAAA,IAAI,CAACmB,UAAL,IAAmBnB,IAAI,CAACmB,UAAL,CAAgBhC,QAAhB,GAA2BiC,MAA3B,EAAnB;AACAF,IAAAA,gBAAgB,GAAGlB,IAAI,CAACqB,MAAL,CAAY,WAAZ,CAAnB;;AACA,QAAIH,gBAAgB,KAAK,WAAWA,gBAAgB,CAACI,OAA5B,GAAsC,CAACL,YAAvC,GAAsDC,gBAAgB,CAACI,OAA5E,CAApB,EAA0G;AACtGJ,MAAAA,gBAAgB,GAAG,CAAC,GAAG5G,OAAO,CAACiH,MAAZ,EAAoB;AACnCC,QAAAA,OAAO,EAAE,KAD0B;AAEnCC,QAAAA,OAAO,EAAEP,gBAAgB,CAACJ,IAFS;AAGnCY,QAAAA,QAAQ,EAAE,YAAW;AACjB,cAAIC,OAAO,GAAG,CAAC,GAAG7H,SAAS,CAACD,OAAd,EAAuB,CAAC,GAAGgB,OAAO,CAAC+G,SAAZ,GAAvB,CAAd;;AACA,cAAIzC,QAAQ,CAAC0C,MAAT,KAAoBF,OAAO,CAACE,MAAR,EAAxB,EAA0C;AACtC,mBAAO;AACHC,cAAAA,EAAE,EAAEH,OADD;AAEHI,cAAAA,QAAQ,EAAE5C,QAFP;AAGH6C,cAAAA,SAAS,EAAE;AAHR,aAAP;AAKH;;AACD,iBAAO;AACHF,YAAAA,EAAE,EAAE3C;AADD,WAAP;AAGH,SAfkC;AAgBnC8C,QAAAA,SAAS,EAAEzE;AAhBwB,OAApB,EAiBhB0D,gBAjBgB,CAAnB;AAkBAlB,MAAAA,IAAI,CAACmB,UAAL,GAAkBnB,IAAI,CAACkC,gBAAL,CAAsB,CAAC,GAAGpI,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC+G,QAAhC,CAAyCpD,UAAzC,CAAtB,EAA4E9C,WAAW,CAACb,OAAxF,EAAiGqH,gBAAjG,CAAlB;AACH,KApBD,MAoBO;AACHlB,MAAAA,IAAI,CAACmB,UAAL,GAAkB,IAAlB;AACH;AACJ,GAhDU;AAiDXgB,EAAAA,aAAa,EAAE,UAASC,GAAT,EAAcC,KAAd,EAAqBC,OAArB,EAA8B;AACzC,QAAIC,KAAK,GAAG,CAAC,CAAb;;AACA,QAAI,KAAK,CAAL,KAAWH,GAAX,IAAkB1C,KAAK,CAACC,OAAN,CAAc0C,KAAd,CAAtB,EAA4C;AACxCC,MAAAA,OAAO,GAAG7F,SAAS,CAACsB,MAAV,IAAoB,CAApB,GAAwB,KAAxB,GAAgCuE,OAA1C;;AACA,WAAK,IAAIxE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuE,KAAK,CAACtE,MAA1B,EAAkCD,CAAC,EAAnC,EAAuC;AACnC,YAAI0E,IAAI,GAAG,CAAC,GAAGvI,KAAK,CAAC0C,SAAV,EAAqB2F,OAArB,IAAgCD,KAAK,CAACvE,CAAD,CAAL,CAASwE,OAAT,CAAhC,GAAoDD,KAAK,CAACvE,CAAD,CAApE;;AACA,YAAI,CAAC,GAAGrD,OAAO,CAACgI,YAAZ,EAA0BL,GAA1B,EAA+BI,IAA/B,CAAJ,EAA0C;AACtCD,UAAAA,KAAK,GAAGzE,CAAR;AACA;AACH;AACJ;AACJ;;AACD,WAAOyE,KAAP;AACH,GA9DU;AA+DXG,EAAAA,cAAc,EAAE,UAASC,OAAT,EAAkBC,SAAlB,EAA6B;AACzC,QAAIC,YAAY,GAAG,EAAnB;AACAD,IAAAA,SAAS,GAAGA,SAAS,IAAI,KAAzB;;AACA,SAAK,IAAI9E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG6E,OAAO,CAAC5E,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;AACrC,UAAI,CAAC6E,OAAO,CAAC7E,CAAD,CAAZ,EAAiB;AACb;AACH;;AACD,UAAI+E,YAAY,CAAC9E,MAAjB,EAAyB;AACrB8E,QAAAA,YAAY,CAACC,IAAb,CAAkBF,SAAlB;AACH;;AACDC,MAAAA,YAAY,CAACC,IAAb,CAAkBH,OAAO,CAAC7E,CAAD,CAAzB;AACH;;AACD,QAAI,MAAM+E,YAAY,CAAC9E,MAAvB,EAA+B;AAC3B8E,MAAAA,YAAY,GAAGA,YAAY,CAAC,CAAD,CAA3B;AACH;;AACD,QAAIA,YAAY,CAAC9E,MAAjB,EAAyB;AACrB,aAAO8E,YAAP;AACH;AACJ,GAjFU;AAkFXE,EAAAA,YAAY,EAAE,UAASC,OAAT,EAAkBC,WAAlB,EAA+B;AACzC,QAAIC,2BAA2B,GAAG,CAAlC;;AACA,SAAK,IAAIpF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmF,WAAW,CAAClF,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;AACzC,UAAIkF,OAAO,CAACC,WAAW,CAACnF,CAAD,CAAZ,CAAX,EAA6B;AACzBoF,QAAAA,2BAA2B;AAC9B;AACJ;;AACD,WAAOF,OAAO,CAACjF,MAAR,IAAkBiF,OAAO,CAACjF,MAAR,KAAmBmF,2BAA5C;AACH,GA1FU;AA2FX3D,EAAAA,qBAAqB,EAAEA,qBA3FZ;AA4FX4D,EAAAA,WAAW,EAAE,UAASC,QAAT,EAAmBC,UAAnB,EAA+BC,aAA/B,EAA8C;AACvD,QAAI,CAACF,QAAQ,CAACC,UAAD,CAAb,EAA2B;AACvBD,MAAAA,QAAQ,CAACC,UAAD,CAAR,GAAuB,YAAW;AAC9B,YAAIE,UAAU,GAAG,KAAKC,WAAtB;AACA,eAAOD,UAAU,GAAGA,UAAU,CAACF,UAAD,CAAV,CAAuBI,KAAvB,CAA6BF,UAA7B,EAAyC9G,SAAzC,CAAH,GAAyD6G,aAA1E;AACH,OAHD;AAIH;AACJ,GAnGU;AAoGXrF,EAAAA,WAAW,EAAEA,WApGF;AAqGXyF,EAAAA,wBAAwB,EAAE,UAASC,MAAT,EAAiBnF,MAAjB,EAAyB;AAC/C,WAAO;AACHJ,MAAAA,MAAM,EAAEuF,MAAM,CAACvF,MADZ;AAEHG,MAAAA,gBAAgB,EAAEoF,MAAM,CAACpF,gBAFtB;AAGHE,MAAAA,aAAa,EAAEkF,MAAM,CAAClF,aAHnB;AAIHD,MAAAA,MAAM,EAAEA,MAJL;AAKHoF,MAAAA,QAAQ,EAAED,MAAM,CAACC,QALd;AAMHC,MAAAA,SAAS,EAAEF,MAAM,CAACE;AANf,KAAP;AAQH,GA9GU;AA+GXC,EAAAA,eAAe,EAAE,UAASH,MAAT,EAAiBnI,KAAjB,EAAwBgB,IAAxB,EAA8BuH,OAA9B,EAAuC;AACpD,QAAIJ,MAAM,CAACK,eAAP,IAA0B,KAAK,CAAL,KAAWL,MAAM,CAACK,eAAP,CAAuBxI,KAAvB,CAAzC,EAAwE;AACpE,aAAOmI,MAAM,CAACK,eAAP,CAAuBxI,KAAvB,CAAP;AACH,KAFD,MAEO;AACH,UAAImI,MAAM,CAACM,qBAAP,IAAgCzH,IAAhC,IAAwC,YAAYuH,OAAxD,EAAiE;AAC7D,eAAOJ,MAAM,CAACM,qBAAP,CAA6BzH,IAA7B,CAAP;AACH,OAFD,MAEO;AACH,YAAImH,MAAM,CAACO,MAAP,IAAiB,EAAE,YAAYH,OAAZ,KAAwBJ,MAAM,CAACQ,mBAAP,IAA8BR,MAAM,CAACM,qBAA7D,CAAF,CAArB,EAA6G;AACzG,iBAAON,MAAM,CAACO,MAAP,CAAcxH,kBAAd,CAAiClB,KAAjC,CAAP;AACH;AACJ;AACJ;;AACD,WAAOA,KAAP;AACH,GA5HU;AA6HX4I,EAAAA,sBAAsB,EAAE,UAASC,YAAT,EAAuBxF,YAAvB,EAAqC;AACzD,QAAIhB,MAAM,GAAG,GAAb;;AACA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuG,YAAY,CAACtG,MAAjC,EAAyCD,CAAC,EAA1C,EAA8C;AAC1C,UAAIc,WAAW,GAAGyF,YAAY,CAACvG,CAAD,CAA9B;AACAD,MAAAA,MAAM,IAAI,CAACC,CAAC,GAAG,CAAJ,GAAQ,IAAR,GAAe,EAAhB,IAAsBa,cAAc,CAACC,WAAD,EAAcC,YAAd,CAA9C;AACH;;AACD,WAAOhB,MAAM,IAAI,GAAjB;AACH,GApIU;AAqIXc,EAAAA,cAAc,EAAEA,cArIL;AAsIXhB,EAAAA,oBAAoB,EAAEA,oBAtIX;AAuIX2G,EAAAA,mBAAmB,EAAE,UAASzH,QAAT,EAAmB;AACpC,YAAQA,QAAR;AACI,WAAK,MAAL;AACI,eAAO,WAAP;;AACJ,WAAK,UAAL;AACI,eAAO,oBAAP;AAJR;AAMH,GA9IU;AA+IX0H,EAAAA,8BAA8B,EAAE,UAASZ,MAAT,EAAiBa,cAAjB,EAAiC;AAC7D,QAAI3G,MAAM,GAAG,EAAb;AACA,QAAI4G,SAAS,GAAGd,MAAM,CAACc,SAAP,IAAoBd,MAAM,CAACe,IAA3C;;AACA,QAAI3H,aAAa,GAAG5C,UAAU,CAACN,OAAX,CAAmB8K,gBAAnB,CAAoChB,MAApC,CAApB;;AACA,QAAI5G,aAAJ,EAAmB;AACf,OAAC,GAAG1C,SAAS,CAACuK,IAAd,EAAoB7H,aAApB,EAAmC,UAASwF,KAAT,EAAgBsC,QAAhB,EAA0B;AACzDhH,QAAAA,MAAM,CAACiF,IAAP,CAAY0B,cAAc,GAAG;AACzBM,UAAAA,QAAQ,EAAEL,SADe;AAEzB1H,UAAAA,aAAa,EAAE8H,QAFU;AAGzB7G,UAAAA,UAAU,EAAEuE,KAAK,GAAGxF,aAAa,CAACgB,MAAd,GAAuB;AAHlB,SAAH,GAItBxB,mBAAmB,CAACwI,IAApB,CAAyBpB,MAAzB,EAAiCkB,QAAjC,CAJJ;AAKH,OAND;AAOA,aAAOhH,MAAP;AACH;;AACD,QAAI2G,cAAJ,EAAoB;AAChB3G,MAAAA,MAAM,GAAG,CAAC;AACNiH,QAAAA,QAAQ,EAAEL,SADJ;AAENzG,QAAAA,UAAU,EAAE;AAFN,OAAD,CAAT;AAIH,KALD,MAKO;AACHH,MAAAA,MAAM,GAAG,SAASA,MAAT,CAAgBrB,IAAhB,EAAsB;AAC3B,YAAIqB,MAAM,GAAG8F,MAAM,CAACjH,kBAAP,CAA0BF,IAA1B,CAAb;;AACA,YAAI,KAAK,CAAL,KAAWqB,MAAX,IAAqB,OAAOA,MAAhC,EAAwC;AACpCA,UAAAA,MAAM,GAAG,IAAT;AACH;;AACD,eAAOA,MAAP;AACH,OAND;;AAOA,UAAI8F,MAAM,CAACqB,aAAX,EAA0B;AACtBnH,QAAAA,MAAM,GAAG,CAAC;AACNiH,UAAAA,QAAQ,EAAEjH,MADJ;AAENoH,UAAAA,OAAO,EAAEtB,MAAM,CAACqB,aAAP,CAAqBD,IAArB,CAA0BpB,MAA1B;AAFH,SAAD,CAAT;AAIH;AACJ;;AACD,WAAO9F,MAAP;AACH,GAlLU;AAmLXqH,EAAAA,mBAAmB,EAAE,UAASC,eAAT,EAA0BC,eAA1B,EAA2CC,gBAA3C,EAA6D;AAC9EF,IAAAA,eAAe,GAAGxH,oBAAoB,CAACwH,eAAD,CAAtC;AACAC,IAAAA,eAAe,GAAGzH,oBAAoB,CAACyH,eAAD,CAAtC;;AACA,QAAI1F,KAAK,CAACC,OAAN,CAAcwF,eAAd,KAAkCzF,KAAK,CAACC,OAAN,CAAcyF,eAAd,CAAtC,EAAsE;AAClE,UAAID,eAAe,CAACpH,MAAhB,KAA2BqH,eAAe,CAACrH,MAA/C,EAAuD;AACnD,eAAO,KAAP;AACH,OAFD,MAEO;AACH,aAAK,IAAID,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGqH,eAAe,CAACpH,MAApC,EAA4CD,CAAC,EAA7C,EAAiD;AAC7C,cAAI,CAACb,cAAc,CAACkI,eAAe,CAACrH,CAAD,CAAf,CAAmBgH,QAApB,EAA8BM,eAAe,CAACtH,CAAD,CAAf,CAAmBgH,QAAjD,CAAf,IAA6EK,eAAe,CAACrH,CAAD,CAAf,CAAmBwH,IAAnB,KAA4BF,eAAe,CAACtH,CAAD,CAAf,CAAmBwH,IAA5H,IAAoIH,eAAe,CAACrH,CAAD,CAAf,CAAmBf,aAAnB,KAAqCqI,eAAe,CAACtH,CAAD,CAAf,CAAmBf,aAA5L,IAA6M,CAACsI,gBAAD,IAAqBE,OAAO,CAACJ,eAAe,CAACrH,CAAD,CAAf,CAAmBE,UAApB,CAAP,KAA2CuH,OAAO,CAACH,eAAe,CAACtH,CAAD,CAAf,CAAmBE,UAApB,CAAxR,EAAyT;AACrT,mBAAO,KAAP;AACH;AACJ;AACJ;;AACD,aAAO,IAAP;AACH,KAXD,MAWO;AACH,aAAO,CAAC,CAACmH,eAAD,IAAoB,CAACA,eAAe,CAACpH,MAAtC,OAAmD,CAACqH,eAAD,IAAoB,CAACA,eAAe,CAACrH,MAAxF,CAAP;AACH;AACJ,GApMU;AAqMXyH,EAAAA,kBAAkB,EAAE,UAASnD,KAAT,EAAgBoD,YAAhB,EAA8BC,UAA9B,EAA0CC,gBAA1C,EAA4D;AAC5E,QAAIC,WAAW,GAAGvD,KAAK,CAACtE,MAAxB;AACA,QAAI8H,cAAc,GAAG,KAArB;AACA,QAAIrD,IAAJ;AACA,QAAIsD,MAAJ;AACA,QAAIxI,WAAW,GAAGqI,gBAAgB,IAAI,CAAtC;AACA,QAAI9H,MAAM,GAAG,EAAb;AACA,QAAIkI,UAAJ;;AACA,SAAK,IAAIjI,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI8H,WAArB,EAAkC9H,CAAC,EAAnC,EAAuC;AACnC,UAAIA,CAAC,GAAG8H,WAAR,EAAqB;AACjBpD,QAAAA,IAAI,GAAGH,KAAK,CAAC2D,EAAN,CAASlI,CAAT,CAAP;AACAgI,QAAAA,MAAM,GAAGtD,IAAI,CAACsD,MAAL,EAAT;AACAC,QAAAA,UAAU,GAAG,UAAUvD,IAAI,CAACyD,GAAL,CAAS,WAAT,CAAvB;AACH;;AACD,UAAIC,KAAK,GAAG;AACR3D,QAAAA,KAAK,EAAEjF,WADC;AAER6I,QAAAA,CAAC,EAAEL,MAAM,GAAGA,MAAM,CAACM,IAAP,IAAe,CAACV,UAAD,IAAeK,UAAU,GAAGjI,CAAC,KAAK8H,WAAlC,GAAgD,CAAC,GAAGrL,SAAS,CAAC8L,eAAd,EAA+B7D,IAAI,CAAC,CAAD,CAAnC,EAAwC8D,KAAxF,GAAgG,CAA/G,CAAH,GAAuH,CAFxH;AAGRC,QAAAA,CAAC,EAAET,MAAM,GAAGA,MAAM,CAACU,GAAP,IAAcd,UAAU,IAAI5H,CAAC,KAAK8H,WAApB,GAAkC,CAAC,GAAGrL,SAAS,CAAC8L,eAAd,EAA+B7D,IAAI,CAAC,CAAD,CAAnC,EAAwCX,MAA1E,GAAmF,CAAjG,CAAH,GAAyG,CAH1G;AAIRvE,QAAAA,WAAW,EAAEA;AAJL,OAAZ;;AAMA,UAAI,CAACoI,UAAD,IAAe5H,CAAC,GAAG,CAAvB,EAA0B;AACtB,YAAI2I,cAAc,GAAGpE,KAAK,CAAC2D,EAAN,CAASlI,CAAC,GAAG,CAAb,EAAgBgI,MAAhB,EAArB;;AACA,YAAIW,cAAc,CAACD,GAAf,GAAqBN,KAAK,CAACK,CAA/B,EAAkC;AAC9BL,UAAAA,KAAK,CAACK,CAAN,GAAUE,cAAc,CAACD,GAAzB;AACH;AACJ;;AACD,UAAIf,YAAJ,EAAkB;AACdI,QAAAA,cAAc,GAAGJ,YAAY,CAACS,KAAD,CAA7B;AACH;;AACD,UAAI,CAACL,cAAL,EAAqB;AACjBhI,QAAAA,MAAM,CAACiF,IAAP,CAAYoD,KAAZ;AACH;;AACD5I,MAAAA,WAAW;AACd;;AACD,WAAOO,MAAP;AACH,GAxOU;AAyOX6I,EAAAA,qBAAqB,EAAE,YAAW;AAC9B,WAAO;AACHC,MAAAA,8BAA8B,EAAE,IAD7B;AAEHC,MAAAA,MAAM,EAAE,UAAS3E,SAAT,EAAoB/D,OAApB,EAA6B;AACjC,YAAIV,UAAU,GAAG,CAAC,GAAG1D,SAAS,CAACD,OAAd,EAAuBoI,SAAvB,CAAjB;;AACA,YAAI,CAAC,GAAGhI,KAAK,CAAC0C,SAAV,EAAqBuB,OAAO,CAAC1C,KAA7B,KAAuC,EAAE0C,OAAO,CAAC1B,IAAR,IAAgB0B,OAAO,CAAC1B,IAAR,CAAaqK,cAA/B,CAAvC,IAAyF,CAAC3I,OAAO,CAAC4I,GAAR,CAAYC,QAA1G,EAAoH;AAChH,cAAIC,QAAQ,GAAG9I,OAAO,CAAC+I,SAAR,CAAkBC,OAAlB,CAA0B,UAA1B,CAAf;AACA1J,UAAAA,UAAU,CAACmD,QAAX,CAAoBvF,qBAApB,EAA2CuF,QAA3C,CAAoD1F,iCAApD;AACA,WAAC,GAAGnB,SAAS,CAACD,OAAd,EAAuB,OAAvB,EAAgC8G,QAAhC,CAAyCzC,OAAO,CAAC1C,KAAR,GAAgBN,2BAAhB,GAA8CC,2BAAvF,EAAoHyF,QAApH,CAA6HpD,UAA7H;AACAwJ,UAAAA,QAAQ,CAACG,OAAT,CAAiB,OAAjB,EAA0BjJ,OAAO,CAAC1C,KAAR,GAAgBwL,QAAQ,CAACI,QAAT,CAAkB,yBAAlB,CAAhB,GAA+DJ,QAAQ,CAACI,QAAT,CAAkB,uBAAlB,CAAzF,EAAqI5J,UAArI;AACH,SALD,MAKO;AACHD,UAAAA,YAAY,CAACC,UAAD,CAAZ;AACH;AACJ;AAZE,KAAP;AAcH,GAxPU;AAyPXD,EAAAA,YAAY,EAAEA,YAzPH;AA0PXX,EAAAA,UAAU,EAAEA,UA1PD;AA2PXyK,EAAAA,iBAAiB,EAAE,UAASC,cAAT,EAAyB;AACxC,QAAI;AACA,UAAIA,cAAJ,EAAoB;AAChB,eAAO;AACHC,UAAAA,cAAc,EAAED,cAAc,CAACC,cAD5B;AAEHC,UAAAA,YAAY,EAAEF,cAAc,CAACE;AAF1B,SAAP;AAIH;AACJ,KAPD,CAOE,OAAOC,CAAP,EAAU,CAAE;;AACd,WAAO,EAAP;AACH,GArQU;AAsQXC,EAAAA,iBAAiB,EAAE,UAASJ,cAAT,EAAyBK,cAAzB,EAAyC;AACxD,QAAI;AACA,UAAIL,cAAc,IAAIA,cAAc,CAACI,iBAArC,EAAwD;AACpDJ,QAAAA,cAAc,CAACI,iBAAf,CAAiCC,cAAc,CAACJ,cAAhD,EAAgEI,cAAc,CAACH,YAA/E;AACH;AACJ,KAJD,CAIE,OAAOC,CAAP,EAAU,CAAE;AACjB,GA5QU;AA6QXG,EAAAA,qBAAqB,EAAE,UAASX,SAAT,EAAoB9H,QAApB,EAA8B;AACjDrE,IAAAA,cAAc,CAACjB,OAAf,CAAuBgO,OAAvB,CAA+B1I,QAA/B,EAAyC,OAAzC;;AACA,QAAI2I,0BAA0B,GAAGb,SAAS,CAAC5F,MAAV,CAAiB,+BAAjB,CAAjC;AACA,QAAI0G,kBAAkB,GAAGd,SAAS,CAACe,aAAV,CAAwB,oBAAxB,CAAzB;;AACA,QAAIC,uBAAuB,GAAGF,kBAAkB,IAAIA,kBAAkB,CAACG,qBAAnB,EAApD;;AACA,QAAIjI,OAAO,GAAGd,QAAQ,CAAC1B,GAAT,CAAa,CAAb,CAAd;;AACA,QAAIqK,0BAA0B,IAAI,CAACG,uBAA/B,IAA0D9I,QAAQ,CAACgJ,EAAT,CAAY,sBAAZ,CAA1D,IAAiG,CAAChJ,QAAQ,CAACgJ,EAAT,CAAY,YAAZ,CAAtG,EAAiI;AAC7H,UAAIC,MAAM,GAAGlJ,iBAAiB,CAACC,QAAQ,CAACkJ,OAAT,CAAiB,gBAAjB,CAAD,CAA9B;AACA,OAAC,GAAGnO,SAAS,CAACoO,IAAd,EAAoBF,MAAM,IAAIA,MAAM,CAACG,iBAArC,EAAwDC,IAAxD,CAA6D,YAAW;AACpEvI,QAAAA,OAAO,CAACwI,MAAR;AACH,OAFD;AAGH;AACJ,GAzRU;AA0RXvJ,EAAAA,iBAAiB,EAAEA,iBA1RR;AA2RXwJ,EAAAA,2BAA2B,EAAE,UAASC,OAAT,EAAkBC,YAAlB,EAAgC;AACzD,QAAIC,mBAAmB,GAAGF,OAAO,CAACG,IAAR,CAAa,UAASnF,MAAT,EAAiB;AACpD,aAAOA,MAAM,IAAI,CAACA,MAAM,CAACoF,OAAlB,IAA6B,CAACpF,MAAM,CAACqF,KAArC,IAA8C,UAAUrF,MAAM,CAACsF,aAAtE;AACH,KAFyB,CAA1B;AAGA,QAAIC,eAAJ;;AACA,SAAKA,eAAe,GAAGP,OAAO,CAAC5K,MAAR,GAAiB,CAAxC,EAA2C4K,OAAO,CAACO,eAAD,CAAlD,EAAqEA,eAAe,EAApF,EAAwF;AACpF,UAAIvF,MAAM,GAAGgF,OAAO,CAACO,eAAD,CAApB;AACA,UAAI5C,KAAK,GAAGsC,YAAY,IAAIA,YAAY,CAACM,eAAD,CAAxC;AACA,UAAID,aAAa,GAAG,CAACJ,mBAAD,IAAwB,UAAUlF,MAAM,CAACsF,aAA7D;;AACA,UAAI,CAACtF,MAAM,CAACoF,OAAR,IAAmB,CAACpF,MAAM,CAACqF,KAA3B,IAAoC,qBAAqB1C,KAAzD,IAAkE2C,aAAtE,EAAqF;AACjF;AACH;AACJ;;AACD,WAAOC,eAAP;AACH,GAzSU;AA0SXC,EAAAA,sBAAsB,EAAE,UAASC,UAAT,EAAqBjK,QAArB,EAA+B;AACnD,QAAIA,QAAQ,IAAIA,QAAQ,CAACpB,MAAzB,EAAiC;AAC7B,UAAIsL,KAAK,GAAGlK,QAAQ,CAACkJ,OAAT,CAAiB,MAAMe,UAAU,CAACE,uBAAX,EAAvB,EAA6DC,MAA7D,EAAZ;AACA,aAAOF,KAAK,CAAClB,EAAN,CAASiB,UAAU,CAACnC,SAAX,CAAqB9H,QAArB,EAAT,CAAP;AACH;;AACD,WAAO,KAAP;AACH;AAhTU,CAAf;AAkTAvF,OAAO,CAACC,OAAR,GAAkBiG,QAAlB;AACA0J,MAAM,CAAC5P,OAAP,GAAiBA,OAAO,CAACC,OAAzB","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.utils.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\nvar _filtering = _interopRequireDefault(require(\"../shared/filtering\"));\r\nvar _string = require(\"../../core/utils/string\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _position = require(\"../../core/utils/position\");\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _load_panel = _interopRequireDefault(require(\"../load_panel\"));\r\nvar _utils = _interopRequireDefault(require(\"../../data/utils\"));\r\nvar _format_helper = _interopRequireDefault(require(\"../../format_helper\"));\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DATAGRID_SELECTION_DISABLED_CLASS = \"dx-selection-disabled\";\r\nvar DATAGRID_GROUP_OPENED_CLASS = \"dx-datagrid-group-opened\";\r\nvar DATAGRID_GROUP_CLOSED_CLASS = \"dx-datagrid-group-closed\";\r\nvar DATAGRID_EXPAND_CLASS = \"dx-datagrid-expand\";\r\nvar NO_DATA_CLASS = \"nodata\";\r\nvar DATE_INTERVAL_SELECTORS = {\r\n    year: function(value) {\r\n        return value && value.getFullYear()\r\n    },\r\n    month: function(value) {\r\n        return value && value.getMonth() + 1\r\n    },\r\n    day: function(value) {\r\n        return value && value.getDate()\r\n    },\r\n    quarter: function(value) {\r\n        return value && Math.floor(value.getMonth() / 3) + 1\r\n    },\r\n    hour: function(value) {\r\n        return value && value.getHours()\r\n    },\r\n    minute: function(value) {\r\n        return value && value.getMinutes()\r\n    },\r\n    second: function(value) {\r\n        return value && value.getSeconds()\r\n    }\r\n};\r\nvar getIntervalSelector = function() {\r\n    var data = arguments[1];\r\n    var value = this.calculateCellValue(data);\r\n    if (!(0, _type.isDefined)(value)) {\r\n        return null\r\n    } else {\r\n        if (isDateType(this.dataType)) {\r\n            var nameIntervalSelector = arguments[0];\r\n            return DATE_INTERVAL_SELECTORS[nameIntervalSelector](value)\r\n        } else {\r\n            if (\"number\" === this.dataType) {\r\n                var groupInterval = arguments[0];\r\n                return Math.floor(Number(value) / groupInterval) * groupInterval\r\n            }\r\n        }\r\n    }\r\n};\r\nvar equalSelectors = function(selector1, selector2) {\r\n    if ((0, _type.isFunction)(selector1) && (0, _type.isFunction)(selector2)) {\r\n        if (selector1.originalCallback && selector2.originalCallback) {\r\n            return selector1.originalCallback === selector2.originalCallback && selector1.columnIndex === selector2.columnIndex\r\n        }\r\n    }\r\n    return selector1 === selector2\r\n};\r\n\r\nfunction isDateType(dataType) {\r\n    return \"date\" === dataType || \"datetime\" === dataType\r\n}\r\nvar setEmptyText = function($container) {\r\n    $container.get(0).textContent = \"\\xa0\"\r\n};\r\nvar normalizeSortingInfo = function(sort) {\r\n    sort = sort || [];\r\n    var result = _utils.default.normalizeSortingInfo(sort);\r\n    for (var i = 0; i < sort.length; i++) {\r\n        if (sort && sort[i] && void 0 !== sort[i].isExpanded) {\r\n            result[i].isExpanded = sort[i].isExpanded\r\n        }\r\n        if (sort && sort[i] && void 0 !== sort[i].groupInterval) {\r\n            result[i].groupInterval = sort[i].groupInterval\r\n        }\r\n    }\r\n    return result\r\n};\r\nvar formatValue = function(value, options) {\r\n    var valueText = _format_helper.default.format(value, options.format) || value && value.toString() || \"\";\r\n    var formatObject = {\r\n        value: value,\r\n        valueText: options.getDisplayFormat ? options.getDisplayFormat(valueText) : valueText,\r\n        target: options.target || \"row\",\r\n        groupInterval: options.groupInterval\r\n    };\r\n    return options.customizeText ? options.customizeText.call(options, formatObject) : formatObject.valueText\r\n};\r\nvar getSummaryText = function(summaryItem, summaryTexts) {\r\n    var displayFormat = summaryItem.displayFormat || summaryItem.columnCaption && summaryTexts[summaryItem.summaryType + \"OtherColumn\"] || summaryTexts[summaryItem.summaryType];\r\n    return formatValue(summaryItem.value, {\r\n        format: summaryItem.valueFormat,\r\n        getDisplayFormat: function(valueText) {\r\n            return displayFormat ? (0, _string.format)(displayFormat, valueText, summaryItem.columnCaption) : valueText\r\n        },\r\n        customizeText: summaryItem.customizeText\r\n    })\r\n};\r\nvar getWidgetInstance = function($element) {\r\n    var editorData = $element.data && $element.data();\r\n    var dxComponents = editorData && editorData.dxComponents;\r\n    var widgetName = dxComponents && dxComponents[0];\r\n    return widgetName && editorData[widgetName]\r\n};\r\nvar equalFilterParameters = function equalFilterParameters(filter1, filter2) {\r\n    if (Array.isArray(filter1) && Array.isArray(filter2)) {\r\n        if (filter1.length !== filter2.length) {\r\n            return false\r\n        } else {\r\n            for (var i = 0; i < filter1.length; i++) {\r\n                if (!equalFilterParameters(filter1[i], filter2[i])) {\r\n                    return false\r\n                }\r\n            }\r\n        }\r\n        return true\r\n    } else {\r\n        if ((0, _type.isFunction)(filter1) && filter1.columnIndex >= 0 && (0, _type.isFunction)(filter2) && filter2.columnIndex >= 0) {\r\n            return filter1.columnIndex === filter2.columnIndex && (0, _data.toComparable)(filter1.filterValue) === (0, _data.toComparable)(filter2.filterValue)\r\n        } else {\r\n            return (0, _data.toComparable)(filter1) == (0, _data.toComparable)(filter2)\r\n        }\r\n    }\r\n};\r\nvar _default = {\r\n    renderNoDataText: function($element) {\r\n        var that = this;\r\n        $element = $element || this.element();\r\n        if (!$element) {\r\n            return\r\n        }\r\n        var noDataClass = that.addWidgetPrefix(NO_DATA_CLASS);\r\n        var noDataElement = $element.find(\".\" + noDataClass).last();\r\n        var isVisible = this._dataController.isEmpty();\r\n        var isLoading = this._dataController.isLoading();\r\n        if (!noDataElement.length) {\r\n            noDataElement = (0, _renderer.default)(\"<span>\").addClass(noDataClass).appendTo($element)\r\n        }\r\n        if (isVisible && !isLoading) {\r\n            noDataElement.removeClass(\"dx-hidden\").text(that._getNoDataText())\r\n        } else {\r\n            noDataElement.addClass(\"dx-hidden\")\r\n        }\r\n    },\r\n    renderLoadPanel: function($element, $container, isLocalStore) {\r\n        var that = this;\r\n        var loadPanelOptions;\r\n        that._loadPanel && that._loadPanel.$element().remove();\r\n        loadPanelOptions = that.option(\"loadPanel\");\r\n        if (loadPanelOptions && (\"auto\" === loadPanelOptions.enabled ? !isLocalStore : loadPanelOptions.enabled)) {\r\n            loadPanelOptions = (0, _extend.extend)({\r\n                shading: false,\r\n                message: loadPanelOptions.text,\r\n                position: function() {\r\n                    var $window = (0, _renderer.default)((0, _window.getWindow)());\r\n                    if ($element.height() > $window.height()) {\r\n                        return {\r\n                            of: $window,\r\n                            boundary: $element,\r\n                            collision: \"fit\"\r\n                        }\r\n                    }\r\n                    return {\r\n                        of: $element\r\n                    }\r\n                },\r\n                container: $container\r\n            }, loadPanelOptions);\r\n            that._loadPanel = that._createComponent((0, _renderer.default)(\"<div>\").appendTo($container), _load_panel.default, loadPanelOptions)\r\n        } else {\r\n            that._loadPanel = null\r\n        }\r\n    },\r\n    getIndexByKey: function(key, items, keyName) {\r\n        var index = -1;\r\n        if (void 0 !== key && Array.isArray(items)) {\r\n            keyName = arguments.length <= 2 ? \"key\" : keyName;\r\n            for (var i = 0; i < items.length; i++) {\r\n                var item = (0, _type.isDefined)(keyName) ? items[i][keyName] : items[i];\r\n                if ((0, _common.equalByValue)(key, item)) {\r\n                    index = i;\r\n                    break\r\n                }\r\n            }\r\n        }\r\n        return index\r\n    },\r\n    combineFilters: function(filters, operation) {\r\n        var resultFilter = [];\r\n        operation = operation || \"and\";\r\n        for (var i = 0; i < filters.length; i++) {\r\n            if (!filters[i]) {\r\n                continue\r\n            }\r\n            if (resultFilter.length) {\r\n                resultFilter.push(operation)\r\n            }\r\n            resultFilter.push(filters[i])\r\n        }\r\n        if (1 === resultFilter.length) {\r\n            resultFilter = resultFilter[0]\r\n        }\r\n        if (resultFilter.length) {\r\n            return resultFilter\r\n        }\r\n    },\r\n    checkChanges: function(changes, changeNames) {\r\n        var changesWithChangeNamesCount = 0;\r\n        for (var i = 0; i < changeNames.length; i++) {\r\n            if (changes[changeNames[i]]) {\r\n                changesWithChangeNamesCount++\r\n            }\r\n        }\r\n        return changes.length && changes.length === changesWithChangeNamesCount\r\n    },\r\n    equalFilterParameters: equalFilterParameters,\r\n    proxyMethod: function(instance, methodName, defaultResult) {\r\n        if (!instance[methodName]) {\r\n            instance[methodName] = function() {\r\n                var dataSource = this._dataSource;\r\n                return dataSource ? dataSource[methodName].apply(dataSource, arguments) : defaultResult\r\n            }\r\n        }\r\n    },\r\n    formatValue: formatValue,\r\n    getFormatOptionsByColumn: function(column, target) {\r\n        return {\r\n            format: column.format,\r\n            getDisplayFormat: column.getDisplayFormat,\r\n            customizeText: column.customizeText,\r\n            target: target,\r\n            trueText: column.trueText,\r\n            falseText: column.falseText\r\n        }\r\n    },\r\n    getDisplayValue: function(column, value, data, rowType) {\r\n        if (column.displayValueMap && void 0 !== column.displayValueMap[value]) {\r\n            return column.displayValueMap[value]\r\n        } else {\r\n            if (column.calculateDisplayValue && data && \"group\" !== rowType) {\r\n                return column.calculateDisplayValue(data)\r\n            } else {\r\n                if (column.lookup && !(\"group\" === rowType && (column.calculateGroupValue || column.calculateDisplayValue))) {\r\n                    return column.lookup.calculateCellValue(value)\r\n                }\r\n            }\r\n        }\r\n        return value\r\n    },\r\n    getGroupRowSummaryText: function(summaryItems, summaryTexts) {\r\n        var result = \"(\";\r\n        for (var i = 0; i < summaryItems.length; i++) {\r\n            var summaryItem = summaryItems[i];\r\n            result += (i > 0 ? \", \" : \"\") + getSummaryText(summaryItem, summaryTexts)\r\n        }\r\n        return result += \")\"\r\n    },\r\n    getSummaryText: getSummaryText,\r\n    normalizeSortingInfo: normalizeSortingInfo,\r\n    getFormatByDataType: function(dataType) {\r\n        switch (dataType) {\r\n            case \"date\":\r\n                return \"shortDate\";\r\n            case \"datetime\":\r\n                return \"shortDateShortTime\"\r\n        }\r\n    },\r\n    getHeaderFilterGroupParameters: function(column, remoteGrouping) {\r\n        var result = [];\r\n        var dataField = column.dataField || column.name;\r\n        var groupInterval = _filtering.default.getGroupInterval(column);\r\n        if (groupInterval) {\r\n            (0, _iterator.each)(groupInterval, function(index, interval) {\r\n                result.push(remoteGrouping ? {\r\n                    selector: dataField,\r\n                    groupInterval: interval,\r\n                    isExpanded: index < groupInterval.length - 1\r\n                } : getIntervalSelector.bind(column, interval))\r\n            });\r\n            return result\r\n        }\r\n        if (remoteGrouping) {\r\n            result = [{\r\n                selector: dataField,\r\n                isExpanded: false\r\n            }]\r\n        } else {\r\n            result = function result(data) {\r\n                var result = column.calculateCellValue(data);\r\n                if (void 0 === result || \"\" === result) {\r\n                    result = null\r\n                }\r\n                return result\r\n            };\r\n            if (column.sortingMethod) {\r\n                result = [{\r\n                    selector: result,\r\n                    compare: column.sortingMethod.bind(column)\r\n                }]\r\n            }\r\n        }\r\n        return result\r\n    },\r\n    equalSortParameters: function(sortParameters1, sortParameters2, ignoreIsExpanded) {\r\n        sortParameters1 = normalizeSortingInfo(sortParameters1);\r\n        sortParameters2 = normalizeSortingInfo(sortParameters2);\r\n        if (Array.isArray(sortParameters1) && Array.isArray(sortParameters2)) {\r\n            if (sortParameters1.length !== sortParameters2.length) {\r\n                return false\r\n            } else {\r\n                for (var i = 0; i < sortParameters1.length; i++) {\r\n                    if (!equalSelectors(sortParameters1[i].selector, sortParameters2[i].selector) || sortParameters1[i].desc !== sortParameters2[i].desc || sortParameters1[i].groupInterval !== sortParameters2[i].groupInterval || !ignoreIsExpanded && Boolean(sortParameters1[i].isExpanded) !== Boolean(sortParameters2[i].isExpanded)) {\r\n                        return false\r\n                    }\r\n                }\r\n            }\r\n            return true\r\n        } else {\r\n            return (!sortParameters1 || !sortParameters1.length) === (!sortParameters2 || !sortParameters2.length)\r\n        }\r\n    },\r\n    getPointsByColumns: function(items, pointCreated, isVertical, startColumnIndex) {\r\n        var cellsLength = items.length;\r\n        var notCreatePoint = false;\r\n        var item;\r\n        var offset;\r\n        var columnIndex = startColumnIndex || 0;\r\n        var result = [];\r\n        var rtlEnabled;\r\n        for (var i = 0; i <= cellsLength; i++) {\r\n            if (i < cellsLength) {\r\n                item = items.eq(i);\r\n                offset = item.offset();\r\n                rtlEnabled = \"rtl\" === item.css(\"direction\")\r\n            }\r\n            var point = {\r\n                index: columnIndex,\r\n                x: offset ? offset.left + (!isVertical && rtlEnabled ^ i === cellsLength ? (0, _position.getBoundingRect)(item[0]).width : 0) : 0,\r\n                y: offset ? offset.top + (isVertical && i === cellsLength ? (0, _position.getBoundingRect)(item[0]).height : 0) : 0,\r\n                columnIndex: columnIndex\r\n            };\r\n            if (!isVertical && i > 0) {\r\n                var prevItemOffset = items.eq(i - 1).offset();\r\n                if (prevItemOffset.top < point.y) {\r\n                    point.y = prevItemOffset.top\r\n                }\r\n            }\r\n            if (pointCreated) {\r\n                notCreatePoint = pointCreated(point)\r\n            }\r\n            if (!notCreatePoint) {\r\n                result.push(point)\r\n            }\r\n            columnIndex++\r\n        }\r\n        return result\r\n    },\r\n    getExpandCellTemplate: function() {\r\n        return {\r\n            allowRenderToDetachedContainer: true,\r\n            render: function(container, options) {\r\n                var $container = (0, _renderer.default)(container);\r\n                if ((0, _type.isDefined)(options.value) && !(options.data && options.data.isContinuation) && !options.row.isNewRow) {\r\n                    var rowsView = options.component.getView(\"rowsView\");\r\n                    $container.addClass(DATAGRID_EXPAND_CLASS).addClass(DATAGRID_SELECTION_DISABLED_CLASS);\r\n                    (0, _renderer.default)(\"<div>\").addClass(options.value ? DATAGRID_GROUP_OPENED_CLASS : DATAGRID_GROUP_CLOSED_CLASS).appendTo($container);\r\n                    rowsView.setAria(\"label\", options.value ? rowsView.localize(\"dxDataGrid-ariaCollapse\") : rowsView.localize(\"dxDataGrid-ariaExpand\"), $container)\r\n                } else {\r\n                    setEmptyText($container)\r\n                }\r\n            }\r\n        }\r\n    },\r\n    setEmptyText: setEmptyText,\r\n    isDateType: isDateType,\r\n    getSelectionRange: function(focusedElement) {\r\n        try {\r\n            if (focusedElement) {\r\n                return {\r\n                    selectionStart: focusedElement.selectionStart,\r\n                    selectionEnd: focusedElement.selectionEnd\r\n                }\r\n            }\r\n        } catch (e) {}\r\n        return {}\r\n    },\r\n    setSelectionRange: function(focusedElement, selectionRange) {\r\n        try {\r\n            if (focusedElement && focusedElement.setSelectionRange) {\r\n                focusedElement.setSelectionRange(selectionRange.selectionStart, selectionRange.selectionEnd)\r\n            }\r\n        } catch (e) {}\r\n    },\r\n    focusAndSelectElement: function(component, $element) {\r\n        _events_engine.default.trigger($element, \"focus\");\r\n        var isSelectTextOnEditingStart = component.option(\"editing.selectTextOnEditStart\");\r\n        var keyboardController = component.getController(\"keyboardNavigation\");\r\n        var isEditingNavigationMode = keyboardController && keyboardController._isFastEditingStarted();\r\n        var element = $element.get(0);\r\n        if (isSelectTextOnEditingStart && !isEditingNavigationMode && $element.is(\".dx-texteditor-input\") && !$element.is(\"[readonly]\")) {\r\n            var editor = getWidgetInstance($element.closest(\".dx-texteditor\"));\r\n            (0, _deferred.when)(editor && editor._loadItemDeferred).done(function() {\r\n                element.select()\r\n            })\r\n        }\r\n    },\r\n    getWidgetInstance: getWidgetInstance,\r\n    getLastResizableColumnIndex: function(columns, resultWidths) {\r\n        var hasResizableColumns = columns.some(function(column) {\r\n            return column && !column.command && !column.fixed && false !== column.allowResizing\r\n        });\r\n        var lastColumnIndex;\r\n        for (lastColumnIndex = columns.length - 1; columns[lastColumnIndex]; lastColumnIndex--) {\r\n            var column = columns[lastColumnIndex];\r\n            var width = resultWidths && resultWidths[lastColumnIndex];\r\n            var allowResizing = !hasResizableColumns || false !== column.allowResizing;\r\n            if (!column.command && !column.fixed && \"adaptiveHidden\" !== width && allowResizing) {\r\n                break\r\n            }\r\n        }\r\n        return lastColumnIndex\r\n    },\r\n    isElementInCurrentGrid: function(controller, $element) {\r\n        if ($element && $element.length) {\r\n            var $grid = $element.closest(\".\" + controller.getWidgetContainerClass()).parent();\r\n            return $grid.is(controller.component.$element())\r\n        }\r\n        return false\r\n    }\r\n};\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}