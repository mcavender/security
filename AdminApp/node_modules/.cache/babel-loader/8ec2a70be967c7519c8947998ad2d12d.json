{"ast":null,"code":"/**\r\n * DevExtreme (ui/shared/ui.editor_factory_mixin.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _variable_wrapper = _interopRequireDefault(require(\"../../core/utils/variable_wrapper\"));\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _element = require(\"../../core/element\");\n\nvar _utils = require(\"../../data/data_source/utils\");\n\nvar _index = require(\"../../events/utils/index\");\n\nrequire(\"../text_box\");\n\nrequire(\"../number_box\");\n\nrequire(\"../check_box\");\n\nrequire(\"../select_box\");\n\nrequire(\"../date_box\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar isWrapped = _variable_wrapper.default.isWrapped;\nvar CHECKBOX_SIZE_CLASS = \"checkbox-size\";\nvar EDITOR_INLINE_BLOCK = \"dx-editor-inline-block\";\n\nvar EditorFactoryMixin = function () {\n  var getResultConfig = function (config, options) {\n    return (0, _extend.extend)(config, {\n      readOnly: options.readOnly,\n      placeholder: options.placeholder,\n      inputAttr: {\n        id: options.id\n      },\n      tabIndex: options.tabIndex\n    }, options.editorOptions);\n  };\n\n  var checkEnterBug = function () {\n    return _browser.default.msie || _browser.default.mozilla || _devices.default.real().ios;\n  };\n\n  var getTextEditorConfig = function (options) {\n    var data = {};\n    var isEnterBug = checkEnterBug();\n    var sharedData = options.sharedData || data;\n    return getResultConfig({\n      placeholder: options.placeholder,\n      width: options.width,\n      value: options.value,\n      onValueChanged: function (e) {\n        var needDelayedUpdate = \"filterRow\" === options.parentType || \"searchPanel\" === options.parentType;\n        var isInputOrKeyUpEvent = e.event && (\"input\" === e.event.type || \"keyup\" === e.event.type);\n\n        var updateValue = function (e, notFireEvent) {\n          options && options.setValue(e.value, notFireEvent);\n        };\n\n        clearTimeout(data.valueChangeTimeout);\n\n        if (isInputOrKeyUpEvent && needDelayedUpdate) {\n          sharedData.valueChangeTimeout = data.valueChangeTimeout = setTimeout(function () {\n            updateValue(e, data.valueChangeTimeout !== sharedData.valueChangeTimeout);\n          }, (0, _type.isDefined)(options.updateValueTimeout) ? options.updateValueTimeout : 0);\n        } else {\n          updateValue(e);\n        }\n      },\n      onKeyDown: function (e) {\n        if (isEnterBug && \"enter\" === (0, _index.normalizeKeyName)(e.event)) {\n          _events_engine.default.trigger((0, _renderer.default)(e.component._input()), \"change\");\n        }\n      },\n      valueChangeEvent: \"change\" + (\"filterRow\" === options.parentType ? \" keyup input\" : \"\")\n    }, options);\n  };\n\n  var prepareDateBox = function (options) {\n    options.editorName = \"dxDateBox\";\n    options.editorOptions = getResultConfig({\n      value: options.value,\n      onValueChanged: function (args) {\n        options.setValue(args.value);\n      },\n      onKeyDown: function (e) {\n        if (checkEnterBug() && \"enter\" === (0, _index.normalizeKeyName)(e.event)) {\n          e.component.blur();\n          e.component.focus();\n        }\n      },\n      displayFormat: options.format,\n      type: options.dataType,\n      dateSerializationFormat: null,\n      width: \"filterBuilder\" === options.parentType ? void 0 : \"auto\"\n    }, options);\n  };\n\n  var prepareTextBox = function (options) {\n    var config = getTextEditorConfig(options);\n    var isSearching = \"searchPanel\" === options.parentType;\n\n    var toString = function (value) {\n      return (0, _type.isDefined)(value) ? value.toString() : \"\";\n    };\n\n    if (options.editorType && \"dxTextBox\" !== options.editorType) {\n      config.value = options.value;\n    } else {\n      config.value = toString(options.value);\n    }\n\n    config.valueChangeEvent += isSearching ? \" keyup input search\" : \"\";\n    config.mode = config.mode || (isSearching ? \"search\" : \"text\");\n    options.editorName = \"dxTextBox\";\n    options.editorOptions = config;\n  };\n\n  var prepareNumberBox = function (options) {\n    var config = getTextEditorConfig(options);\n    config.value = (0, _type.isDefined)(options.value) ? options.value : null;\n    options.editorName = \"dxNumberBox\";\n    options.editorOptions = config;\n  };\n\n  var prepareBooleanEditor = function (options) {\n    if (\"filterRow\" === options.parentType || \"filterBuilder\" === options.parentType) {\n      prepareSelectBox((0, _extend.extend)(options, {\n        lookup: {\n          displayExpr: function (data) {\n            if (true === data) {\n              return options.trueText || \"true\";\n            } else {\n              if (false === data) {\n                return options.falseText || \"false\";\n              }\n            }\n          },\n          dataSource: [true, false]\n        }\n      }));\n    } else {\n      prepareCheckBox(options);\n    }\n  };\n\n  function watchLookupDataSource(options) {\n    if (options.row && options.row.watch && \"dataRow\" === options.parentType) {\n      var editorOptions = options.editorOptions || {};\n      options.editorOptions = editorOptions;\n      var selectBox;\n      var onInitialized = editorOptions.onInitialized;\n\n      editorOptions.onInitialized = function (e) {\n        onInitialized && onInitialized.apply(this, arguments);\n        selectBox = e.component;\n        selectBox.on(\"disposing\", stopWatch);\n      };\n\n      var dataSource;\n      var stopWatch = options.row.watch(function () {\n        dataSource = options.lookup.dataSource(options.row);\n        return dataSource && dataSource.filter;\n      }, function () {\n        selectBox.option(\"dataSource\", dataSource);\n      }, function (row) {\n        options.row = row;\n      });\n    }\n  }\n\n  function prepareSelectBox(options) {\n    var lookup = options.lookup;\n    var displayGetter;\n    var dataSource;\n    var postProcess;\n    var isFilterRow = \"filterRow\" === options.parentType;\n\n    if (lookup) {\n      displayGetter = (0, _data.compileGetter)(lookup.displayExpr);\n      dataSource = lookup.dataSource;\n\n      if ((0, _type.isFunction)(dataSource) && !isWrapped(dataSource)) {\n        dataSource = dataSource(options.row || {});\n        watchLookupDataSource(options);\n      }\n\n      if ((0, _type.isObject)(dataSource) || Array.isArray(dataSource)) {\n        dataSource = (0, _utils.normalizeDataSourceOptions)(dataSource);\n\n        if (isFilterRow) {\n          postProcess = dataSource.postProcess;\n\n          dataSource.postProcess = function (items) {\n            if (0 === this.pageIndex()) {\n              items = items.slice(0);\n              items.unshift(null);\n            }\n\n            if (postProcess) {\n              return postProcess.call(this, items);\n            }\n\n            return items;\n          };\n        }\n      }\n\n      var allowClearing = Boolean(lookup.allowClearing && !isFilterRow);\n      options.editorName = \"dxSelectBox\";\n      options.editorOptions = getResultConfig({\n        searchEnabled: true,\n        value: options.value,\n        valueExpr: options.lookup.valueExpr,\n        searchExpr: options.lookup.searchExpr || options.lookup.displayExpr,\n        allowClearing: allowClearing,\n        showClearButton: allowClearing,\n        displayExpr: function (data) {\n          if (null === data) {\n            return options.showAllText;\n          }\n\n          return displayGetter(data);\n        },\n        dataSource: dataSource,\n        onValueChanged: function (e) {\n          var params = [e.value];\n          !isFilterRow && params.push(e.component.option(\"text\"));\n          options.setValue.apply(this, params);\n        }\n      }, options);\n    }\n  }\n\n  function prepareCheckBox(options) {\n    options.editorName = \"dxCheckBox\";\n    options.editorOptions = getResultConfig({\n      elementAttr: {\n        id: options.id\n      },\n      value: (0, _type.isDefined)(options.value) ? options.value : void 0,\n      hoverStateEnabled: !options.readOnly,\n      focusStateEnabled: !options.readOnly,\n      activeStateEnabled: false,\n      onValueChanged: function (e) {\n        options.setValue && options.setValue(e.value, e);\n      }\n    }, options);\n  }\n\n  var createEditorCore = function (that, options) {\n    var $editorElement = (0, _renderer.default)(options.editorElement);\n\n    if (options.editorName && options.editorOptions && $editorElement[options.editorName]) {\n      if (\"dxCheckBox\" === options.editorName || \"dxSwitch\" === options.editorName) {\n        if (!options.isOnForm) {\n          $editorElement.addClass(that.addWidgetPrefix(CHECKBOX_SIZE_CLASS));\n          $editorElement.parent().addClass(EDITOR_INLINE_BLOCK);\n        }\n      }\n\n      that._createComponent($editorElement, options.editorName, options.editorOptions);\n\n      if (\"dxTextBox\" === options.editorName) {\n        $editorElement.dxTextBox(\"instance\").registerKeyHandler(\"enter\", _common.noop);\n      }\n\n      if (\"dxDateBox\" === options.editorName) {\n        $editorElement.dxDateBox(\"instance\").registerKeyHandler(\"enter\", function () {\n          return true;\n        });\n      }\n\n      if (\"dxTextArea\" === options.editorName) {\n        $editorElement.dxTextArea(\"instance\").registerKeyHandler(\"enter\", function (event) {\n          if (\"enter\" === (0, _index.normalizeKeyName)(event) && !event.ctrlKey && !event.shiftKey) {\n            event.stopPropagation();\n          }\n        });\n      }\n    }\n  };\n\n  return {\n    createEditor: function ($container, options) {\n      options.cancel = false;\n      options.editorElement = (0, _element.getPublicElement)($container);\n\n      if (!(0, _type.isDefined)(options.tabIndex)) {\n        options.tabIndex = this.option(\"tabIndex\");\n      }\n\n      if (options.lookup) {\n        prepareSelectBox(options);\n      } else {\n        switch (options.dataType) {\n          case \"date\":\n          case \"datetime\":\n            prepareDateBox(options);\n            break;\n\n          case \"boolean\":\n            prepareBooleanEditor(options);\n            break;\n\n          case \"number\":\n            prepareNumberBox(options);\n            break;\n\n          default:\n            prepareTextBox(options);\n        }\n      }\n\n      var editorName = options.editorName;\n      this.executeAction(\"onEditorPreparing\", options);\n\n      if (options.cancel) {\n        return;\n      } else {\n        if (\"dataRow\" === options.parentType && options.editorType && editorName === options.editorName) {\n          options.editorName = options.editorType;\n        }\n      }\n\n      if (\"dataRow\" === options.parentType && !options.isOnForm && !(0, _type.isDefined)(options.editorOptions.showValidationMark)) {\n        options.editorOptions.showValidationMark = false;\n      }\n\n      createEditorCore(this, options);\n      this.executeAction(\"onEditorPrepared\", options);\n    }\n  };\n}();\n\nvar _default = EditorFactoryMixin;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/shared/ui.editor_factory_mixin.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_common","_events_engine","_type","_variable_wrapper","_data","_browser","_extend","_devices","_element","_utils","_index","obj","__esModule","isWrapped","CHECKBOX_SIZE_CLASS","EDITOR_INLINE_BLOCK","EditorFactoryMixin","getResultConfig","config","options","extend","readOnly","placeholder","inputAttr","id","tabIndex","editorOptions","checkEnterBug","msie","mozilla","real","ios","getTextEditorConfig","data","isEnterBug","sharedData","width","value","onValueChanged","e","needDelayedUpdate","parentType","isInputOrKeyUpEvent","event","type","updateValue","notFireEvent","setValue","clearTimeout","valueChangeTimeout","setTimeout","isDefined","updateValueTimeout","onKeyDown","normalizeKeyName","trigger","component","_input","valueChangeEvent","prepareDateBox","editorName","args","blur","focus","displayFormat","format","dataType","dateSerializationFormat","prepareTextBox","isSearching","toString","editorType","mode","prepareNumberBox","prepareBooleanEditor","prepareSelectBox","lookup","displayExpr","trueText","falseText","dataSource","prepareCheckBox","watchLookupDataSource","row","watch","selectBox","onInitialized","apply","arguments","on","stopWatch","filter","option","displayGetter","postProcess","isFilterRow","compileGetter","isFunction","isObject","Array","isArray","normalizeDataSourceOptions","items","pageIndex","slice","unshift","call","allowClearing","Boolean","searchEnabled","valueExpr","searchExpr","showClearButton","showAllText","params","push","elementAttr","hoverStateEnabled","focusStateEnabled","activeStateEnabled","createEditorCore","that","$editorElement","editorElement","isOnForm","addClass","addWidgetPrefix","parent","_createComponent","dxTextBox","registerKeyHandler","noop","dxDateBox","dxTextArea","ctrlKey","shiftKey","stopPropagation","createEditor","$container","cancel","getPublicElement","executeAction","showValidationMark","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/shared/ui.editor_factory_mixin.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _variable_wrapper = _interopRequireDefault(require(\"../../core/utils/variable_wrapper\"));\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _browser = _interopRequireDefault(require(\"../../core/utils/browser\"));\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _element = require(\"../../core/element\");\r\nvar _utils = require(\"../../data/data_source/utils\");\r\nvar _index = require(\"../../events/utils/index\");\r\nrequire(\"../text_box\");\r\nrequire(\"../number_box\");\r\nrequire(\"../check_box\");\r\nrequire(\"../select_box\");\r\nrequire(\"../date_box\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar isWrapped = _variable_wrapper.default.isWrapped;\r\nvar CHECKBOX_SIZE_CLASS = \"checkbox-size\";\r\nvar EDITOR_INLINE_BLOCK = \"dx-editor-inline-block\";\r\nvar EditorFactoryMixin = function() {\r\n    var getResultConfig = function(config, options) {\r\n        return (0, _extend.extend)(config, {\r\n            readOnly: options.readOnly,\r\n            placeholder: options.placeholder,\r\n            inputAttr: {\r\n                id: options.id\r\n            },\r\n            tabIndex: options.tabIndex\r\n        }, options.editorOptions)\r\n    };\r\n    var checkEnterBug = function() {\r\n        return _browser.default.msie || _browser.default.mozilla || _devices.default.real().ios\r\n    };\r\n    var getTextEditorConfig = function(options) {\r\n        var data = {};\r\n        var isEnterBug = checkEnterBug();\r\n        var sharedData = options.sharedData || data;\r\n        return getResultConfig({\r\n            placeholder: options.placeholder,\r\n            width: options.width,\r\n            value: options.value,\r\n            onValueChanged: function(e) {\r\n                var needDelayedUpdate = \"filterRow\" === options.parentType || \"searchPanel\" === options.parentType;\r\n                var isInputOrKeyUpEvent = e.event && (\"input\" === e.event.type || \"keyup\" === e.event.type);\r\n                var updateValue = function(e, notFireEvent) {\r\n                    options && options.setValue(e.value, notFireEvent)\r\n                };\r\n                clearTimeout(data.valueChangeTimeout);\r\n                if (isInputOrKeyUpEvent && needDelayedUpdate) {\r\n                    sharedData.valueChangeTimeout = data.valueChangeTimeout = setTimeout(function() {\r\n                        updateValue(e, data.valueChangeTimeout !== sharedData.valueChangeTimeout)\r\n                    }, (0, _type.isDefined)(options.updateValueTimeout) ? options.updateValueTimeout : 0)\r\n                } else {\r\n                    updateValue(e)\r\n                }\r\n            },\r\n            onKeyDown: function(e) {\r\n                if (isEnterBug && \"enter\" === (0, _index.normalizeKeyName)(e.event)) {\r\n                    _events_engine.default.trigger((0, _renderer.default)(e.component._input()), \"change\")\r\n                }\r\n            },\r\n            valueChangeEvent: \"change\" + (\"filterRow\" === options.parentType ? \" keyup input\" : \"\")\r\n        }, options)\r\n    };\r\n    var prepareDateBox = function(options) {\r\n        options.editorName = \"dxDateBox\";\r\n        options.editorOptions = getResultConfig({\r\n            value: options.value,\r\n            onValueChanged: function(args) {\r\n                options.setValue(args.value)\r\n            },\r\n            onKeyDown: function(e) {\r\n                if (checkEnterBug() && \"enter\" === (0, _index.normalizeKeyName)(e.event)) {\r\n                    e.component.blur();\r\n                    e.component.focus()\r\n                }\r\n            },\r\n            displayFormat: options.format,\r\n            type: options.dataType,\r\n            dateSerializationFormat: null,\r\n            width: \"filterBuilder\" === options.parentType ? void 0 : \"auto\"\r\n        }, options)\r\n    };\r\n    var prepareTextBox = function(options) {\r\n        var config = getTextEditorConfig(options);\r\n        var isSearching = \"searchPanel\" === options.parentType;\r\n        var toString = function(value) {\r\n            return (0, _type.isDefined)(value) ? value.toString() : \"\"\r\n        };\r\n        if (options.editorType && \"dxTextBox\" !== options.editorType) {\r\n            config.value = options.value\r\n        } else {\r\n            config.value = toString(options.value)\r\n        }\r\n        config.valueChangeEvent += isSearching ? \" keyup input search\" : \"\";\r\n        config.mode = config.mode || (isSearching ? \"search\" : \"text\");\r\n        options.editorName = \"dxTextBox\";\r\n        options.editorOptions = config\r\n    };\r\n    var prepareNumberBox = function(options) {\r\n        var config = getTextEditorConfig(options);\r\n        config.value = (0, _type.isDefined)(options.value) ? options.value : null;\r\n        options.editorName = \"dxNumberBox\";\r\n        options.editorOptions = config\r\n    };\r\n    var prepareBooleanEditor = function(options) {\r\n        if (\"filterRow\" === options.parentType || \"filterBuilder\" === options.parentType) {\r\n            prepareSelectBox((0, _extend.extend)(options, {\r\n                lookup: {\r\n                    displayExpr: function(data) {\r\n                        if (true === data) {\r\n                            return options.trueText || \"true\"\r\n                        } else {\r\n                            if (false === data) {\r\n                                return options.falseText || \"false\"\r\n                            }\r\n                        }\r\n                    },\r\n                    dataSource: [true, false]\r\n                }\r\n            }))\r\n        } else {\r\n            prepareCheckBox(options)\r\n        }\r\n    };\r\n\r\n    function watchLookupDataSource(options) {\r\n        if (options.row && options.row.watch && \"dataRow\" === options.parentType) {\r\n            var editorOptions = options.editorOptions || {};\r\n            options.editorOptions = editorOptions;\r\n            var selectBox;\r\n            var onInitialized = editorOptions.onInitialized;\r\n            editorOptions.onInitialized = function(e) {\r\n                onInitialized && onInitialized.apply(this, arguments);\r\n                selectBox = e.component;\r\n                selectBox.on(\"disposing\", stopWatch)\r\n            };\r\n            var dataSource;\r\n            var stopWatch = options.row.watch(function() {\r\n                dataSource = options.lookup.dataSource(options.row);\r\n                return dataSource && dataSource.filter\r\n            }, function() {\r\n                selectBox.option(\"dataSource\", dataSource)\r\n            }, function(row) {\r\n                options.row = row\r\n            })\r\n        }\r\n    }\r\n\r\n    function prepareSelectBox(options) {\r\n        var lookup = options.lookup;\r\n        var displayGetter;\r\n        var dataSource;\r\n        var postProcess;\r\n        var isFilterRow = \"filterRow\" === options.parentType;\r\n        if (lookup) {\r\n            displayGetter = (0, _data.compileGetter)(lookup.displayExpr);\r\n            dataSource = lookup.dataSource;\r\n            if ((0, _type.isFunction)(dataSource) && !isWrapped(dataSource)) {\r\n                dataSource = dataSource(options.row || {});\r\n                watchLookupDataSource(options)\r\n            }\r\n            if ((0, _type.isObject)(dataSource) || Array.isArray(dataSource)) {\r\n                dataSource = (0, _utils.normalizeDataSourceOptions)(dataSource);\r\n                if (isFilterRow) {\r\n                    postProcess = dataSource.postProcess;\r\n                    dataSource.postProcess = function(items) {\r\n                        if (0 === this.pageIndex()) {\r\n                            items = items.slice(0);\r\n                            items.unshift(null)\r\n                        }\r\n                        if (postProcess) {\r\n                            return postProcess.call(this, items)\r\n                        }\r\n                        return items\r\n                    }\r\n                }\r\n            }\r\n            var allowClearing = Boolean(lookup.allowClearing && !isFilterRow);\r\n            options.editorName = \"dxSelectBox\";\r\n            options.editorOptions = getResultConfig({\r\n                searchEnabled: true,\r\n                value: options.value,\r\n                valueExpr: options.lookup.valueExpr,\r\n                searchExpr: options.lookup.searchExpr || options.lookup.displayExpr,\r\n                allowClearing: allowClearing,\r\n                showClearButton: allowClearing,\r\n                displayExpr: function(data) {\r\n                    if (null === data) {\r\n                        return options.showAllText\r\n                    }\r\n                    return displayGetter(data)\r\n                },\r\n                dataSource: dataSource,\r\n                onValueChanged: function(e) {\r\n                    var params = [e.value];\r\n                    !isFilterRow && params.push(e.component.option(\"text\"));\r\n                    options.setValue.apply(this, params)\r\n                }\r\n            }, options)\r\n        }\r\n    }\r\n\r\n    function prepareCheckBox(options) {\r\n        options.editorName = \"dxCheckBox\";\r\n        options.editorOptions = getResultConfig({\r\n            elementAttr: {\r\n                id: options.id\r\n            },\r\n            value: (0, _type.isDefined)(options.value) ? options.value : void 0,\r\n            hoverStateEnabled: !options.readOnly,\r\n            focusStateEnabled: !options.readOnly,\r\n            activeStateEnabled: false,\r\n            onValueChanged: function(e) {\r\n                options.setValue && options.setValue(e.value, e)\r\n            }\r\n        }, options)\r\n    }\r\n    var createEditorCore = function(that, options) {\r\n        var $editorElement = (0, _renderer.default)(options.editorElement);\r\n        if (options.editorName && options.editorOptions && $editorElement[options.editorName]) {\r\n            if (\"dxCheckBox\" === options.editorName || \"dxSwitch\" === options.editorName) {\r\n                if (!options.isOnForm) {\r\n                    $editorElement.addClass(that.addWidgetPrefix(CHECKBOX_SIZE_CLASS));\r\n                    $editorElement.parent().addClass(EDITOR_INLINE_BLOCK)\r\n                }\r\n            }\r\n            that._createComponent($editorElement, options.editorName, options.editorOptions);\r\n            if (\"dxTextBox\" === options.editorName) {\r\n                $editorElement.dxTextBox(\"instance\").registerKeyHandler(\"enter\", _common.noop)\r\n            }\r\n            if (\"dxDateBox\" === options.editorName) {\r\n                $editorElement.dxDateBox(\"instance\").registerKeyHandler(\"enter\", function() {\r\n                    return true\r\n                })\r\n            }\r\n            if (\"dxTextArea\" === options.editorName) {\r\n                $editorElement.dxTextArea(\"instance\").registerKeyHandler(\"enter\", function(event) {\r\n                    if (\"enter\" === (0, _index.normalizeKeyName)(event) && !event.ctrlKey && !event.shiftKey) {\r\n                        event.stopPropagation()\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    };\r\n    return {\r\n        createEditor: function($container, options) {\r\n            options.cancel = false;\r\n            options.editorElement = (0, _element.getPublicElement)($container);\r\n            if (!(0, _type.isDefined)(options.tabIndex)) {\r\n                options.tabIndex = this.option(\"tabIndex\")\r\n            }\r\n            if (options.lookup) {\r\n                prepareSelectBox(options)\r\n            } else {\r\n                switch (options.dataType) {\r\n                    case \"date\":\r\n                    case \"datetime\":\r\n                        prepareDateBox(options);\r\n                        break;\r\n                    case \"boolean\":\r\n                        prepareBooleanEditor(options);\r\n                        break;\r\n                    case \"number\":\r\n                        prepareNumberBox(options);\r\n                        break;\r\n                    default:\r\n                        prepareTextBox(options)\r\n                }\r\n            }\r\n            var editorName = options.editorName;\r\n            this.executeAction(\"onEditorPreparing\", options);\r\n            if (options.cancel) {\r\n                return\r\n            } else {\r\n                if (\"dataRow\" === options.parentType && options.editorType && editorName === options.editorName) {\r\n                    options.editorName = options.editorType\r\n                }\r\n            }\r\n            if (\"dataRow\" === options.parentType && !options.isOnForm && !(0, _type.isDefined)(options.editorOptions.showValidationMark)) {\r\n                options.editorOptions.showValidationMark = false\r\n            }\r\n            createEditorCore(this, options);\r\n            this.executeAction(\"onEditorPrepared\", options)\r\n        }\r\n    }\r\n}();\r\nvar _default = EditorFactoryMixin;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}