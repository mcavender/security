{"ast":null,"code":"/**\r\n * DevExtreme (ui/hierarchical_collection/ui.hierarchical_collection_widget.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _data = require(\"../../core/utils/data\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _icon = require(\"../../core/utils/icon\");\n\nvar _ui = _interopRequireDefault(require(\"./ui.data_adapter\"));\n\nvar _uiCollection_widget = _interopRequireDefault(require(\"../collection/ui.collection_widget.edit\"));\n\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _common = require(\"../../core/utils/common\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\n\nvar HierarchicalCollectionWidget = _uiCollection_widget.default.inherit({\n  _getDefaultOptions: function () {\n    return (0, _extend.extend)(this.callBase(), {\n      keyExpr: \"id\",\n      displayExpr: \"text\",\n      selectedExpr: \"selected\",\n      disabledExpr: \"disabled\",\n      itemsExpr: \"items\",\n      hoverStateEnabled: true,\n      parentIdExpr: \"parentId\",\n      expandedExpr: \"expanded\"\n    });\n  },\n  _defaultOptionsRules: function () {\n    return this.callBase().concat([{\n      device: function () {\n        return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator();\n      },\n      options: {\n        focusStateEnabled: true\n      }\n    }]);\n  },\n  _init: function () {\n    this.callBase();\n\n    this._initAccessors();\n\n    this._initDataAdapter();\n\n    this._initDynamicTemplates();\n  },\n  _initDataSource: function () {\n    this.callBase();\n    this._dataSource && this._dataSource.paginate(false);\n  },\n  _initDataAdapter: function () {\n    var accessors = this._createDataAdapterAccessors();\n\n    this._dataAdapter = new _ui.default((0, _extend.extend)({\n      dataAccessors: {\n        getters: accessors.getters,\n        setters: accessors.setters\n      },\n      items: this.option(\"items\")\n    }, this._getDataAdapterOptions()));\n  },\n  _getDataAdapterOptions: _common.noop,\n  _initDynamicTemplates: function () {\n    var that = this;\n\n    this._templateManager.addDefaultTemplates({\n      item: new _bindable_template.BindableTemplate(function ($container, itemData) {\n        $container.html(itemData.html).append(this._getIconContainer(itemData)).append(this._getTextContainer(itemData)).append(this._getPopoutContainer(itemData));\n\n        that._addContentClasses(itemData, $container.parent());\n      }.bind(this), [\"text\", \"html\", \"items\", \"icon\"], this.option(\"integrationOptions.watchMethod\"), {\n        text: this._displayGetter,\n        items: this._itemsGetter\n      })\n    });\n  },\n  _getIconContainer: function (itemData) {\n    return itemData.icon ? (0, _icon.getImageContainer)(itemData.icon) : void 0;\n  },\n  _getTextContainer: function (itemData) {\n    return (0, _renderer.default)(\"<span>\").text(itemData.text);\n  },\n  _getPopoutContainer: _common.noop,\n  _addContentClasses: _common.noop,\n  _initAccessors: function () {\n    var that = this;\n    (0, _iterator.each)(this._getAccessors(), function (_, accessor) {\n      that._compileAccessor(accessor);\n    });\n\n    this._compileDisplayGetter();\n  },\n  _getAccessors: function () {\n    return [\"key\", \"selected\", \"items\", \"disabled\", \"parentId\", \"expanded\"];\n  },\n  _getChildNodes: function (node) {\n    var that = this;\n    var arr = [];\n    (0, _iterator.each)(node.internalFields.childrenKeys, function (_, key) {\n      var childNode = that._dataAdapter.getNodeByKey(key);\n\n      arr.push(childNode);\n    });\n    return arr;\n  },\n  _hasChildren: function (node) {\n    return node && node.internalFields.childrenKeys.length;\n  },\n  _compileAccessor: function (optionName) {\n    var getter = \"_\" + optionName + \"Getter\";\n    var setter = \"_\" + optionName + \"Setter\";\n    var optionExpr = this.option(optionName + \"Expr\");\n\n    if (!optionExpr) {\n      this[getter] = _common.noop;\n      this[setter] = _common.noop;\n      return;\n    } else {\n      if ((0, _type.isFunction)(optionExpr)) {\n        this[setter] = function (obj, value) {\n          obj[optionExpr()] = value;\n        };\n\n        this[getter] = function (obj) {\n          return obj[optionExpr()];\n        };\n\n        return;\n      }\n    }\n\n    this[getter] = (0, _data.compileGetter)(optionExpr);\n    this[setter] = (0, _data.compileSetter)(optionExpr);\n  },\n  _createDataAdapterAccessors: function () {\n    var that = this;\n    var accessors = {\n      getters: {},\n      setters: {}\n    };\n    (0, _iterator.each)(this._getAccessors(), function (_, accessor) {\n      var getterName = \"_\" + accessor + \"Getter\";\n      var setterName = \"_\" + accessor + \"Setter\";\n      var newAccessor = \"parentId\" === accessor ? \"parentKey\" : accessor;\n      accessors.getters[newAccessor] = that[getterName];\n      accessors.setters[newAccessor] = that[setterName];\n    });\n    accessors.getters.display = !this._displayGetter ? function (itemData) {\n      return itemData.text;\n    } : this._displayGetter;\n    return accessors;\n  },\n  _initMarkup: function () {\n    this.callBase();\n\n    this._addWidgetClass();\n  },\n  _addWidgetClass: function () {\n    this._focusTarget().addClass(this._widgetClass());\n  },\n  _widgetClass: _common.noop,\n  _renderItemFrame: function (index, itemData) {\n    var $itemFrame = this.callBase.apply(this, arguments);\n    $itemFrame.toggleClass(DISABLED_STATE_CLASS, !!this._disabledGetter(itemData));\n    return $itemFrame;\n  },\n  _optionChanged: function (args) {\n    switch (args.name) {\n      case \"displayExpr\":\n      case \"keyExpr\":\n        this._initAccessors();\n\n        this._initDynamicTemplates();\n\n        this.repaint();\n        break;\n\n      case \"itemsExpr\":\n      case \"selectedExpr\":\n      case \"disabledExpr\":\n      case \"expandedExpr\":\n      case \"parentIdExpr\":\n        this._initAccessors();\n\n        this._initDataAdapter();\n\n        this.repaint();\n        break;\n\n      case \"items\":\n        this._initDataAdapter();\n\n        this.callBase(args);\n        break;\n\n      default:\n        this.callBase(args);\n    }\n  }\n});\n\nvar _default = HierarchicalCollectionWidget;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/hierarchical_collection/ui.hierarchical_collection_widget.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_data","_extend","_iterator","_devices","_icon","_ui","_uiCollection_widget","_bindable_template","_type","_common","obj","__esModule","DISABLED_STATE_CLASS","HierarchicalCollectionWidget","inherit","_getDefaultOptions","extend","callBase","keyExpr","displayExpr","selectedExpr","disabledExpr","itemsExpr","hoverStateEnabled","parentIdExpr","expandedExpr","_defaultOptionsRules","concat","device","real","deviceType","isSimulator","options","focusStateEnabled","_init","_initAccessors","_initDataAdapter","_initDynamicTemplates","_initDataSource","_dataSource","paginate","accessors","_createDataAdapterAccessors","_dataAdapter","dataAccessors","getters","setters","items","option","_getDataAdapterOptions","noop","that","_templateManager","addDefaultTemplates","item","BindableTemplate","$container","itemData","html","append","_getIconContainer","_getTextContainer","_getPopoutContainer","_addContentClasses","parent","bind","text","_displayGetter","_itemsGetter","icon","getImageContainer","each","_getAccessors","_","accessor","_compileAccessor","_compileDisplayGetter","_getChildNodes","node","arr","internalFields","childrenKeys","key","childNode","getNodeByKey","push","_hasChildren","length","optionName","getter","setter","optionExpr","isFunction","value","compileGetter","compileSetter","getterName","setterName","newAccessor","display","_initMarkup","_addWidgetClass","_focusTarget","addClass","_widgetClass","_renderItemFrame","index","$itemFrame","apply","arguments","toggleClass","_disabledGetter","_optionChanged","args","name","repaint","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/hierarchical_collection/ui.hierarchical_collection_widget.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _data = require(\"../../core/utils/data\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _icon = require(\"../../core/utils/icon\");\r\nvar _ui = _interopRequireDefault(require(\"./ui.data_adapter\"));\r\nvar _uiCollection_widget = _interopRequireDefault(require(\"../collection/ui.collection_widget.edit\"));\r\nvar _bindable_template = require(\"../../core/templates/bindable_template\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _common = require(\"../../core/utils/common\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar DISABLED_STATE_CLASS = \"dx-state-disabled\";\r\nvar HierarchicalCollectionWidget = _uiCollection_widget.default.inherit({\r\n    _getDefaultOptions: function() {\r\n        return (0, _extend.extend)(this.callBase(), {\r\n            keyExpr: \"id\",\r\n            displayExpr: \"text\",\r\n            selectedExpr: \"selected\",\r\n            disabledExpr: \"disabled\",\r\n            itemsExpr: \"items\",\r\n            hoverStateEnabled: true,\r\n            parentIdExpr: \"parentId\",\r\n            expandedExpr: \"expanded\"\r\n        })\r\n    },\r\n    _defaultOptionsRules: function() {\r\n        return this.callBase().concat([{\r\n            device: function() {\r\n                return \"desktop\" === _devices.default.real().deviceType && !_devices.default.isSimulator()\r\n            },\r\n            options: {\r\n                focusStateEnabled: true\r\n            }\r\n        }])\r\n    },\r\n    _init: function() {\r\n        this.callBase();\r\n        this._initAccessors();\r\n        this._initDataAdapter();\r\n        this._initDynamicTemplates()\r\n    },\r\n    _initDataSource: function() {\r\n        this.callBase();\r\n        this._dataSource && this._dataSource.paginate(false)\r\n    },\r\n    _initDataAdapter: function() {\r\n        var accessors = this._createDataAdapterAccessors();\r\n        this._dataAdapter = new _ui.default((0, _extend.extend)({\r\n            dataAccessors: {\r\n                getters: accessors.getters,\r\n                setters: accessors.setters\r\n            },\r\n            items: this.option(\"items\")\r\n        }, this._getDataAdapterOptions()))\r\n    },\r\n    _getDataAdapterOptions: _common.noop,\r\n    _initDynamicTemplates: function() {\r\n        var that = this;\r\n        this._templateManager.addDefaultTemplates({\r\n            item: new _bindable_template.BindableTemplate(function($container, itemData) {\r\n                $container.html(itemData.html).append(this._getIconContainer(itemData)).append(this._getTextContainer(itemData)).append(this._getPopoutContainer(itemData));\r\n                that._addContentClasses(itemData, $container.parent())\r\n            }.bind(this), [\"text\", \"html\", \"items\", \"icon\"], this.option(\"integrationOptions.watchMethod\"), {\r\n                text: this._displayGetter,\r\n                items: this._itemsGetter\r\n            })\r\n        })\r\n    },\r\n    _getIconContainer: function(itemData) {\r\n        return itemData.icon ? (0, _icon.getImageContainer)(itemData.icon) : void 0\r\n    },\r\n    _getTextContainer: function(itemData) {\r\n        return (0, _renderer.default)(\"<span>\").text(itemData.text)\r\n    },\r\n    _getPopoutContainer: _common.noop,\r\n    _addContentClasses: _common.noop,\r\n    _initAccessors: function() {\r\n        var that = this;\r\n        (0, _iterator.each)(this._getAccessors(), function(_, accessor) {\r\n            that._compileAccessor(accessor)\r\n        });\r\n        this._compileDisplayGetter()\r\n    },\r\n    _getAccessors: function() {\r\n        return [\"key\", \"selected\", \"items\", \"disabled\", \"parentId\", \"expanded\"]\r\n    },\r\n    _getChildNodes: function(node) {\r\n        var that = this;\r\n        var arr = [];\r\n        (0, _iterator.each)(node.internalFields.childrenKeys, function(_, key) {\r\n            var childNode = that._dataAdapter.getNodeByKey(key);\r\n            arr.push(childNode)\r\n        });\r\n        return arr\r\n    },\r\n    _hasChildren: function(node) {\r\n        return node && node.internalFields.childrenKeys.length\r\n    },\r\n    _compileAccessor: function(optionName) {\r\n        var getter = \"_\" + optionName + \"Getter\";\r\n        var setter = \"_\" + optionName + \"Setter\";\r\n        var optionExpr = this.option(optionName + \"Expr\");\r\n        if (!optionExpr) {\r\n            this[getter] = _common.noop;\r\n            this[setter] = _common.noop;\r\n            return\r\n        } else {\r\n            if ((0, _type.isFunction)(optionExpr)) {\r\n                this[setter] = function(obj, value) {\r\n                    obj[optionExpr()] = value\r\n                };\r\n                this[getter] = function(obj) {\r\n                    return obj[optionExpr()]\r\n                };\r\n                return\r\n            }\r\n        }\r\n        this[getter] = (0, _data.compileGetter)(optionExpr);\r\n        this[setter] = (0, _data.compileSetter)(optionExpr)\r\n    },\r\n    _createDataAdapterAccessors: function() {\r\n        var that = this;\r\n        var accessors = {\r\n            getters: {},\r\n            setters: {}\r\n        };\r\n        (0, _iterator.each)(this._getAccessors(), function(_, accessor) {\r\n            var getterName = \"_\" + accessor + \"Getter\";\r\n            var setterName = \"_\" + accessor + \"Setter\";\r\n            var newAccessor = \"parentId\" === accessor ? \"parentKey\" : accessor;\r\n            accessors.getters[newAccessor] = that[getterName];\r\n            accessors.setters[newAccessor] = that[setterName]\r\n        });\r\n        accessors.getters.display = !this._displayGetter ? function(itemData) {\r\n            return itemData.text\r\n        } : this._displayGetter;\r\n        return accessors\r\n    },\r\n    _initMarkup: function() {\r\n        this.callBase();\r\n        this._addWidgetClass()\r\n    },\r\n    _addWidgetClass: function() {\r\n        this._focusTarget().addClass(this._widgetClass())\r\n    },\r\n    _widgetClass: _common.noop,\r\n    _renderItemFrame: function(index, itemData) {\r\n        var $itemFrame = this.callBase.apply(this, arguments);\r\n        $itemFrame.toggleClass(DISABLED_STATE_CLASS, !!this._disabledGetter(itemData));\r\n        return $itemFrame\r\n    },\r\n    _optionChanged: function(args) {\r\n        switch (args.name) {\r\n            case \"displayExpr\":\r\n            case \"keyExpr\":\r\n                this._initAccessors();\r\n                this._initDynamicTemplates();\r\n                this.repaint();\r\n                break;\r\n            case \"itemsExpr\":\r\n            case \"selectedExpr\":\r\n            case \"disabledExpr\":\r\n            case \"expandedExpr\":\r\n            case \"parentIdExpr\":\r\n                this._initAccessors();\r\n                this._initDataAdapter();\r\n                this.repaint();\r\n                break;\r\n            case \"items\":\r\n                this._initDataAdapter();\r\n                this.callBase(args);\r\n                break;\r\n            default:\r\n                this.callBase(args)\r\n        }\r\n    }\r\n});\r\nvar _default = HierarchicalCollectionWidget;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}