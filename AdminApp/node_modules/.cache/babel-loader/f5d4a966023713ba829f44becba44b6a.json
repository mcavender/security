{"ast":null,"code":"/**\r\n * DevExtreme (ui/context_menu/ui.context_menu.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _dom = require(\"../../core/utils/dom\");\n\nvar _element = require(\"../../core/element\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _array = require(\"../../core/utils/array\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _fx = _interopRequireDefault(require(\"../../animation/fx\"));\n\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _overlay = _interopRequireDefault(require(\"../overlay\"));\n\nvar _ui = _interopRequireDefault(require(\"./ui.menu_base\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar DX_MENU_CLASS = \"dx-menu\";\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\nvar DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\nvar DX_MENU_ITEM_WRAPPER_CLASS = DX_MENU_ITEM_CLASS + \"-wrapper\";\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\nvar DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\nvar DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar FOCUS_FIRST = \"first\";\nvar FOCUS_LAST = \"last\";\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\nvar LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP, FOCUS_DOWN, FOCUS_FIRST, FOCUS_LAST];\nvar DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\n\nvar ContextMenu = function (_MenuBase) {\n  _inheritsLoose(ContextMenu, _MenuBase);\n\n  function ContextMenu() {\n    return _MenuBase.apply(this, arguments) || this;\n  }\n\n  var _proto = ContextMenu.prototype;\n\n  _proto.getShowEvent = function (showEventOption) {\n    var result = null;\n\n    if ((0, _type.isObject)(showEventOption)) {\n      if (null !== showEventOption.name) {\n        result = showEventOption.name || DEFAULT_SHOW_EVENT;\n      }\n    } else {\n      result = showEventOption;\n    }\n\n    return result;\n  };\n\n  _proto.getShowDelay = function (showEventOption) {\n    return (0, _type.isObject)(showEventOption) && showEventOption.delay;\n  };\n\n  _proto._getDefaultOptions = function () {\n    return (0, _extend.extend)(_MenuBase.prototype._getDefaultOptions.call(this), {\n      showEvent: DEFAULT_SHOW_EVENT,\n      closeOnOutsideClick: true,\n      position: {\n        at: \"top left\",\n        my: \"top left\"\n      },\n      onShowing: null,\n      onShown: null,\n      onSubmenuCreated: null,\n      onHiding: null,\n      onHidden: null,\n      onPositioning: null,\n      submenuDirection: \"auto\",\n      visible: false,\n      target: void 0,\n      onLeftFirstItem: null,\n      onLeftLastItem: null,\n      onCloseRootSubmenu: null,\n      onExpandLastSubmenu: null\n    });\n  };\n\n  _proto._defaultOptionsRules = function () {\n    return _MenuBase.prototype._defaultOptionsRules.call(this).concat([{\n      device: function () {\n        return !(0, _window.hasWindow)();\n      },\n      options: {\n        animation: null\n      }\n    }]);\n  };\n\n  _proto._initActions = function () {\n    var _this = this;\n\n    this._actions = {};\n    (0, _iterator.each)(ACTIONS, function (index, action) {\n      _this._actions[action] = _this._createActionByOption(action) || _common.noop;\n    });\n  };\n\n  _proto._setOptionsByReference = function () {\n    _MenuBase.prototype._setOptionsByReference.call(this);\n\n    (0, _extend.extend)(this._optionsByReference, {\n      animation: true,\n      selectedItem: true\n    });\n  };\n\n  _proto._focusInHandler = function () {};\n\n  _proto._itemContainer = function () {\n    return this._overlay ? this._overlay.$content() : (0, _renderer.default)();\n  };\n\n  _proto._eventBindingTarget = function () {\n    return this._itemContainer();\n  };\n\n  _proto.itemsContainer = function () {\n    return this._overlay ? this._overlay.$content() : void 0;\n  };\n\n  _proto._supportedKeys = function () {\n    var _this2 = this;\n\n    var selectItem = function () {\n      var $item = (0, _renderer.default)(_this2.option(\"focusedElement\"));\n\n      _this2.hide();\n\n      if (!$item.length || !_this2._isSelectionEnabled()) {\n        return;\n      }\n\n      _this2.selectItem($item[0]);\n    };\n\n    return (0, _extend.extend)(_MenuBase.prototype._supportedKeys.call(this), {\n      space: selectItem,\n      escape: this.hide\n    });\n  };\n\n  _proto._getActiveItem = function () {\n    var $availableItems = this._getAvailableItems();\n\n    var $focusedItem = $availableItems.filter(\".\".concat(DX_STATE_FOCUSED_CLASS));\n    var $hoveredItem = $availableItems.filter(\".\".concat(DX_STATE_HOVER_CLASS));\n    var $hoveredItemContainer = $hoveredItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n\n    if ($hoveredItemContainer.find(\".\".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {\n      return $focusedItem;\n    }\n\n    if ($hoveredItem.length) {\n      return $hoveredItem;\n    }\n\n    return _MenuBase.prototype._getActiveItem.call(this);\n  };\n\n  _proto._moveFocus = function (location) {\n    var $items = this._getItemsByLocation(location);\n\n    var $oldTarget = this._getActiveItem(true);\n\n    var $hoveredItem = this.itemsContainer().find(\".\".concat(DX_STATE_HOVER_CLASS));\n    var $focusedItem = (0, _renderer.default)(this.option(\"focusedElement\"));\n    var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\n    var $newTarget;\n\n    switch (location) {\n      case FOCUS_UP:\n        $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\n\n        this._setFocusedElement($newTarget);\n\n        if ($oldTarget.is($items.first())) {\n          this._actions.onLeftFirstItem($oldTarget);\n        }\n\n        break;\n\n      case FOCUS_DOWN:\n        $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\n\n        this._setFocusedElement($newTarget);\n\n        if ($oldTarget.is($items.last())) {\n          this._actions.onLeftLastItem($oldTarget);\n        }\n\n        break;\n\n      case FOCUS_RIGHT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\n\n        this._setFocusedElement($newTarget);\n\n        break;\n\n      case FOCUS_LEFT:\n        $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\n\n        this._setFocusedElement($newTarget);\n\n        break;\n\n      case FOCUS_FIRST:\n        $newTarget = $items.first();\n\n        this._setFocusedElement($newTarget);\n\n        break;\n\n      case FOCUS_LAST:\n        $newTarget = $items.last();\n\n        this._setFocusedElement($newTarget);\n\n        break;\n\n      default:\n        return _MenuBase.prototype._moveFocus.call(this, location);\n    }\n  };\n\n  _proto._setFocusedElement = function ($element) {\n    if ($element && 0 !== $element.length) {\n      this.option(\"focusedElement\", (0, _element.getPublicElement)($element));\n    }\n  };\n\n  _proto._getItemsByLocation = function (location) {\n    var $activeItem = this._getActiveItem(true);\n\n    var $items;\n\n    if ((0, _array.inArray)(location, LOCAL_SUBMENU_DIRECTIONS) >= 0) {\n      $items = $activeItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).children().children();\n    }\n\n    $items = this._getAvailableItems($items);\n    return $items;\n  };\n\n  _proto._getAriaTarget = function () {\n    return this.$element();\n  };\n\n  _proto._refreshActiveDescendant = function () {\n    if ((0, _type.isDefined)(this._overlay)) {\n      var $target = this._overlay.$content();\n\n      _MenuBase.prototype._refreshActiveDescendant.call(this, $target);\n    }\n  };\n\n  _proto._hideSubmenuHandler = function () {\n    var $curItem = this._getActiveItem(true);\n\n    var $parentItem = $curItem.parents(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).first();\n\n    if ($parentItem.length) {\n      this._hideSubmenusOnSameLevel($parentItem);\n\n      this._hideSubmenu($curItem.closest(\".\".concat(DX_SUBMENU_CLASS)));\n\n      return $parentItem;\n    }\n\n    this._actions.onCloseRootSubmenu($curItem);\n\n    return $curItem;\n  };\n\n  _proto._expandSubmenuHandler = function ($items, location) {\n    var $curItem = this._getActiveItem(true);\n\n    var itemData = this._getItemData($curItem);\n\n    var node = this._dataAdapter.getNodeByItem(itemData);\n\n    var isItemHasSubmenu = this._hasSubmenu(node);\n\n    var $submenu = $curItem.children(\".\".concat(DX_SUBMENU_CLASS));\n\n    if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {\n      if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\n        this._showSubmenu($curItem);\n      }\n\n      return this._nextItem(this._getItemsByLocation(location));\n    }\n\n    this._actions.onExpandLastSubmenu($curItem);\n\n    return;\n  };\n\n  _proto._clean = function () {\n    if (this._overlay) {\n      this._overlay.$element().remove();\n\n      this._overlay = null;\n    }\n\n    this._detachShowContextMenuEvents(this._getTarget());\n\n    _MenuBase.prototype._clean.call(this);\n  };\n\n  _proto._initMarkup = function () {\n    this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);\n\n    _MenuBase.prototype._initMarkup.call(this);\n  };\n\n  _proto._render = function () {\n    _MenuBase.prototype._render.call(this);\n\n    this._renderVisibility(this.option(\"visible\"));\n\n    this._addWidgetClass();\n  };\n\n  _proto._renderContentImpl = function () {\n    this._detachShowContextMenuEvents(this._getTarget());\n\n    this._attachShowContextMenuEvents();\n  };\n\n  _proto._attachKeyboardEvents = function () {\n    !this._keyboardListenerId && this._focusTarget().length && _MenuBase.prototype._attachKeyboardEvents.call(this);\n  };\n\n  _proto._renderContextMenuOverlay = function () {\n    if (this._overlay) {\n      return;\n    }\n\n    var overlayOptions = this._getOverlayOptions();\n\n    this._overlay = this._createComponent((0, _renderer.default)(\"<div>\").appendTo(this._$element), _overlay.default, overlayOptions);\n\n    var $overlayContent = this._overlay.$content();\n\n    $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);\n\n    this._addCustomCssClass($overlayContent);\n\n    this._addPlatformDependentClass($overlayContent);\n\n    this._attachContextMenuEvent();\n  };\n\n  _proto._itemContextMenuHandler = function (e) {\n    _MenuBase.prototype._itemContextMenuHandler.call(this, e);\n\n    e.stopPropagation();\n  };\n\n  _proto._addPlatformDependentClass = function ($element) {\n    if (_devices.default.current().phone) {\n      $element.addClass(DX_MENU_PHONE_CLASS);\n    }\n  };\n\n  _proto._detachShowContextMenuEvents = function (target) {\n    var showEvent = this.getShowEvent(this.option(\"showEvent\"));\n\n    if (!showEvent) {\n      return;\n    }\n\n    var eventName = (0, _index.addNamespace)(showEvent, this.NAME);\n\n    if (this._showContextMenuEventHandler) {\n      _events_engine.default.off(_dom_adapter.default.getDocument(), eventName, target, this._showContextMenuEventHandler);\n    } else {\n      _events_engine.default.off((0, _renderer.default)(target), eventName);\n    }\n  };\n\n  _proto._attachShowContextMenuEvents = function () {\n    var _this3 = this;\n\n    var target = this._getTarget();\n\n    var showEvent = this.getShowEvent(this.option(\"showEvent\"));\n\n    if (!showEvent) {\n      return;\n    }\n\n    var eventName = (0, _index.addNamespace)(showEvent, this.NAME);\n\n    var contextMenuAction = this._createAction(function (e) {\n      var delay = _this3.getShowDelay(_this3.option(\"showEvent\"));\n\n      if (delay) {\n        setTimeout(function () {\n          return _this3._show(e.event);\n        }, delay);\n      } else {\n        _this3._show(e.event);\n      }\n    }, {\n      validatingTargetName: \"target\"\n    });\n\n    var handler = function (e) {\n      return contextMenuAction({\n        event: e,\n        target: (0, _renderer.default)(e.currentTarget)\n      });\n    };\n\n    contextMenuAction = this._createAction(contextMenuAction);\n\n    if ((0, _type.isRenderer)(target) || target.nodeType || (0, _type.isWindow)(target)) {\n      this._showContextMenuEventHandler = void 0;\n\n      _events_engine.default.on(target, eventName, handler);\n    } else {\n      this._showContextMenuEventHandler = handler;\n\n      _events_engine.default.on(_dom_adapter.default.getDocument(), eventName, target, this._showContextMenuEventHandler);\n    }\n  };\n\n  _proto._hoverEndHandler = function (e) {\n    _MenuBase.prototype._hoverEndHandler.call(this, e);\n\n    e.stopPropagation();\n  };\n\n  _proto._renderDimensions = function () {};\n\n  _proto._renderContainer = function ($wrapper, submenuContainer) {\n    var $holder = submenuContainer || this._itemContainer();\n\n    $wrapper = (0, _renderer.default)(\"<div>\");\n    $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\n\n    var $itemsContainer = _MenuBase.prototype._renderContainer.call(this, $wrapper);\n\n    if (submenuContainer) {\n      return $itemsContainer;\n    }\n\n    if (this.option(\"width\")) {\n      return $itemsContainer.css(\"minWidth\", this.option(\"width\"));\n    }\n\n    if (this.option(\"height\")) {\n      return $itemsContainer.css(\"minHeight\", this.option(\"height\"));\n    }\n\n    return $itemsContainer;\n  };\n\n  _proto._renderSubmenuItems = function (node, $itemFrame) {\n    this._renderItems(this._getChildNodes(node), $itemFrame);\n\n    this._actions.onSubmenuCreated({\n      itemElement: (0, _element.getPublicElement)($itemFrame),\n      itemData: node.internalFields.item,\n      submenuElement: (0, _element.getPublicElement)($itemFrame.children(\".\".concat(DX_SUBMENU_CLASS)))\n    });\n  };\n\n  _proto._getOverlayOptions = function () {\n    var position = this.option(\"position\");\n    var overlayOptions = {\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      animation: this.option(\"animation\"),\n      innerOverlay: true,\n      closeOnOutsideClick: this._closeOnOutsideClickHandler.bind(this),\n      propagateOutsideClick: true,\n      closeOnTargetScroll: true,\n      deferRendering: false,\n      position: {\n        at: position.at,\n        my: position.my,\n        of: this._getTarget(),\n        collision: \"flipfit\"\n      },\n      shading: false,\n      showTitle: false,\n      height: \"auto\",\n      width: \"auto\",\n      onShown: this._overlayShownActionHandler.bind(this),\n      onHiding: this._overlayHidingActionHandler.bind(this),\n      onHidden: this._overlayHiddenActionHandler.bind(this)\n    };\n    return overlayOptions;\n  };\n\n  _proto._overlayShownActionHandler = function (arg) {\n    this._actions.onShown(arg);\n  };\n\n  _proto._overlayHidingActionHandler = function (arg) {\n    this._actions.onHiding(arg);\n\n    if (!arg.cancel) {\n      this._hideAllShownSubmenus();\n\n      this._setOptionWithoutOptionChange(\"visible\", false);\n    }\n  };\n\n  _proto._overlayHiddenActionHandler = function (arg) {\n    this._actions.onHidden(arg);\n  };\n\n  _proto._closeOnOutsideClickHandler = function (e) {\n    var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\n\n    if ((0, _type.isFunction)(closeOnOutsideClick)) {\n      return closeOnOutsideClick(e);\n    }\n\n    if (!closeOnOutsideClick) {\n      return false;\n    }\n\n    if (_dom_adapter.default.isDocument(e.target)) {\n      return true;\n    }\n\n    var $activeItemContainer = this._getActiveItemsContainer(e.target);\n\n    var $itemContainers = this._getItemsContainers();\n\n    var $clickedItem = this._searchActiveItem(e.target);\n\n    var $rootItem = this.$element().parents(\".\".concat(DX_MENU_ITEM_CLASS));\n    var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\n    var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\n\n    if (isInnerOverlayClicked || isRootItemClicked) {\n      if (\"onClick\" === this._getShowSubmenuMode()) {\n        this._hideAllShownChildSubmenus($clickedItem);\n      }\n\n      return false;\n    }\n\n    return true;\n  };\n\n  _proto._getActiveItemsContainer = function (target) {\n    return (0, _renderer.default)(target).closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n  };\n\n  _proto._getItemsContainers = function () {\n    return this._overlay._$content.find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\n  };\n\n  _proto._searchActiveItem = function (target) {\n    return (0, _renderer.default)(target).closest(\".\".concat(DX_MENU_ITEM_CLASS)).eq(0);\n  };\n\n  _proto._isIncludeOverlay = function ($activeOverlay, $allOverlays) {\n    var isSame = false;\n    (0, _iterator.each)($allOverlays, function (index, $overlay) {\n      if ($activeOverlay.is($overlay) && !isSame) {\n        isSame = true;\n      }\n    });\n    return isSame;\n  };\n\n  _proto._hideAllShownChildSubmenus = function ($clickedItem) {\n    var _this4 = this;\n\n    var $submenuElements = $clickedItem.find(\".\".concat(DX_SUBMENU_CLASS));\n    var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n\n    if ($submenuElements.length > 0) {\n      (0, _iterator.each)(shownSubmenus, function (index, $submenu) {\n        var $context = _this4._searchActiveItem($submenu.context).parent();\n\n        if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\n          _this4._hideSubmenu($submenu);\n        }\n      });\n    }\n  };\n\n  _proto._showSubmenu = function ($item) {\n    var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\n\n    this._hideSubmenusOnSameLevel($item);\n\n    if (!this._hasSubmenu(node)) {\n      return;\n    }\n\n    var $submenu = $item.children(\".\".concat(DX_SUBMENU_CLASS));\n    var isSubmenuRendered = $submenu.length;\n\n    _MenuBase.prototype._showSubmenu.call(this, $item);\n\n    if (!isSubmenuRendered) {\n      this._renderSubmenuItems(node, $item);\n    }\n\n    if (!this._isSubmenuVisible($submenu)) {\n      this._drawSubmenu($item);\n    }\n  };\n\n  _proto._hideSubmenusOnSameLevel = function ($item) {\n    var $expandedItems = $item.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS)).siblings().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\n\n    if ($expandedItems.length) {\n      $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n\n      this._hideSubmenu($expandedItems.find(\".\".concat(DX_SUBMENU_CLASS)));\n    }\n  };\n\n  _proto._hideSubmenuGroup = function ($submenu) {\n    if (this._isSubmenuVisible($submenu)) {\n      this._hideSubmenuCore($submenu);\n    }\n  };\n\n  _proto._isSubmenuVisible = function ($submenu) {\n    return \"visible\" === $submenu.css(\"visibility\");\n  };\n\n  _proto._drawSubmenu = function ($itemElement) {\n    var animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\n    var $submenu = $itemElement.children(\".\".concat(DX_SUBMENU_CLASS));\n\n    var submenuPosition = this._getSubmenuPosition($itemElement);\n\n    if (this._overlay && this._overlay.option(\"visible\")) {\n      if (!(0, _type.isDefined)(this._shownSubmenus)) {\n        this._shownSubmenus = [];\n      }\n\n      if ((0, _array.inArray)($submenu, this._shownSubmenus)) {\n        this._shownSubmenus.push($submenu);\n      }\n\n      if (animation) {\n        _fx.default.stop($submenu);\n      }\n\n      _position.default.setup($submenu, submenuPosition);\n\n      if (animation) {\n        if ((0, _type.isPlainObject)(animation.to)) {\n          animation.to.position = submenuPosition;\n        }\n\n        this._animate($submenu, animation);\n      }\n\n      $submenu.css(\"visibility\", \"visible\");\n    }\n  };\n\n  _proto._animate = function ($container, options) {\n    _fx.default.animate($container, options);\n  };\n\n  _proto._getSubmenuPosition = function ($rootItem) {\n    var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\n    var $rootItemWrapper = $rootItem.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS));\n    var position = {\n      collision: \"flip\",\n      of: $rootItemWrapper,\n      offset: {\n        h: 0,\n        v: -1\n      }\n    };\n\n    switch (submenuDirection) {\n      case \"left\":\n        position.at = \"left top\";\n        position.my = \"right top\";\n        break;\n\n      case \"right\":\n        position.at = \"right top\";\n        position.my = \"left top\";\n        break;\n\n      default:\n        if (this.option(\"rtlEnabled\")) {\n          position.at = \"left top\";\n          position.my = \"right top\";\n        } else {\n          position.at = \"right top\";\n          position.my = \"left top\";\n        }\n\n    }\n\n    return position;\n  };\n\n  _proto._updateSubmenuVisibilityOnClick = function (actionArgs) {\n    if (!actionArgs.args.length) {\n      return;\n    }\n\n    var itemData = actionArgs.args[0].itemData;\n\n    var node = this._dataAdapter.getNodeByItem(itemData);\n\n    if (!node) {\n      return;\n    }\n\n    var $itemElement = (0, _renderer.default)(actionArgs.args[0].itemElement);\n    var $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\n    var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\n\n    if (shouldRenderSubmenu) {\n      this._renderSubmenuItems(node, $itemElement);\n\n      $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\n    }\n\n    if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\n      return;\n    }\n\n    var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\n\n    if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\n      return;\n    }\n\n    this._updateSelectedItemOnClick(actionArgs);\n\n    if (0 === $submenu.length) {\n      var $prevSubmenu = (0, _renderer.default)($itemElement.parents(\".\".concat(DX_SUBMENU_CLASS))[0]);\n\n      this._hideSubmenu($prevSubmenu);\n\n      if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\n        this.option(\"visible\", false);\n      }\n    } else {\n      if (this._shownSubmenus && this._shownSubmenus.length > 0) {\n        if (this._shownSubmenus[0].is($submenu)) {\n          this._hideSubmenu($submenu);\n        }\n      }\n\n      this._showSubmenu($itemElement);\n    }\n  };\n\n  _proto._hideSubmenu = function ($curSubmenu) {\n    var _this5 = this;\n\n    var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n    (0, _iterator.each)(shownSubmenus, function (index, $submenu) {\n      if ($curSubmenu.is($submenu) || (0, _dom.contains)($curSubmenu[0], $submenu[0])) {\n        $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n\n        _this5._hideSubmenuCore($submenu);\n      }\n    });\n  };\n\n  _proto._hideSubmenuCore = function ($submenu) {\n    var index = (0, _array.inArray)($submenu, this._shownSubmenus);\n    var animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\n\n    if (index >= 0) {\n      this._shownSubmenus.splice(index, 1);\n    }\n\n    this._stopAnimate($submenu);\n\n    animation && this._animate($submenu, animation);\n    $submenu.css(\"visibility\", \"hidden\");\n  };\n\n  _proto._stopAnimate = function ($container) {\n    _fx.default.stop($container, true);\n  };\n\n  _proto._hideAllShownSubmenus = function () {\n    var _this6 = this;\n\n    var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\n\n    var $expandedItems = this._overlay.$content().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\n\n    $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n    (0, _iterator.each)(shownSubmenus, function (_, $submenu) {\n      _this6._hideSubmenu($submenu);\n    });\n  };\n\n  _proto._visibilityChanged = function (visible) {\n    if (visible) {\n      this._renderContentImpl();\n    }\n  };\n\n  _proto._optionChanged = function (args) {\n    if ((0, _array.inArray)(args.name, ACTIONS) > -1) {\n      this._initActions();\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"visible\":\n        this._renderVisibility(args.value);\n\n        break;\n\n      case \"showEvent\":\n      case \"position\":\n      case \"submenuDirection\":\n        this._invalidate();\n\n        break;\n\n      case \"target\":\n        args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\n\n        this._invalidate();\n\n        break;\n\n      case \"closeOnOutsideClick\":\n        break;\n\n      default:\n        _MenuBase.prototype._optionChanged.call(this, args);\n\n    }\n  };\n\n  _proto._renderVisibility = function (showing) {\n    return showing ? this._show() : this._hide();\n  };\n\n  _proto._toggleVisibility = function () {};\n\n  _proto._show = function (event) {\n    var args = {\n      jQEvent: event\n    };\n    var promise = new _deferred.Deferred().reject().promise();\n\n    this._actions.onShowing(args);\n\n    if (args.cancel) {\n      return promise;\n    }\n\n    var position = this._positionContextMenu(event);\n\n    if (position) {\n      if (!this._overlay) {\n        this._renderContextMenuOverlay();\n\n        this._overlay.$content().addClass(this._widgetClass());\n\n        this._renderFocusState();\n\n        this._attachHoverEvents();\n\n        this._attachClickEvent();\n\n        this._renderItems(this._dataAdapter.getRootNodes());\n      }\n\n      this._setOptionWithoutOptionChange(\"visible\", true);\n\n      this._overlay.option(\"position\", position);\n\n      promise = this._overlay.show();\n      event && event.stopPropagation();\n\n      this._setAriaAttributes();\n    }\n\n    return promise;\n  };\n\n  _proto._setAriaAttributes = function () {\n    this._overlayContentId = \"dx-\".concat(new _guid.default());\n    this.setAria(\"owns\", this._overlayContentId);\n    this.setAria({\n      id: this._overlayContentId,\n      role: \"menu\"\n    }, this._overlay.$content());\n  };\n\n  _proto._cleanAriaAttributes = function () {\n    this._overlay && this.setAria(\"id\", null, this._overlay.$content());\n    this.setAria(\"owns\", void 0);\n  };\n\n  _proto._getTarget = function () {\n    return this.option(\"target\") || this.option(\"position\").of || (0, _renderer.default)(_dom_adapter.default.getDocument());\n  };\n\n  _proto._getContextMenuPosition = function () {\n    return (0, _extend.extend)({}, this.option(\"position\"), {\n      of: this._getTarget()\n    });\n  };\n\n  _proto._positionContextMenu = function (jQEvent) {\n    var position = this._getContextMenuPosition();\n\n    var isInitialPosition = this._isInitialOptionValue(\"position\");\n\n    var positioningAction = this._createActionByOption(\"onPositioning\", actionArgs);\n\n    if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\n      position.of = jQEvent;\n    }\n\n    var actionArgs = {\n      position: position,\n      event: jQEvent\n    };\n    positioningAction(actionArgs);\n\n    if (actionArgs.cancel) {\n      position = null;\n    } else {\n      if (actionArgs.event) {\n        actionArgs.event.cancel = true;\n        jQEvent.preventDefault();\n      }\n    }\n\n    return position;\n  };\n\n  _proto._refresh = function () {\n    if (!(0, _window.hasWindow)()) {\n      _MenuBase.prototype._refresh.call(this);\n    } else {\n      if (this._overlay) {\n        var lastPosition = this._overlay.option(\"position\");\n\n        _MenuBase.prototype._refresh.call(this);\n\n        this._overlay && this._overlay.option(\"position\", lastPosition);\n      } else {\n        _MenuBase.prototype._refresh.call(this);\n      }\n    }\n  };\n\n  _proto._hide = function () {\n    var promise;\n\n    if (this._overlay) {\n      promise = this._overlay.hide();\n\n      this._setOptionWithoutOptionChange(\"visible\", false);\n    }\n\n    this._cleanAriaAttributes();\n\n    this.option(\"focusedElement\", null);\n    return promise || new _deferred.Deferred().reject().promise();\n  };\n\n  _proto.toggle = function (showing) {\n    var visible = this.option(\"visible\");\n    showing = void 0 === showing ? !visible : showing;\n    return this._renderVisibility(showing);\n  };\n\n  _proto.show = function () {\n    return this.toggle(true);\n  };\n\n  _proto.hide = function () {\n    return this.toggle(false);\n  };\n\n  return ContextMenu;\n}(_ui.default);\n\n(0, _component_registrator.default)(\"dxContextMenu\", ContextMenu);\nvar _default = ContextMenu;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/context_menu/ui.context_menu.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_dom_adapter","_events_engine","_guid","_component_registrator","_common","_type","_dom","_element","_iterator","_array","_extend","_window","_fx","_position","_devices","_index","_overlay","_ui","_deferred","obj","__esModule","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","DX_MENU_CLASS","DX_MENU_ITEM_CLASS","DX_MENU_ITEM_EXPANDED_CLASS","DX_MENU_PHONE_CLASS","DX_MENU_ITEMS_CONTAINER_CLASS","DX_MENU_ITEM_WRAPPER_CLASS","DX_SUBMENU_CLASS","DX_CONTEXT_MENU_CLASS","DX_HAS_CONTEXT_MENU_CLASS","DX_STATE_DISABLED_CLASS","DX_STATE_FOCUSED_CLASS","DX_STATE_HOVER_CLASS","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","FOCUS_FIRST","FOCUS_LAST","ACTIONS","LOCAL_SUBMENU_DIRECTIONS","DEFAULT_SHOW_EVENT","ContextMenu","_MenuBase","apply","arguments","_proto","getShowEvent","showEventOption","result","isObject","name","getShowDelay","delay","_getDefaultOptions","extend","call","showEvent","closeOnOutsideClick","position","at","my","onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","submenuDirection","visible","target","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu","_defaultOptionsRules","concat","device","hasWindow","options","animation","_initActions","_this","_actions","each","index","action","_createActionByOption","noop","_setOptionsByReference","_optionsByReference","selectedItem","_focusInHandler","_itemContainer","$content","_eventBindingTarget","itemsContainer","_supportedKeys","_this2","selectItem","$item","option","hide","length","_isSelectionEnabled","space","escape","_getActiveItem","$availableItems","_getAvailableItems","$focusedItem","filter","$hoveredItem","$hoveredItemContainer","closest","find","_moveFocus","location","$items","_getItemsByLocation","$oldTarget","$activeItemHighlighted","$newTarget","_prevItem","_setFocusedElement","is","first","_nextItem","last","_hideSubmenuHandler","_expandSubmenuHandler","$element","getPublicElement","$activeItem","inArray","children","_getAriaTarget","_refreshActiveDescendant","isDefined","$target","$curItem","$parentItem","parents","_hideSubmenusOnSameLevel","_hideSubmenu","itemData","_getItemData","node","_dataAdapter","getNodeByItem","isItemHasSubmenu","_hasSubmenu","$submenu","hasClass","css","_showSubmenu","_clean","remove","_detachShowContextMenuEvents","_getTarget","_initMarkup","addClass","_render","_renderVisibility","_addWidgetClass","_renderContentImpl","_attachShowContextMenuEvents","_attachKeyboardEvents","_keyboardListenerId","_focusTarget","_renderContextMenuOverlay","overlayOptions","_getOverlayOptions","_createComponent","appendTo","_$element","$overlayContent","_addCustomCssClass","_addPlatformDependentClass","_attachContextMenuEvent","_itemContextMenuHandler","e","stopPropagation","current","phone","eventName","addNamespace","NAME","_showContextMenuEventHandler","off","getDocument","_this3","contextMenuAction","_createAction","setTimeout","_show","event","validatingTargetName","handler","currentTarget","isRenderer","nodeType","isWindow","on","_hoverEndHandler","_renderDimensions","_renderContainer","$wrapper","submenuContainer","$holder","$itemsContainer","_renderSubmenuItems","$itemFrame","_renderItems","_getChildNodes","itemElement","internalFields","item","submenuElement","focusStateEnabled","innerOverlay","_closeOnOutsideClickHandler","bind","propagateOutsideClick","closeOnTargetScroll","deferRendering","of","collision","shading","showTitle","height","width","_overlayShownActionHandler","_overlayHidingActionHandler","_overlayHiddenActionHandler","arg","cancel","_hideAllShownSubmenus","_setOptionWithoutOptionChange","isFunction","isDocument","$activeItemContainer","_getActiveItemsContainer","$itemContainers","_getItemsContainers","$clickedItem","_searchActiveItem","$rootItem","isRootItemClicked","isInnerOverlayClicked","_isIncludeOverlay","_getShowSubmenuMode","_hideAllShownChildSubmenus","_$content","eq","$activeOverlay","$allOverlays","isSame","$overlay","_this4","$submenuElements","shownSubmenus","_shownSubmenus","$context","context","parent","isSubmenuRendered","_isSubmenuVisible","_drawSubmenu","$expandedItems","siblings","removeClass","_hideSubmenuGroup","_hideSubmenuCore","$itemElement","show","submenuPosition","_getSubmenuPosition","push","stop","setup","isPlainObject","to","_animate","$container","animate","toLowerCase","$rootItemWrapper","offset","h","v","_updateSubmenuVisibilityOnClick","actionArgs","args","shouldRenderSubmenu","notCloseMenuOnItemClick","closeMenuOnClick","disabled","_updateSelectedItemOnClick","$prevSubmenu","canceled","$curSubmenu","_this5","contains","splice","_stopAnimate","_this6","_","_visibilityChanged","_optionChanged","value","_invalidate","previousValue","showing","_hide","_toggleVisibility","jQEvent","promise","Deferred","reject","_positionContextMenu","_widgetClass","_renderFocusState","_attachHoverEvents","_attachClickEvent","getRootNodes","_setAriaAttributes","_overlayContentId","setAria","id","role","_cleanAriaAttributes","_getContextMenuPosition","isInitialPosition","_isInitialOptionValue","positioningAction","preventDefault","_refresh","lastPosition","toggle","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/context_menu/ui.context_menu.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _guid = _interopRequireDefault(require(\"../../core/guid\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _dom = require(\"../../core/utils/dom\");\r\nvar _element = require(\"../../core/element\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _array = require(\"../../core/utils/array\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _fx = _interopRequireDefault(require(\"../../animation/fx\"));\r\nvar _position = _interopRequireDefault(require(\"../../animation/position\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _overlay = _interopRequireDefault(require(\"../overlay\"));\r\nvar _ui = _interopRequireDefault(require(\"./ui.menu_base\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar DX_MENU_CLASS = \"dx-menu\";\r\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\r\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\r\nvar DX_MENU_PHONE_CLASS = \"dx-menu-phone-overlay\";\r\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\r\nvar DX_MENU_ITEM_WRAPPER_CLASS = DX_MENU_ITEM_CLASS + \"-wrapper\";\r\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\r\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\r\nvar DX_HAS_CONTEXT_MENU_CLASS = \"dx-has-context-menu\";\r\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\r\nvar DX_STATE_FOCUSED_CLASS = \"dx-state-focused\";\r\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar FOCUS_FIRST = \"first\";\r\nvar FOCUS_LAST = \"last\";\r\nvar ACTIONS = [\"onShowing\", \"onShown\", \"onSubmenuCreated\", \"onHiding\", \"onHidden\", \"onPositioning\", \"onLeftFirstItem\", \"onLeftLastItem\", \"onCloseRootSubmenu\", \"onExpandLastSubmenu\"];\r\nvar LOCAL_SUBMENU_DIRECTIONS = [FOCUS_UP, FOCUS_DOWN, FOCUS_FIRST, FOCUS_LAST];\r\nvar DEFAULT_SHOW_EVENT = \"dxcontextmenu\";\r\nvar ContextMenu = function(_MenuBase) {\r\n    _inheritsLoose(ContextMenu, _MenuBase);\r\n\r\n    function ContextMenu() {\r\n        return _MenuBase.apply(this, arguments) || this\r\n    }\r\n    var _proto = ContextMenu.prototype;\r\n    _proto.getShowEvent = function(showEventOption) {\r\n        var result = null;\r\n        if ((0, _type.isObject)(showEventOption)) {\r\n            if (null !== showEventOption.name) {\r\n                result = showEventOption.name || DEFAULT_SHOW_EVENT\r\n            }\r\n        } else {\r\n            result = showEventOption\r\n        }\r\n        return result\r\n    };\r\n    _proto.getShowDelay = function(showEventOption) {\r\n        return (0, _type.isObject)(showEventOption) && showEventOption.delay\r\n    };\r\n    _proto._getDefaultOptions = function() {\r\n        return (0, _extend.extend)(_MenuBase.prototype._getDefaultOptions.call(this), {\r\n            showEvent: DEFAULT_SHOW_EVENT,\r\n            closeOnOutsideClick: true,\r\n            position: {\r\n                at: \"top left\",\r\n                my: \"top left\"\r\n            },\r\n            onShowing: null,\r\n            onShown: null,\r\n            onSubmenuCreated: null,\r\n            onHiding: null,\r\n            onHidden: null,\r\n            onPositioning: null,\r\n            submenuDirection: \"auto\",\r\n            visible: false,\r\n            target: void 0,\r\n            onLeftFirstItem: null,\r\n            onLeftLastItem: null,\r\n            onCloseRootSubmenu: null,\r\n            onExpandLastSubmenu: null\r\n        })\r\n    };\r\n    _proto._defaultOptionsRules = function() {\r\n        return _MenuBase.prototype._defaultOptionsRules.call(this).concat([{\r\n            device: function() {\r\n                return !(0, _window.hasWindow)()\r\n            },\r\n            options: {\r\n                animation: null\r\n            }\r\n        }])\r\n    };\r\n    _proto._initActions = function() {\r\n        var _this = this;\r\n        this._actions = {};\r\n        (0, _iterator.each)(ACTIONS, function(index, action) {\r\n            _this._actions[action] = _this._createActionByOption(action) || _common.noop\r\n        })\r\n    };\r\n    _proto._setOptionsByReference = function() {\r\n        _MenuBase.prototype._setOptionsByReference.call(this);\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            animation: true,\r\n            selectedItem: true\r\n        })\r\n    };\r\n    _proto._focusInHandler = function() {};\r\n    _proto._itemContainer = function() {\r\n        return this._overlay ? this._overlay.$content() : (0, _renderer.default)()\r\n    };\r\n    _proto._eventBindingTarget = function() {\r\n        return this._itemContainer()\r\n    };\r\n    _proto.itemsContainer = function() {\r\n        return this._overlay ? this._overlay.$content() : void 0\r\n    };\r\n    _proto._supportedKeys = function() {\r\n        var _this2 = this;\r\n        var selectItem = function() {\r\n            var $item = (0, _renderer.default)(_this2.option(\"focusedElement\"));\r\n            _this2.hide();\r\n            if (!$item.length || !_this2._isSelectionEnabled()) {\r\n                return\r\n            }\r\n            _this2.selectItem($item[0])\r\n        };\r\n        return (0, _extend.extend)(_MenuBase.prototype._supportedKeys.call(this), {\r\n            space: selectItem,\r\n            escape: this.hide\r\n        })\r\n    };\r\n    _proto._getActiveItem = function() {\r\n        var $availableItems = this._getAvailableItems();\r\n        var $focusedItem = $availableItems.filter(\".\".concat(DX_STATE_FOCUSED_CLASS));\r\n        var $hoveredItem = $availableItems.filter(\".\".concat(DX_STATE_HOVER_CLASS));\r\n        var $hoveredItemContainer = $hoveredItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS));\r\n        if ($hoveredItemContainer.find(\".\".concat(DX_MENU_ITEM_CLASS)).index($focusedItem) >= 0) {\r\n            return $focusedItem\r\n        }\r\n        if ($hoveredItem.length) {\r\n            return $hoveredItem\r\n        }\r\n        return _MenuBase.prototype._getActiveItem.call(this)\r\n    };\r\n    _proto._moveFocus = function(location) {\r\n        var $items = this._getItemsByLocation(location);\r\n        var $oldTarget = this._getActiveItem(true);\r\n        var $hoveredItem = this.itemsContainer().find(\".\".concat(DX_STATE_HOVER_CLASS));\r\n        var $focusedItem = (0, _renderer.default)(this.option(\"focusedElement\"));\r\n        var $activeItemHighlighted = !!($focusedItem.length || $hoveredItem.length);\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_UP:\r\n                $newTarget = $activeItemHighlighted ? this._prevItem($items) : $oldTarget;\r\n                this._setFocusedElement($newTarget);\r\n                if ($oldTarget.is($items.first())) {\r\n                    this._actions.onLeftFirstItem($oldTarget)\r\n                }\r\n                break;\r\n            case FOCUS_DOWN:\r\n                $newTarget = $activeItemHighlighted ? this._nextItem($items) : $oldTarget;\r\n                this._setFocusedElement($newTarget);\r\n                if ($oldTarget.is($items.last())) {\r\n                    this._actions.onLeftLastItem($oldTarget)\r\n                }\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._hideSubmenuHandler() : this._expandSubmenuHandler($items, location);\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case FOCUS_LEFT:\r\n                $newTarget = this.option(\"rtlEnabled\") ? this._expandSubmenuHandler($items, location) : this._hideSubmenuHandler();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case FOCUS_FIRST:\r\n                $newTarget = $items.first();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            case FOCUS_LAST:\r\n                $newTarget = $items.last();\r\n                this._setFocusedElement($newTarget);\r\n                break;\r\n            default:\r\n                return _MenuBase.prototype._moveFocus.call(this, location)\r\n        }\r\n    };\r\n    _proto._setFocusedElement = function($element) {\r\n        if ($element && 0 !== $element.length) {\r\n            this.option(\"focusedElement\", (0, _element.getPublicElement)($element))\r\n        }\r\n    };\r\n    _proto._getItemsByLocation = function(location) {\r\n        var $activeItem = this._getActiveItem(true);\r\n        var $items;\r\n        if ((0, _array.inArray)(location, LOCAL_SUBMENU_DIRECTIONS) >= 0) {\r\n            $items = $activeItem.closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).children().children()\r\n        }\r\n        $items = this._getAvailableItems($items);\r\n        return $items\r\n    };\r\n    _proto._getAriaTarget = function() {\r\n        return this.$element()\r\n    };\r\n    _proto._refreshActiveDescendant = function() {\r\n        if ((0, _type.isDefined)(this._overlay)) {\r\n            var $target = this._overlay.$content();\r\n            _MenuBase.prototype._refreshActiveDescendant.call(this, $target)\r\n        }\r\n    };\r\n    _proto._hideSubmenuHandler = function() {\r\n        var $curItem = this._getActiveItem(true);\r\n        var $parentItem = $curItem.parents(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).first();\r\n        if ($parentItem.length) {\r\n            this._hideSubmenusOnSameLevel($parentItem);\r\n            this._hideSubmenu($curItem.closest(\".\".concat(DX_SUBMENU_CLASS)));\r\n            return $parentItem\r\n        }\r\n        this._actions.onCloseRootSubmenu($curItem);\r\n        return $curItem\r\n    };\r\n    _proto._expandSubmenuHandler = function($items, location) {\r\n        var $curItem = this._getActiveItem(true);\r\n        var itemData = this._getItemData($curItem);\r\n        var node = this._dataAdapter.getNodeByItem(itemData);\r\n        var isItemHasSubmenu = this._hasSubmenu(node);\r\n        var $submenu = $curItem.children(\".\".concat(DX_SUBMENU_CLASS));\r\n        if (isItemHasSubmenu && !$curItem.hasClass(DX_STATE_DISABLED_CLASS)) {\r\n            if (!$submenu.length || \"hidden\" === $submenu.css(\"visibility\")) {\r\n                this._showSubmenu($curItem)\r\n            }\r\n            return this._nextItem(this._getItemsByLocation(location))\r\n        }\r\n        this._actions.onExpandLastSubmenu($curItem);\r\n        return\r\n    };\r\n    _proto._clean = function() {\r\n        if (this._overlay) {\r\n            this._overlay.$element().remove();\r\n            this._overlay = null\r\n        }\r\n        this._detachShowContextMenuEvents(this._getTarget());\r\n        _MenuBase.prototype._clean.call(this)\r\n    };\r\n    _proto._initMarkup = function() {\r\n        this.$element().addClass(DX_HAS_CONTEXT_MENU_CLASS);\r\n        _MenuBase.prototype._initMarkup.call(this)\r\n    };\r\n    _proto._render = function() {\r\n        _MenuBase.prototype._render.call(this);\r\n        this._renderVisibility(this.option(\"visible\"));\r\n        this._addWidgetClass()\r\n    };\r\n    _proto._renderContentImpl = function() {\r\n        this._detachShowContextMenuEvents(this._getTarget());\r\n        this._attachShowContextMenuEvents()\r\n    };\r\n    _proto._attachKeyboardEvents = function() {\r\n        !this._keyboardListenerId && this._focusTarget().length && _MenuBase.prototype._attachKeyboardEvents.call(this)\r\n    };\r\n    _proto._renderContextMenuOverlay = function() {\r\n        if (this._overlay) {\r\n            return\r\n        }\r\n        var overlayOptions = this._getOverlayOptions();\r\n        this._overlay = this._createComponent((0, _renderer.default)(\"<div>\").appendTo(this._$element), _overlay.default, overlayOptions);\r\n        var $overlayContent = this._overlay.$content();\r\n        $overlayContent.addClass(DX_CONTEXT_MENU_CLASS);\r\n        this._addCustomCssClass($overlayContent);\r\n        this._addPlatformDependentClass($overlayContent);\r\n        this._attachContextMenuEvent()\r\n    };\r\n    _proto._itemContextMenuHandler = function(e) {\r\n        _MenuBase.prototype._itemContextMenuHandler.call(this, e);\r\n        e.stopPropagation()\r\n    };\r\n    _proto._addPlatformDependentClass = function($element) {\r\n        if (_devices.default.current().phone) {\r\n            $element.addClass(DX_MENU_PHONE_CLASS)\r\n        }\r\n    };\r\n    _proto._detachShowContextMenuEvents = function(target) {\r\n        var showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n        if (!showEvent) {\r\n            return\r\n        }\r\n        var eventName = (0, _index.addNamespace)(showEvent, this.NAME);\r\n        if (this._showContextMenuEventHandler) {\r\n            _events_engine.default.off(_dom_adapter.default.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n        } else {\r\n            _events_engine.default.off((0, _renderer.default)(target), eventName)\r\n        }\r\n    };\r\n    _proto._attachShowContextMenuEvents = function() {\r\n        var _this3 = this;\r\n        var target = this._getTarget();\r\n        var showEvent = this.getShowEvent(this.option(\"showEvent\"));\r\n        if (!showEvent) {\r\n            return\r\n        }\r\n        var eventName = (0, _index.addNamespace)(showEvent, this.NAME);\r\n        var contextMenuAction = this._createAction(function(e) {\r\n            var delay = _this3.getShowDelay(_this3.option(\"showEvent\"));\r\n            if (delay) {\r\n                setTimeout(function() {\r\n                    return _this3._show(e.event)\r\n                }, delay)\r\n            } else {\r\n                _this3._show(e.event)\r\n            }\r\n        }, {\r\n            validatingTargetName: \"target\"\r\n        });\r\n        var handler = function(e) {\r\n            return contextMenuAction({\r\n                event: e,\r\n                target: (0, _renderer.default)(e.currentTarget)\r\n            })\r\n        };\r\n        contextMenuAction = this._createAction(contextMenuAction);\r\n        if ((0, _type.isRenderer)(target) || target.nodeType || (0, _type.isWindow)(target)) {\r\n            this._showContextMenuEventHandler = void 0;\r\n            _events_engine.default.on(target, eventName, handler)\r\n        } else {\r\n            this._showContextMenuEventHandler = handler;\r\n            _events_engine.default.on(_dom_adapter.default.getDocument(), eventName, target, this._showContextMenuEventHandler)\r\n        }\r\n    };\r\n    _proto._hoverEndHandler = function(e) {\r\n        _MenuBase.prototype._hoverEndHandler.call(this, e);\r\n        e.stopPropagation()\r\n    };\r\n    _proto._renderDimensions = function() {};\r\n    _proto._renderContainer = function($wrapper, submenuContainer) {\r\n        var $holder = submenuContainer || this._itemContainer();\r\n        $wrapper = (0, _renderer.default)(\"<div>\");\r\n        $wrapper.appendTo($holder).addClass(DX_SUBMENU_CLASS).css(\"visibility\", submenuContainer ? \"hidden\" : \"visible\");\r\n        var $itemsContainer = _MenuBase.prototype._renderContainer.call(this, $wrapper);\r\n        if (submenuContainer) {\r\n            return $itemsContainer\r\n        }\r\n        if (this.option(\"width\")) {\r\n            return $itemsContainer.css(\"minWidth\", this.option(\"width\"))\r\n        }\r\n        if (this.option(\"height\")) {\r\n            return $itemsContainer.css(\"minHeight\", this.option(\"height\"))\r\n        }\r\n        return $itemsContainer\r\n    };\r\n    _proto._renderSubmenuItems = function(node, $itemFrame) {\r\n        this._renderItems(this._getChildNodes(node), $itemFrame);\r\n        this._actions.onSubmenuCreated({\r\n            itemElement: (0, _element.getPublicElement)($itemFrame),\r\n            itemData: node.internalFields.item,\r\n            submenuElement: (0, _element.getPublicElement)($itemFrame.children(\".\".concat(DX_SUBMENU_CLASS)))\r\n        })\r\n    };\r\n    _proto._getOverlayOptions = function() {\r\n        var position = this.option(\"position\");\r\n        var overlayOptions = {\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            animation: this.option(\"animation\"),\r\n            innerOverlay: true,\r\n            closeOnOutsideClick: this._closeOnOutsideClickHandler.bind(this),\r\n            propagateOutsideClick: true,\r\n            closeOnTargetScroll: true,\r\n            deferRendering: false,\r\n            position: {\r\n                at: position.at,\r\n                my: position.my,\r\n                of: this._getTarget(),\r\n                collision: \"flipfit\"\r\n            },\r\n            shading: false,\r\n            showTitle: false,\r\n            height: \"auto\",\r\n            width: \"auto\",\r\n            onShown: this._overlayShownActionHandler.bind(this),\r\n            onHiding: this._overlayHidingActionHandler.bind(this),\r\n            onHidden: this._overlayHiddenActionHandler.bind(this)\r\n        };\r\n        return overlayOptions\r\n    };\r\n    _proto._overlayShownActionHandler = function(arg) {\r\n        this._actions.onShown(arg)\r\n    };\r\n    _proto._overlayHidingActionHandler = function(arg) {\r\n        this._actions.onHiding(arg);\r\n        if (!arg.cancel) {\r\n            this._hideAllShownSubmenus();\r\n            this._setOptionWithoutOptionChange(\"visible\", false)\r\n        }\r\n    };\r\n    _proto._overlayHiddenActionHandler = function(arg) {\r\n        this._actions.onHidden(arg)\r\n    };\r\n    _proto._closeOnOutsideClickHandler = function(e) {\r\n        var closeOnOutsideClick = this.option(\"closeOnOutsideClick\");\r\n        if ((0, _type.isFunction)(closeOnOutsideClick)) {\r\n            return closeOnOutsideClick(e)\r\n        }\r\n        if (!closeOnOutsideClick) {\r\n            return false\r\n        }\r\n        if (_dom_adapter.default.isDocument(e.target)) {\r\n            return true\r\n        }\r\n        var $activeItemContainer = this._getActiveItemsContainer(e.target);\r\n        var $itemContainers = this._getItemsContainers();\r\n        var $clickedItem = this._searchActiveItem(e.target);\r\n        var $rootItem = this.$element().parents(\".\".concat(DX_MENU_ITEM_CLASS));\r\n        var isRootItemClicked = $clickedItem[0] === $rootItem[0] && $clickedItem.length && $rootItem.length;\r\n        var isInnerOverlayClicked = this._isIncludeOverlay($activeItemContainer, $itemContainers) && $clickedItem.length;\r\n        if (isInnerOverlayClicked || isRootItemClicked) {\r\n            if (\"onClick\" === this._getShowSubmenuMode()) {\r\n                this._hideAllShownChildSubmenus($clickedItem)\r\n            }\r\n            return false\r\n        }\r\n        return true\r\n    };\r\n    _proto._getActiveItemsContainer = function(target) {\r\n        return (0, _renderer.default)(target).closest(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS))\r\n    };\r\n    _proto._getItemsContainers = function() {\r\n        return this._overlay._$content.find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS))\r\n    };\r\n    _proto._searchActiveItem = function(target) {\r\n        return (0, _renderer.default)(target).closest(\".\".concat(DX_MENU_ITEM_CLASS)).eq(0)\r\n    };\r\n    _proto._isIncludeOverlay = function($activeOverlay, $allOverlays) {\r\n        var isSame = false;\r\n        (0, _iterator.each)($allOverlays, function(index, $overlay) {\r\n            if ($activeOverlay.is($overlay) && !isSame) {\r\n                isSame = true\r\n            }\r\n        });\r\n        return isSame\r\n    };\r\n    _proto._hideAllShownChildSubmenus = function($clickedItem) {\r\n        var _this4 = this;\r\n        var $submenuElements = $clickedItem.find(\".\".concat(DX_SUBMENU_CLASS));\r\n        var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n        if ($submenuElements.length > 0) {\r\n            (0, _iterator.each)(shownSubmenus, function(index, $submenu) {\r\n                var $context = _this4._searchActiveItem($submenu.context).parent();\r\n                if ($context.parent().is($clickedItem.parent().parent()) && !$context.is($clickedItem.parent())) {\r\n                    _this4._hideSubmenu($submenu)\r\n                }\r\n            })\r\n        }\r\n    };\r\n    _proto._showSubmenu = function($item) {\r\n        var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\r\n        this._hideSubmenusOnSameLevel($item);\r\n        if (!this._hasSubmenu(node)) {\r\n            return\r\n        }\r\n        var $submenu = $item.children(\".\".concat(DX_SUBMENU_CLASS));\r\n        var isSubmenuRendered = $submenu.length;\r\n        _MenuBase.prototype._showSubmenu.call(this, $item);\r\n        if (!isSubmenuRendered) {\r\n            this._renderSubmenuItems(node, $item)\r\n        }\r\n        if (!this._isSubmenuVisible($submenu)) {\r\n            this._drawSubmenu($item)\r\n        }\r\n    };\r\n    _proto._hideSubmenusOnSameLevel = function($item) {\r\n        var $expandedItems = $item.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS)).siblings().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\r\n        if ($expandedItems.length) {\r\n            $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n            this._hideSubmenu($expandedItems.find(\".\".concat(DX_SUBMENU_CLASS)))\r\n        }\r\n    };\r\n    _proto._hideSubmenuGroup = function($submenu) {\r\n        if (this._isSubmenuVisible($submenu)) {\r\n            this._hideSubmenuCore($submenu)\r\n        }\r\n    };\r\n    _proto._isSubmenuVisible = function($submenu) {\r\n        return \"visible\" === $submenu.css(\"visibility\")\r\n    };\r\n    _proto._drawSubmenu = function($itemElement) {\r\n        var animation = this.option(\"animation\") ? this.option(\"animation\").show : {};\r\n        var $submenu = $itemElement.children(\".\".concat(DX_SUBMENU_CLASS));\r\n        var submenuPosition = this._getSubmenuPosition($itemElement);\r\n        if (this._overlay && this._overlay.option(\"visible\")) {\r\n            if (!(0, _type.isDefined)(this._shownSubmenus)) {\r\n                this._shownSubmenus = []\r\n            }\r\n            if ((0, _array.inArray)($submenu, this._shownSubmenus)) {\r\n                this._shownSubmenus.push($submenu)\r\n            }\r\n            if (animation) {\r\n                _fx.default.stop($submenu)\r\n            }\r\n            _position.default.setup($submenu, submenuPosition);\r\n            if (animation) {\r\n                if ((0, _type.isPlainObject)(animation.to)) {\r\n                    animation.to.position = submenuPosition\r\n                }\r\n                this._animate($submenu, animation)\r\n            }\r\n            $submenu.css(\"visibility\", \"visible\")\r\n        }\r\n    };\r\n    _proto._animate = function($container, options) {\r\n        _fx.default.animate($container, options)\r\n    };\r\n    _proto._getSubmenuPosition = function($rootItem) {\r\n        var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\r\n        var $rootItemWrapper = $rootItem.parent(\".\".concat(DX_MENU_ITEM_WRAPPER_CLASS));\r\n        var position = {\r\n            collision: \"flip\",\r\n            of: $rootItemWrapper,\r\n            offset: {\r\n                h: 0,\r\n                v: -1\r\n            }\r\n        };\r\n        switch (submenuDirection) {\r\n            case \"left\":\r\n                position.at = \"left top\";\r\n                position.my = \"right top\";\r\n                break;\r\n            case \"right\":\r\n                position.at = \"right top\";\r\n                position.my = \"left top\";\r\n                break;\r\n            default:\r\n                if (this.option(\"rtlEnabled\")) {\r\n                    position.at = \"left top\";\r\n                    position.my = \"right top\"\r\n                } else {\r\n                    position.at = \"right top\";\r\n                    position.my = \"left top\"\r\n                }\r\n        }\r\n        return position\r\n    };\r\n    _proto._updateSubmenuVisibilityOnClick = function(actionArgs) {\r\n        if (!actionArgs.args.length) {\r\n            return\r\n        }\r\n        var itemData = actionArgs.args[0].itemData;\r\n        var node = this._dataAdapter.getNodeByItem(itemData);\r\n        if (!node) {\r\n            return\r\n        }\r\n        var $itemElement = (0, _renderer.default)(actionArgs.args[0].itemElement);\r\n        var $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS));\r\n        var shouldRenderSubmenu = this._hasSubmenu(node) && !$submenu.length;\r\n        if (shouldRenderSubmenu) {\r\n            this._renderSubmenuItems(node, $itemElement);\r\n            $submenu = $itemElement.find(\".\".concat(DX_SUBMENU_CLASS))\r\n        }\r\n        if ($itemElement.context === $submenu.context && \"visible\" === $submenu.css(\"visibility\")) {\r\n            return\r\n        }\r\n        var notCloseMenuOnItemClick = itemData && false === itemData.closeMenuOnClick;\r\n        if (!itemData || itemData.disabled || notCloseMenuOnItemClick) {\r\n            return\r\n        }\r\n        this._updateSelectedItemOnClick(actionArgs);\r\n        if (0 === $submenu.length) {\r\n            var $prevSubmenu = (0, _renderer.default)($itemElement.parents(\".\".concat(DX_SUBMENU_CLASS))[0]);\r\n            this._hideSubmenu($prevSubmenu);\r\n            if (!actionArgs.canceled && this._overlay && this._overlay.option(\"visible\")) {\r\n                this.option(\"visible\", false)\r\n            }\r\n        } else {\r\n            if (this._shownSubmenus && this._shownSubmenus.length > 0) {\r\n                if (this._shownSubmenus[0].is($submenu)) {\r\n                    this._hideSubmenu($submenu)\r\n                }\r\n            }\r\n            this._showSubmenu($itemElement)\r\n        }\r\n    };\r\n    _proto._hideSubmenu = function($curSubmenu) {\r\n        var _this5 = this;\r\n        var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n        (0, _iterator.each)(shownSubmenus, function(index, $submenu) {\r\n            if ($curSubmenu.is($submenu) || (0, _dom.contains)($curSubmenu[0], $submenu[0])) {\r\n                $submenu.parent().removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n                _this5._hideSubmenuCore($submenu)\r\n            }\r\n        })\r\n    };\r\n    _proto._hideSubmenuCore = function($submenu) {\r\n        var index = (0, _array.inArray)($submenu, this._shownSubmenus);\r\n        var animation = this.option(\"animation\") ? this.option(\"animation\").hide : null;\r\n        if (index >= 0) {\r\n            this._shownSubmenus.splice(index, 1)\r\n        }\r\n        this._stopAnimate($submenu);\r\n        animation && this._animate($submenu, animation);\r\n        $submenu.css(\"visibility\", \"hidden\")\r\n    };\r\n    _proto._stopAnimate = function($container) {\r\n        _fx.default.stop($container, true)\r\n    };\r\n    _proto._hideAllShownSubmenus = function() {\r\n        var _this6 = this;\r\n        var shownSubmenus = (0, _extend.extend)([], this._shownSubmenus);\r\n        var $expandedItems = this._overlay.$content().find(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS));\r\n        $expandedItems.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\r\n        (0, _iterator.each)(shownSubmenus, function(_, $submenu) {\r\n            _this6._hideSubmenu($submenu)\r\n        })\r\n    };\r\n    _proto._visibilityChanged = function(visible) {\r\n        if (visible) {\r\n            this._renderContentImpl()\r\n        }\r\n    };\r\n    _proto._optionChanged = function(args) {\r\n        if ((0, _array.inArray)(args.name, ACTIONS) > -1) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"visible\":\r\n                this._renderVisibility(args.value);\r\n                break;\r\n            case \"showEvent\":\r\n            case \"position\":\r\n            case \"submenuDirection\":\r\n                this._invalidate();\r\n                break;\r\n            case \"target\":\r\n                args.previousValue && this._detachShowContextMenuEvents(args.previousValue);\r\n                this._invalidate();\r\n                break;\r\n            case \"closeOnOutsideClick\":\r\n                break;\r\n            default:\r\n                _MenuBase.prototype._optionChanged.call(this, args)\r\n        }\r\n    };\r\n    _proto._renderVisibility = function(showing) {\r\n        return showing ? this._show() : this._hide()\r\n    };\r\n    _proto._toggleVisibility = function() {};\r\n    _proto._show = function(event) {\r\n        var args = {\r\n            jQEvent: event\r\n        };\r\n        var promise = (new _deferred.Deferred).reject().promise();\r\n        this._actions.onShowing(args);\r\n        if (args.cancel) {\r\n            return promise\r\n        }\r\n        var position = this._positionContextMenu(event);\r\n        if (position) {\r\n            if (!this._overlay) {\r\n                this._renderContextMenuOverlay();\r\n                this._overlay.$content().addClass(this._widgetClass());\r\n                this._renderFocusState();\r\n                this._attachHoverEvents();\r\n                this._attachClickEvent();\r\n                this._renderItems(this._dataAdapter.getRootNodes())\r\n            }\r\n            this._setOptionWithoutOptionChange(\"visible\", true);\r\n            this._overlay.option(\"position\", position);\r\n            promise = this._overlay.show();\r\n            event && event.stopPropagation();\r\n            this._setAriaAttributes()\r\n        }\r\n        return promise\r\n    };\r\n    _proto._setAriaAttributes = function() {\r\n        this._overlayContentId = \"dx-\".concat(new _guid.default);\r\n        this.setAria(\"owns\", this._overlayContentId);\r\n        this.setAria({\r\n            id: this._overlayContentId,\r\n            role: \"menu\"\r\n        }, this._overlay.$content())\r\n    };\r\n    _proto._cleanAriaAttributes = function() {\r\n        this._overlay && this.setAria(\"id\", null, this._overlay.$content());\r\n        this.setAria(\"owns\", void 0)\r\n    };\r\n    _proto._getTarget = function() {\r\n        return this.option(\"target\") || this.option(\"position\").of || (0, _renderer.default)(_dom_adapter.default.getDocument())\r\n    };\r\n    _proto._getContextMenuPosition = function() {\r\n        return (0, _extend.extend)({}, this.option(\"position\"), {\r\n            of: this._getTarget()\r\n        })\r\n    };\r\n    _proto._positionContextMenu = function(jQEvent) {\r\n        var position = this._getContextMenuPosition();\r\n        var isInitialPosition = this._isInitialOptionValue(\"position\");\r\n        var positioningAction = this._createActionByOption(\"onPositioning\", actionArgs);\r\n        if (jQEvent && jQEvent.preventDefault && isInitialPosition) {\r\n            position.of = jQEvent\r\n        }\r\n        var actionArgs = {\r\n            position: position,\r\n            event: jQEvent\r\n        };\r\n        positioningAction(actionArgs);\r\n        if (actionArgs.cancel) {\r\n            position = null\r\n        } else {\r\n            if (actionArgs.event) {\r\n                actionArgs.event.cancel = true;\r\n                jQEvent.preventDefault()\r\n            }\r\n        }\r\n        return position\r\n    };\r\n    _proto._refresh = function() {\r\n        if (!(0, _window.hasWindow)()) {\r\n            _MenuBase.prototype._refresh.call(this)\r\n        } else {\r\n            if (this._overlay) {\r\n                var lastPosition = this._overlay.option(\"position\");\r\n                _MenuBase.prototype._refresh.call(this);\r\n                this._overlay && this._overlay.option(\"position\", lastPosition)\r\n            } else {\r\n                _MenuBase.prototype._refresh.call(this)\r\n            }\r\n        }\r\n    };\r\n    _proto._hide = function() {\r\n        var promise;\r\n        if (this._overlay) {\r\n            promise = this._overlay.hide();\r\n            this._setOptionWithoutOptionChange(\"visible\", false)\r\n        }\r\n        this._cleanAriaAttributes();\r\n        this.option(\"focusedElement\", null);\r\n        return promise || (new _deferred.Deferred).reject().promise()\r\n    };\r\n    _proto.toggle = function(showing) {\r\n        var visible = this.option(\"visible\");\r\n        showing = void 0 === showing ? !visible : showing;\r\n        return this._renderVisibility(showing)\r\n    };\r\n    _proto.show = function() {\r\n        return this.toggle(true)\r\n    };\r\n    _proto.hide = function() {\r\n        return this.toggle(false)\r\n    };\r\n    return ContextMenu\r\n}(_ui.default);\r\n(0, _component_registrator.default)(\"dxContextMenu\", ContextMenu);\r\nvar _default = ContextMenu;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}