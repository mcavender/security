{"ast":null,"code":"/**\r\n * DevExtreme (ui/menu/ui.menu.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _element = require(\"../../core/element\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _utils = require(\"../overlay/utils\");\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\n\nvar _hover = require(\"../../events/hover\");\n\nvar _ui = _interopRequireDefault(require(\"../context_menu/ui.menu_base\"));\n\nvar _overlay = _interopRequireDefault(require(\"../overlay\"));\n\nvar _ui2 = _interopRequireDefault(require(\"./ui.submenu\"));\n\nvar _button = _interopRequireDefault(require(\"../button\"));\n\nvar _tree_view = _interopRequireDefault(require(\"../tree_view\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar DX_MENU_CLASS = \"dx-menu\";\nvar DX_MENU_VERTICAL_CLASS = DX_MENU_CLASS + \"-vertical\";\nvar DX_MENU_HORIZONTAL_CLASS = DX_MENU_CLASS + \"-horizontal\";\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\nvar DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS = DX_CONTEXT_MENU_CLASS + \"-container-border\";\nvar DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS = \"dx-context-menu-content-delimiter\";\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\nvar DX_STATE_ACTIVE_CLASS = \"dx-state-active\";\nvar DX_ADAPTIVE_MODE_CLASS = DX_MENU_CLASS + \"-adaptive-mode\";\nvar DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS = DX_MENU_CLASS + \"-hamburger-button\";\nvar DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS = DX_ADAPTIVE_MODE_CLASS + \"-overlay-wrapper\";\nvar FOCUS_UP = \"up\";\nvar FOCUS_DOWN = \"down\";\nvar FOCUS_LEFT = \"left\";\nvar FOCUS_RIGHT = \"right\";\nvar SHOW_SUBMENU_OPERATION = \"showSubmenu\";\nvar NEXTITEM_OPERATION = \"nextItem\";\nvar PREVITEM_OPERATION = \"prevItem\";\nvar DEFAULT_DELAY = {\n  show: 50,\n  hide: 300\n};\nvar ACTIONS = [\"onSubmenuShowing\", \"onSubmenuShown\", \"onSubmenuHiding\", \"onSubmenuHidden\", \"onItemContextMenu\", \"onItemClick\", \"onSelectionChanged\", \"onItemRendered\"];\n\nvar Menu = function (_MenuBase) {\n  _inheritsLoose(Menu, _MenuBase);\n\n  function Menu() {\n    return _MenuBase.apply(this, arguments) || this;\n  }\n\n  var _proto = Menu.prototype;\n\n  _proto._getDefaultOptions = function () {\n    return (0, _extend.extend)(_MenuBase.prototype._getDefaultOptions.call(this), {\n      orientation: \"horizontal\",\n      submenuDirection: \"auto\",\n      showFirstSubmenuMode: {\n        name: \"onClick\",\n        delay: {\n          show: 50,\n          hide: 300\n        }\n      },\n      hideSubmenuOnMouseLeave: false,\n      onSubmenuShowing: null,\n      onSubmenuShown: null,\n      onSubmenuHiding: null,\n      onSubmenuHidden: null,\n      adaptivityEnabled: false\n    });\n  };\n\n  _proto._setOptionsByReference = function () {\n    _MenuBase.prototype._setOptionsByReference.call(this);\n\n    (0, _extend.extend)(this._optionsByReference, {\n      animation: true,\n      selectedItem: true\n    });\n  };\n\n  _proto._itemElements = function () {\n    var rootMenuElements = _MenuBase.prototype._itemElements.call(this);\n\n    var submenuElements = this._submenuItemElements();\n\n    return rootMenuElements.add(submenuElements);\n  };\n\n  _proto._submenuItemElements = function () {\n    var elements = [];\n    var itemSelector = \".\".concat(DX_MENU_ITEM_CLASS);\n    var currentSubmenu = this._submenus.length && this._submenus[0];\n\n    if (currentSubmenu && currentSubmenu.itemsContainer()) {\n      elements = currentSubmenu.itemsContainer().find(itemSelector);\n    }\n\n    return elements;\n  };\n\n  _proto._focusTarget = function () {\n    return this.$element();\n  };\n\n  _proto._isMenuHorizontal = function () {\n    return \"horizontal\" === this.option(\"orientation\");\n  };\n\n  _proto._moveFocus = function (location) {\n    var $items = this._getAvailableItems();\n\n    var isMenuHorizontal = this._isMenuHorizontal();\n\n    var $activeItem = this._getActiveItem(true);\n\n    var argument;\n    var operation;\n    var navigationAction;\n    var $newTarget;\n\n    switch (location) {\n      case FOCUS_UP:\n        operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(PREVITEM_OPERATION);\n        argument = isMenuHorizontal ? $activeItem : $items;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n\n      case FOCUS_DOWN:\n        operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(NEXTITEM_OPERATION);\n        argument = isMenuHorizontal ? $activeItem : $items;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n\n      case FOCUS_RIGHT:\n        operation = isMenuHorizontal ? this._getItemsNavigationOperation(NEXTITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\n        argument = isMenuHorizontal ? $items : $activeItem;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n\n      case FOCUS_LEFT:\n        operation = isMenuHorizontal ? this._getItemsNavigationOperation(PREVITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\n        argument = isMenuHorizontal ? $items : $activeItem;\n        navigationAction = this._getKeyboardNavigationAction(operation, argument);\n        $newTarget = navigationAction();\n        break;\n\n      default:\n        return _MenuBase.prototype._moveFocus.call(this, location);\n    }\n\n    if ($newTarget && 0 !== $newTarget.length) {\n      this.option(\"focusedElement\", (0, _element.getPublicElement)($newTarget));\n    }\n  };\n\n  _proto._getItemsNavigationOperation = function (operation) {\n    var navOperation = operation;\n\n    if (this.option(\"rtlEnabled\")) {\n      navOperation = operation === PREVITEM_OPERATION ? NEXTITEM_OPERATION : PREVITEM_OPERATION;\n    }\n\n    return navOperation;\n  };\n\n  _proto._getKeyboardNavigationAction = function (operation, argument) {\n    var action = _common.noop;\n\n    switch (operation) {\n      case SHOW_SUBMENU_OPERATION:\n        if (!argument.hasClass(DX_STATE_DISABLED_CLASS)) {\n          action = this._showSubmenu.bind(this, argument);\n        }\n\n        break;\n\n      case NEXTITEM_OPERATION:\n        action = this._nextItem.bind(this, argument);\n        break;\n\n      case PREVITEM_OPERATION:\n        action = this._prevItem.bind(this, argument);\n    }\n\n    return action;\n  };\n\n  _proto._clean = function () {\n    _MenuBase.prototype._clean.call(this);\n\n    this.option(\"templatesRenderAsynchronously\") && clearTimeout(this._resizeEventTimer);\n  };\n\n  _proto._visibilityChanged = function (visible) {\n    if (visible) {\n      if (!this._menuItemsWidth) {\n        this._updateItemsWidthCache();\n      }\n\n      this._dimensionChanged();\n    }\n  };\n\n  _proto._isAdaptivityEnabled = function () {\n    return this.option(\"adaptivityEnabled\") && \"horizontal\" === this.option(\"orientation\");\n  };\n\n  _proto._updateItemsWidthCache = function () {\n    var $menuItems = this.$element().find(\"ul\").first().children(\"li\").children(\".\".concat(DX_MENU_ITEM_CLASS));\n    this._menuItemsWidth = this._getSummaryItemsWidth($menuItems, true);\n  };\n\n  _proto._dimensionChanged = function () {\n    if (!this._isAdaptivityEnabled()) {\n      return;\n    }\n\n    var containerWidth = this.$element().outerWidth();\n\n    this._toggleAdaptiveMode(this._menuItemsWidth > containerWidth);\n  };\n\n  _proto._init = function () {\n    _MenuBase.prototype._init.call(this);\n\n    this._submenus = [];\n  };\n\n  _proto._initActions = function () {\n    var _this = this;\n\n    this._actions = {};\n    (0, _iterator.each)(ACTIONS, function (index, action) {\n      _this._actions[action] = _this._createActionByOption(action);\n    });\n  };\n\n  _proto._initMarkup = function () {\n    this._visibleSubmenu = null;\n    this.$element().addClass(DX_MENU_CLASS);\n\n    _MenuBase.prototype._initMarkup.call(this);\n\n    this.setAria(\"role\", \"menubar\");\n  };\n\n  _proto._render = function () {\n    _MenuBase.prototype._render.call(this);\n\n    this._initAdaptivity();\n  };\n\n  _proto._renderHamburgerButton = function () {\n    this._hamburger = new _button.default((0, _renderer.default)(\"<div>\").addClass(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS), {\n      icon: \"menu\",\n      activeStateEnabled: false,\n      onClick: this._toggleTreeView.bind(this)\n    });\n    return this._hamburger.$element();\n  };\n\n  _proto._toggleTreeView = function (state) {\n    if ((0, _type.isPlainObject)(state)) {\n      state = !this._overlay.option(\"visible\");\n    }\n\n    this._overlay.option(\"visible\", state);\n\n    this._toggleHamburgerActiveState(state);\n  };\n\n  _proto._toggleHamburgerActiveState = function (state) {\n    this._hamburger && this._hamburger.$element().toggleClass(DX_STATE_ACTIVE_CLASS, state);\n  };\n\n  _proto._toggleAdaptiveMode = function (state) {\n    var $menuItemsContainer = this.$element().find(\".\".concat(DX_MENU_HORIZONTAL_CLASS));\n    var $adaptiveElements = this.$element().find(\".\".concat(DX_ADAPTIVE_MODE_CLASS));\n\n    if (state) {\n      this._hideVisibleSubmenu();\n    } else {\n      this._treeView && this._treeView.collapseAll();\n      this._overlay && this._toggleTreeView(state);\n    }\n\n    $menuItemsContainer.toggle(!state);\n    $adaptiveElements.toggle(state);\n  };\n\n  _proto._removeAdaptivity = function () {\n    if (!this._$adaptiveContainer) {\n      return;\n    }\n\n    this._toggleAdaptiveMode(false);\n\n    this._$adaptiveContainer.remove();\n\n    this._$adaptiveContainer = null;\n    this._treeView = null;\n    this._hamburger = null;\n    this._overlay = null;\n  };\n\n  _proto._treeviewItemClickHandler = function (e) {\n    this._actions.onItemClick(e);\n\n    if (!e.node.children.length) {\n      this._toggleTreeView(false);\n    }\n  };\n\n  _proto._getAdaptiveOverlayOptions = function () {\n    var _this2 = this;\n\n    var rtl = this.option(\"rtlEnabled\");\n    var position = rtl ? \"right\" : \"left\";\n    return {\n      maxHeight: function () {\n        return (0, _utils.getElementMaxHeightByWindow)(_this2.$element());\n      },\n      deferRendering: false,\n      shading: false,\n      animation: false,\n      closeOnTargetScroll: true,\n      onHidden: function () {\n        _this2._toggleHamburgerActiveState(false);\n      },\n      height: \"auto\",\n      closeOnOutsideClick: function (e) {\n        return !(0, _renderer.default)(e.target).closest(\".\".concat(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS)).length;\n      },\n      position: {\n        collision: \"flipfit\",\n        at: \"bottom \" + position,\n        my: \"top \" + position,\n        of: this._hamburger.$element()\n      }\n    };\n  };\n\n  _proto._getTreeViewOptions = function () {\n    var _this3 = this;\n\n    var menuOptions = {};\n    var optionsToTransfer = [\"rtlEnabled\", \"width\", \"accessKey\", \"activeStateEnabled\", \"animation\", \"dataSource\", \"disabled\", \"displayExpr\", \"displayExpr\", \"focusStateEnabled\", \"hint\", \"hoverStateEnabled\", \"itemsExpr\", \"items\", \"itemTemplate\", \"selectedExpr\", \"selectionMode\", \"tabIndex\", \"visible\"];\n    var actionsToTransfer = [\"onItemContextMenu\", \"onSelectionChanged\"];\n    (0, _iterator.each)(optionsToTransfer, function (_, option) {\n      menuOptions[option] = _this3.option(option);\n    });\n    (0, _iterator.each)(actionsToTransfer, function (_, actionName) {\n      menuOptions[actionName] = function (e) {\n        _this3._actions[actionName](e);\n      };\n    });\n    return (0, _extend.extend)(menuOptions, {\n      dataSource: this.getDataSource(),\n      animationEnabled: !!this.option(\"animation\"),\n      onItemClick: this._treeviewItemClickHandler.bind(this),\n      onItemExpanded: function (e) {\n        _this3._overlay.repaint();\n\n        _this3._actions.onSubmenuShown(e);\n      },\n      onItemCollapsed: function (e) {\n        _this3._overlay.repaint();\n\n        _this3._actions.onSubmenuHidden(e);\n      },\n      selectNodesRecursive: false,\n      selectByClick: this.option(\"selectByClick\"),\n      expandEvent: \"click\"\n    });\n  };\n\n  _proto._initAdaptivity = function () {\n    if (!this._isAdaptivityEnabled()) {\n      return;\n    }\n\n    this._$adaptiveContainer = (0, _renderer.default)(\"<div>\").addClass(DX_ADAPTIVE_MODE_CLASS);\n\n    var $hamburger = this._renderHamburgerButton();\n\n    this._treeView = this._createComponent((0, _renderer.default)(\"<div>\"), _tree_view.default, this._getTreeViewOptions());\n    this._overlay = this._createComponent((0, _renderer.default)(\"<div>\"), _overlay.default, this._getAdaptiveOverlayOptions());\n\n    this._overlay.$content().append(this._treeView.$element()).addClass(DX_ADAPTIVE_MODE_CLASS).addClass(this.option(\"cssClass\"));\n\n    this._overlay._wrapper().addClass(DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS);\n\n    this._$adaptiveContainer.append($hamburger);\n\n    this._$adaptiveContainer.append(this._overlay.$element());\n\n    this.$element().append(this._$adaptiveContainer);\n\n    this._updateItemsWidthCache();\n\n    this._dimensionChanged();\n  };\n\n  _proto._getDelay = function (delayType) {\n    var delay = this.option(\"showFirstSubmenuMode\").delay;\n\n    if (!(0, _type.isDefined)(delay)) {\n      return DEFAULT_DELAY[delayType];\n    } else {\n      return (0, _type.isObject)(delay) ? delay[delayType] : delay;\n    }\n  };\n\n  _proto._keyboardHandler = function (e) {\n    return _MenuBase.prototype._keyboardHandler.call(this, e, !!this._visibleSubmenu);\n  };\n\n  _proto._renderContainer = function () {\n    var $wrapper = (0, _renderer.default)(\"<div>\");\n    $wrapper.appendTo(this.$element()).addClass(this._isMenuHorizontal() ? DX_MENU_HORIZONTAL_CLASS : DX_MENU_VERTICAL_CLASS);\n    return _MenuBase.prototype._renderContainer.call(this, $wrapper);\n  };\n\n  _proto._renderSubmenuItems = function (node, $itemFrame) {\n    var submenu = this._createSubmenu(node, $itemFrame);\n\n    this._submenus.push(submenu);\n\n    this._renderBorderElement($itemFrame);\n\n    return submenu;\n  };\n\n  _proto._getKeyboardListeners = function () {\n    return _MenuBase.prototype._getKeyboardListeners.call(this).concat(this._visibleSubmenu);\n  };\n\n  _proto._createSubmenu = function (node, $rootItem) {\n    var $submenuContainer = (0, _renderer.default)(\"<div>\").addClass(DX_CONTEXT_MENU_CLASS).appendTo($rootItem);\n\n    var items = this._getChildNodes(node);\n\n    var result = this._createComponent($submenuContainer, _ui2.default, (0, _extend.extend)(this._getSubmenuOptions(), {\n      _dataAdapter: this._dataAdapter,\n      _parentKey: node.internalFields.key,\n      items: items,\n      onHoverStart: this._clearTimeouts.bind(this),\n      position: this.getSubmenuPosition($rootItem)\n    }));\n\n    this._attachSubmenuHandlers($rootItem, result);\n\n    return result;\n  };\n\n  _proto._getSubmenuOptions = function () {\n    var _this4 = this;\n\n    var $submenuTarget = (0, _renderer.default)(\"<div>\");\n\n    var isMenuHorizontal = this._isMenuHorizontal();\n\n    return {\n      itemTemplate: this.option(\"itemTemplate\"),\n      target: $submenuTarget,\n      orientation: this.option(\"orientation\"),\n      selectionMode: this.option(\"selectionMode\"),\n      cssClass: this.option(\"cssClass\"),\n      selectByClick: this.option(\"selectByClick\"),\n      hoverStateEnabled: this.option(\"hoverStateEnabled\"),\n      activeStateEnabled: this.option(\"activeStateEnabled\"),\n      focusStateEnabled: this.option(\"focusStateEnabled\"),\n      animation: this.option(\"animation\"),\n      showSubmenuMode: this.option(\"showSubmenuMode\"),\n      displayExpr: this.option(\"displayExpr\"),\n      disabledExpr: this.option(\"disabledExpr\"),\n      selectedExpr: this.option(\"selectedExpr\"),\n      itemsExpr: this.option(\"itemsExpr\"),\n      onFocusedItemChanged: function (e) {\n        if (!e.component.option(\"visible\")) {\n          return;\n        }\n\n        _this4.option(\"focusedElement\", e.component.option(\"focusedElement\"));\n      },\n      onSelectionChanged: this._nestedItemOnSelectionChangedHandler.bind(this),\n      onItemClick: this._nestedItemOnItemClickHandler.bind(this),\n      onItemRendered: this._nestedItemOnItemRenderedHandler.bind(this),\n      onLeftFirstItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, PREVITEM_OPERATION),\n      onLeftLastItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION),\n      onCloseRootSubmenu: this._moveMainMenuFocus.bind(this, isMenuHorizontal ? PREVITEM_OPERATION : null),\n      onExpandLastSubmenu: isMenuHorizontal ? this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION) : null\n    };\n  };\n\n  _proto._getShowFirstSubmenuMode = function () {\n    if (!this._isDesktopDevice()) {\n      return \"onClick\";\n    }\n\n    var optionValue = this.option(\"showFirstSubmenuMode\");\n    return (0, _type.isObject)(optionValue) ? optionValue.name : optionValue;\n  };\n\n  _proto._moveMainMenuFocus = function (direction) {\n    var $items = this._getAvailableItems();\n\n    var itemCount = $items.length;\n    var $currentItem = $items.filter(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).eq(0);\n    var itemIndex = $items.index($currentItem);\n\n    this._hideSubmenu(this._visibleSubmenu);\n\n    itemIndex += direction === PREVITEM_OPERATION ? -1 : 1;\n\n    if (itemIndex >= itemCount) {\n      itemIndex = 0;\n    } else {\n      if (itemIndex < 0) {\n        itemIndex = itemCount - 1;\n      }\n    }\n\n    var $newItem = $items.eq(itemIndex);\n    this.option(\"focusedElement\", (0, _element.getPublicElement)($newItem));\n  };\n\n  _proto._nestedItemOnSelectionChangedHandler = function (args) {\n    var selectedItem = args.addedItems.length && args.addedItems[0];\n\n    var submenu = _ui2.default.getInstance(args.element);\n\n    var onSelectionChanged = this._actions.onSelectionChanged;\n    onSelectionChanged(args);\n    selectedItem && this._clearSelectionInSubmenus(selectedItem[0], submenu);\n\n    this._clearRootSelection();\n\n    this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem);\n  };\n\n  _proto._clearSelectionInSubmenus = function (item, targetSubmenu) {\n    var _this5 = this;\n\n    var cleanAllSubmenus = !arguments.length;\n    (0, _iterator.each)(this._submenus, function (index, submenu) {\n      var $submenu = submenu._itemContainer();\n\n      var isOtherItem = !$submenu.is(targetSubmenu && targetSubmenu._itemContainer());\n      var $selectedItem = $submenu.find(\".\".concat(_this5._selectedItemClass()));\n\n      if (isOtherItem && $selectedItem.length || cleanAllSubmenus) {\n        $selectedItem.removeClass(_this5._selectedItemClass());\n\n        var selectedItemData = _this5._getItemData($selectedItem);\n\n        if (selectedItemData) {\n          selectedItemData.selected = false;\n        }\n\n        submenu._clearSelectedItems();\n      }\n    });\n  };\n\n  _proto._clearRootSelection = function () {\n    var $prevSelectedItem = this.$element().find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).first().children().children().filter(\".\".concat(this._selectedItemClass()));\n\n    if ($prevSelectedItem.length) {\n      var prevSelectedItemData = this._getItemData($prevSelectedItem);\n\n      prevSelectedItemData.selected = false;\n      $prevSelectedItem.removeClass(this._selectedItemClass());\n    }\n  };\n\n  _proto._nestedItemOnItemClickHandler = function (e) {\n    this._actions.onItemClick(e);\n  };\n\n  _proto._nestedItemOnItemRenderedHandler = function (e) {\n    this._actions.onItemRendered(e);\n  };\n\n  _proto._attachSubmenuHandlers = function ($rootItem, submenu) {\n    var _this6 = this;\n\n    var $submenuOverlayContent = submenu.getOverlayContent();\n    var submenus = $submenuOverlayContent.find(\".\".concat(DX_SUBMENU_CLASS));\n    var submenuMouseLeaveName = (0, _index.addNamespace)(_hover.end, this.NAME + \"_submenu\");\n    submenu.option({\n      onShowing: this._submenuOnShowingHandler.bind(this, $rootItem, submenu),\n      onShown: this._submenuOnShownHandler.bind(this, $rootItem, submenu),\n      onHiding: this._submenuOnHidingHandler.bind(this, $rootItem, submenu),\n      onHidden: this._submenuOnHiddenHandler.bind(this, $rootItem, submenu)\n    });\n    (0, _iterator.each)(submenus, function (index, submenu) {\n      _events_engine.default.off(submenu, submenuMouseLeaveName);\n\n      _events_engine.default.on(submenu, submenuMouseLeaveName, null, _this6._submenuMouseLeaveHandler.bind(_this6, $rootItem));\n    });\n  };\n\n  _proto._submenuOnShowingHandler = function ($rootItem, submenu) {\n    var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\n\n    this._actions.onSubmenuShowing({\n      rootItem: (0, _element.getPublicElement)($rootItem),\n      submenu: submenu\n    });\n\n    $border.show();\n    $rootItem.addClass(DX_MENU_ITEM_EXPANDED_CLASS);\n  };\n\n  _proto._submenuOnShownHandler = function ($rootItem, submenu) {\n    this._actions.onSubmenuShown({\n      rootItem: (0, _element.getPublicElement)($rootItem),\n      submenu: submenu\n    });\n  };\n\n  _proto._submenuOnHidingHandler = function ($rootItem, submenu, eventArgs) {\n    var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\n    var args = eventArgs;\n    args.rootItem = (0, _element.getPublicElement)($rootItem);\n    args.submenu = submenu;\n\n    this._actions.onSubmenuHiding(args);\n\n    eventArgs = args;\n\n    if (!eventArgs.cancel) {\n      if (this._visibleSubmenu === submenu) {\n        this._visibleSubmenu = null;\n      }\n\n      $border.hide();\n      $rootItem.removeClass(DX_MENU_ITEM_EXPANDED_CLASS);\n    }\n  };\n\n  _proto._submenuOnHiddenHandler = function ($rootItem, submenu) {\n    this._actions.onSubmenuHidden({\n      rootItem: (0, _element.getPublicElement)($rootItem),\n      submenu: submenu\n    });\n  };\n\n  _proto._submenuMouseLeaveHandler = function ($rootItem, eventArgs) {\n    var target = (0, _renderer.default)(eventArgs.relatedTarget).parents(\".\".concat(DX_CONTEXT_MENU_CLASS))[0];\n\n    var contextMenu = this._getSubmenuByRootElement($rootItem).getOverlayContent()[0];\n\n    if (this.option(\"hideSubmenuOnMouseLeave\") && target !== contextMenu) {\n      this._clearTimeouts();\n\n      setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\n    }\n  };\n\n  _proto._hideSubmenuAfterTimeout = function () {\n    if (!this._visibleSubmenu) {\n      return;\n    }\n\n    var isRootItemHovered = (0, _renderer.default)(this._visibleSubmenu.$element().context).hasClass(DX_STATE_HOVER_CLASS);\n\n    var isSubmenuItemHovered = this._visibleSubmenu.getOverlayContent().find(\".\".concat(DX_STATE_HOVER_CLASS)).length;\n\n    var hoveredElementFromSubMenu = this._visibleSubmenu.getOverlayContent().get(0).querySelector(\":hover\");\n\n    if (!hoveredElementFromSubMenu && !isSubmenuItemHovered && !isRootItemHovered) {\n      this._visibleSubmenu.hide();\n    }\n  };\n\n  _proto._getSubmenuByRootElement = function ($rootItem) {\n    if (!$rootItem) {\n      return false;\n    }\n\n    var $submenu = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CLASS));\n    return $submenu.length && _ui2.default.getInstance($submenu);\n  };\n\n  _proto.getSubmenuPosition = function ($rootItem) {\n    var isHorizontalMenu = this._isMenuHorizontal();\n\n    var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\n    var rtlEnabled = this.option(\"rtlEnabled\");\n    var submenuPosition = {\n      collision: \"flip\",\n      of: $rootItem\n    };\n\n    switch (submenuDirection) {\n      case \"leftortop\":\n        submenuPosition.at = \"left top\";\n        submenuPosition.my = isHorizontalMenu ? \"left bottom\" : \"right top\";\n        break;\n\n      case \"rightorbottom\":\n        submenuPosition.at = isHorizontalMenu ? \"left bottom\" : \"right top\";\n        submenuPosition.my = \"left top\";\n        break;\n\n      default:\n        if (isHorizontalMenu) {\n          submenuPosition.at = rtlEnabled ? \"right bottom\" : \"left bottom\";\n          submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\";\n        } else {\n          submenuPosition.at = rtlEnabled ? \"left top\" : \"right top\";\n          submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\";\n        }\n\n    }\n\n    return submenuPosition;\n  };\n\n  _proto._renderBorderElement = function ($item) {\n    (0, _renderer.default)(\"<div>\").appendTo($item).addClass(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS).hide();\n  };\n\n  _proto._itemPointerDownHandler = function (e) {\n    var $target = (0, _renderer.default)(e.target);\n    var $closestItem = $target.closest(this._itemElements());\n\n    if ($closestItem.hasClass(\"dx-menu-item-has-submenu\")) {\n      this.option(\"focusedElement\", null);\n      return;\n    }\n\n    _MenuBase.prototype._itemPointerDownHandler.call(this, e);\n  };\n\n  _proto._hoverStartHandler = function (e) {\n    var mouseMoveEventName = (0, _index.addNamespace)(_pointer.default.move, this.NAME);\n\n    var $item = this._getItemElementByEventArgs(e);\n\n    var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\n\n    var isSelectionActive = (0, _type.isDefined)(e.buttons) && 1 === e.buttons || !(0, _type.isDefined)(e.buttons) && 1 === e.which;\n\n    if (this._isItemDisabled($item)) {\n      return;\n    }\n\n    _events_engine.default.off($item, mouseMoveEventName);\n\n    if (!this._hasChildren(node)) {\n      this._showSubmenuTimer = setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\n      return;\n    }\n\n    if (\"onHover\" === this._getShowFirstSubmenuMode() && !isSelectionActive) {\n      var submenu = this._getSubmenuByElement($item);\n\n      this._clearTimeouts();\n\n      if (!submenu.isOverlayVisible()) {\n        _events_engine.default.on($item, mouseMoveEventName, this._itemMouseMoveHandler.bind(this));\n\n        this._showSubmenuTimer = this._getDelay(\"hide\");\n      }\n    }\n  };\n\n  _proto._hoverEndHandler = function (eventArg) {\n    var _this7 = this;\n\n    var $item = this._getItemElementByEventArgs(eventArg);\n\n    var relatedTarget = (0, _renderer.default)(eventArg.relatedTarget);\n\n    _MenuBase.prototype._hoverEndHandler.call(this, eventArg);\n\n    this._clearTimeouts();\n\n    if (this._isItemDisabled($item)) {\n      return;\n    }\n\n    if (relatedTarget.hasClass(DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS)) {\n      return;\n    }\n\n    if (this.option(\"hideSubmenuOnMouseLeave\") && !relatedTarget.hasClass(DX_MENU_ITEMS_CONTAINER_CLASS)) {\n      this._hideSubmenuTimer = setTimeout(function () {\n        _this7._hideSubmenuAfterTimeout();\n      }, this._getDelay(\"hide\"));\n    }\n  };\n\n  _proto._hideVisibleSubmenu = function () {\n    if (!this._visibleSubmenu) {\n      return false;\n    }\n\n    this._hideSubmenu(this._visibleSubmenu);\n\n    return true;\n  };\n\n  _proto._showSubmenu = function ($itemElement) {\n    var submenu = this._getSubmenuByElement($itemElement);\n\n    if (this._visibleSubmenu !== submenu) {\n      this._hideVisibleSubmenu();\n    }\n\n    if (submenu) {\n      this._clearTimeouts();\n\n      submenu.show();\n      this.option(\"focusedElement\", submenu.option(\"focusedElement\"));\n    }\n\n    this._visibleSubmenu = submenu;\n    this._hoveredRootItem = $itemElement;\n  };\n\n  _proto._hideSubmenu = function (submenu) {\n    submenu && submenu.hide();\n\n    if (this._visibleSubmenu === submenu) {\n      this._visibleSubmenu = null;\n    }\n\n    this._hoveredRootItem = null;\n  };\n\n  _proto._itemMouseMoveHandler = function (e) {\n    var _this8 = this;\n\n    if (e.pointers && e.pointers.length) {\n      return;\n    }\n\n    var $item = (0, _renderer.default)(e.currentTarget);\n\n    if (!(0, _type.isDefined)(this._showSubmenuTimer)) {\n      return;\n    }\n\n    this._clearTimeouts();\n\n    this._showSubmenuTimer = setTimeout(function () {\n      var submenu = _this8._getSubmenuByElement($item);\n\n      if (submenu && !submenu.isOverlayVisible()) {\n        _this8._showSubmenu($item);\n      }\n    }, this._getDelay(\"show\"));\n  };\n\n  _proto._clearTimeouts = function () {\n    clearTimeout(this._hideSubmenuTimer);\n    clearTimeout(this._showSubmenuTimer);\n  };\n\n  _proto._getSubmenuByElement = function ($itemElement, itemData) {\n    var submenu = this._getSubmenuByRootElement($itemElement);\n\n    if (submenu) {\n      return submenu;\n    } else {\n      itemData = itemData || this._getItemData($itemElement);\n\n      var node = this._dataAdapter.getNodeByItem(itemData);\n\n      return this._hasChildren(node) && this._renderSubmenuItems(node, $itemElement);\n    }\n  };\n\n  _proto._updateSubmenuVisibilityOnClick = function (actionArgs) {\n    var args = actionArgs.args.length && actionArgs.args[0];\n\n    if (!args || this._disabledGetter(args.itemData)) {\n      return;\n    }\n\n    var $itemElement = (0, _renderer.default)(args.itemElement);\n\n    var currentSubmenu = this._getSubmenuByElement($itemElement, args.itemData);\n\n    this._updateSelectedItemOnClick(actionArgs);\n\n    if (this._visibleSubmenu) {\n      if (this._visibleSubmenu === currentSubmenu) {\n        if (\"onClick\" === this.option(\"showFirstSubmenuMode\")) {\n          this._hideSubmenu(this._visibleSubmenu);\n        }\n\n        return;\n      } else {\n        this._hideSubmenu(this._visibleSubmenu);\n      }\n    }\n\n    if (!currentSubmenu) {\n      return;\n    }\n\n    if (!currentSubmenu.isOverlayVisible()) {\n      this._showSubmenu($itemElement);\n\n      return;\n    }\n  };\n\n  _proto._optionChanged = function (args) {\n    if (ACTIONS.indexOf(args.name) >= 0) {\n      this._initActions();\n\n      return;\n    }\n\n    switch (args.name) {\n      case \"orientation\":\n      case \"submenuDirection\":\n        this._invalidate();\n\n        break;\n\n      case \"showFirstSubmenuMode\":\n      case \"hideSubmenuOnMouseLeave\":\n        break;\n\n      case \"showSubmenuMode\":\n        this._changeSubmenusOption(args.name, args.value);\n\n        break;\n\n      case \"adaptivityEnabled\":\n        args.value ? this._initAdaptivity() : this._removeAdaptivity();\n        break;\n\n      case \"width\":\n        if (this._isAdaptivityEnabled()) {\n          this._treeView.option(args.name, args.value);\n\n          this._overlay.option(args.name, args.value);\n        }\n\n        _MenuBase.prototype._optionChanged.call(this, args);\n\n        this._dimensionChanged();\n\n        break;\n\n      case \"animation\":\n        if (this._isAdaptivityEnabled()) {\n          this._treeView.option(\"animationEnabled\", !!args.value);\n        }\n\n        _MenuBase.prototype._optionChanged.call(this, args);\n\n        break;\n\n      default:\n        if (this._isAdaptivityEnabled()) {\n          this._treeView.option(args.name, args.value);\n        }\n\n        _MenuBase.prototype._optionChanged.call(this, args);\n\n    }\n  };\n\n  _proto._changeSubmenusOption = function (name, value) {\n    (0, _iterator.each)(this._submenus, function (index, submenu) {\n      submenu.option(name, value);\n    });\n  };\n\n  _proto.selectItem = function (itemElement) {\n    this._hideSubmenu(this._visibleSubmenu);\n\n    _MenuBase.prototype.selectItem.call(this, itemElement);\n  };\n\n  _proto.unselectItem = function (itemElement) {\n    this._hideSubmenu(this._visibleSubmenu);\n\n    _MenuBase.prototype.selectItem.call(this, itemElement);\n  };\n\n  return Menu;\n}(_ui.default);\n\n(0, _component_registrator.default)(\"dxMenu\", Menu);\nvar _default = Menu;\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/menu/ui.menu.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_component_registrator","_common","_element","_iterator","_type","_extend","_utils","_index","_pointer","_hover","_ui","_overlay","_ui2","_button","_tree_view","obj","__esModule","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","DX_MENU_CLASS","DX_MENU_VERTICAL_CLASS","DX_MENU_HORIZONTAL_CLASS","DX_MENU_ITEM_CLASS","DX_MENU_ITEMS_CONTAINER_CLASS","DX_MENU_ITEM_EXPANDED_CLASS","DX_CONTEXT_MENU_CLASS","DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS","DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS","DX_SUBMENU_CLASS","DX_STATE_DISABLED_CLASS","DX_STATE_HOVER_CLASS","DX_STATE_ACTIVE_CLASS","DX_ADAPTIVE_MODE_CLASS","DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS","DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS","FOCUS_UP","FOCUS_DOWN","FOCUS_LEFT","FOCUS_RIGHT","SHOW_SUBMENU_OPERATION","NEXTITEM_OPERATION","PREVITEM_OPERATION","DEFAULT_DELAY","show","hide","ACTIONS","Menu","_MenuBase","apply","arguments","_proto","_getDefaultOptions","extend","call","orientation","submenuDirection","showFirstSubmenuMode","name","delay","hideSubmenuOnMouseLeave","onSubmenuShowing","onSubmenuShown","onSubmenuHiding","onSubmenuHidden","adaptivityEnabled","_setOptionsByReference","_optionsByReference","animation","selectedItem","_itemElements","rootMenuElements","submenuElements","_submenuItemElements","add","elements","itemSelector","concat","currentSubmenu","_submenus","length","itemsContainer","find","_focusTarget","$element","_isMenuHorizontal","option","_moveFocus","location","$items","_getAvailableItems","isMenuHorizontal","$activeItem","_getActiveItem","argument","operation","navigationAction","$newTarget","_getItemsNavigationOperation","_getKeyboardNavigationAction","getPublicElement","navOperation","action","noop","hasClass","_showSubmenu","bind","_nextItem","_prevItem","_clean","clearTimeout","_resizeEventTimer","_visibilityChanged","visible","_menuItemsWidth","_updateItemsWidthCache","_dimensionChanged","_isAdaptivityEnabled","$menuItems","first","children","_getSummaryItemsWidth","containerWidth","outerWidth","_toggleAdaptiveMode","_init","_initActions","_this","_actions","each","index","_createActionByOption","_initMarkup","_visibleSubmenu","addClass","setAria","_render","_initAdaptivity","_renderHamburgerButton","_hamburger","icon","activeStateEnabled","onClick","_toggleTreeView","state","isPlainObject","_toggleHamburgerActiveState","toggleClass","$menuItemsContainer","$adaptiveElements","_hideVisibleSubmenu","_treeView","collapseAll","toggle","_removeAdaptivity","_$adaptiveContainer","remove","_treeviewItemClickHandler","e","onItemClick","node","_getAdaptiveOverlayOptions","_this2","rtl","position","maxHeight","getElementMaxHeightByWindow","deferRendering","shading","closeOnTargetScroll","onHidden","height","closeOnOutsideClick","target","closest","collision","at","my","of","_getTreeViewOptions","_this3","menuOptions","optionsToTransfer","actionsToTransfer","_","actionName","dataSource","getDataSource","animationEnabled","onItemExpanded","repaint","onItemCollapsed","selectNodesRecursive","selectByClick","expandEvent","$hamburger","_createComponent","$content","append","_wrapper","_getDelay","delayType","isDefined","isObject","_keyboardHandler","_renderContainer","$wrapper","appendTo","_renderSubmenuItems","$itemFrame","submenu","_createSubmenu","push","_renderBorderElement","_getKeyboardListeners","$rootItem","$submenuContainer","items","_getChildNodes","result","_getSubmenuOptions","_dataAdapter","_parentKey","internalFields","key","onHoverStart","_clearTimeouts","getSubmenuPosition","_attachSubmenuHandlers","_this4","$submenuTarget","itemTemplate","selectionMode","cssClass","hoverStateEnabled","focusStateEnabled","showSubmenuMode","displayExpr","disabledExpr","selectedExpr","itemsExpr","onFocusedItemChanged","component","onSelectionChanged","_nestedItemOnSelectionChangedHandler","_nestedItemOnItemClickHandler","onItemRendered","_nestedItemOnItemRenderedHandler","onLeftFirstItem","_moveMainMenuFocus","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu","_getShowFirstSubmenuMode","_isDesktopDevice","optionValue","direction","itemCount","$currentItem","filter","eq","itemIndex","_hideSubmenu","$newItem","args","addedItems","getInstance","element","_clearSelectionInSubmenus","_clearRootSelection","_setOptionWithoutOptionChange","item","targetSubmenu","_this5","cleanAllSubmenus","$submenu","_itemContainer","isOtherItem","is","$selectedItem","_selectedItemClass","removeClass","selectedItemData","_getItemData","selected","_clearSelectedItems","$prevSelectedItem","prevSelectedItemData","_this6","$submenuOverlayContent","getOverlayContent","submenus","submenuMouseLeaveName","addNamespace","end","NAME","onShowing","_submenuOnShowingHandler","onShown","_submenuOnShownHandler","onHiding","_submenuOnHidingHandler","_submenuOnHiddenHandler","off","on","_submenuMouseLeaveHandler","$border","rootItem","eventArgs","cancel","relatedTarget","parents","contextMenu","_getSubmenuByRootElement","setTimeout","_hideSubmenuAfterTimeout","isRootItemHovered","context","isSubmenuItemHovered","hoveredElementFromSubMenu","get","querySelector","isHorizontalMenu","toLowerCase","rtlEnabled","submenuPosition","$item","_itemPointerDownHandler","$target","$closestItem","_hoverStartHandler","mouseMoveEventName","move","_getItemElementByEventArgs","getNodeByItem","isSelectionActive","buttons","which","_isItemDisabled","_hasChildren","_showSubmenuTimer","_getSubmenuByElement","isOverlayVisible","_itemMouseMoveHandler","_hoverEndHandler","eventArg","_this7","_hideSubmenuTimer","$itemElement","_hoveredRootItem","_this8","pointers","currentTarget","itemData","_updateSubmenuVisibilityOnClick","actionArgs","_disabledGetter","itemElement","_updateSelectedItemOnClick","_optionChanged","indexOf","_invalidate","_changeSubmenusOption","value","selectItem","unselectItem","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/menu/ui.menu.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../../core/component_registrator\"));\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _element = require(\"../../core/element\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _utils = require(\"../overlay/utils\");\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _pointer = _interopRequireDefault(require(\"../../events/pointer\"));\r\nvar _hover = require(\"../../events/hover\");\r\nvar _ui = _interopRequireDefault(require(\"../context_menu/ui.menu_base\"));\r\nvar _overlay = _interopRequireDefault(require(\"../overlay\"));\r\nvar _ui2 = _interopRequireDefault(require(\"./ui.submenu\"));\r\nvar _button = _interopRequireDefault(require(\"../button\"));\r\nvar _tree_view = _interopRequireDefault(require(\"../tree_view\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar DX_MENU_CLASS = \"dx-menu\";\r\nvar DX_MENU_VERTICAL_CLASS = DX_MENU_CLASS + \"-vertical\";\r\nvar DX_MENU_HORIZONTAL_CLASS = DX_MENU_CLASS + \"-horizontal\";\r\nvar DX_MENU_ITEM_CLASS = DX_MENU_CLASS + \"-item\";\r\nvar DX_MENU_ITEMS_CONTAINER_CLASS = DX_MENU_CLASS + \"-items-container\";\r\nvar DX_MENU_ITEM_EXPANDED_CLASS = DX_MENU_ITEM_CLASS + \"-expanded\";\r\nvar DX_CONTEXT_MENU_CLASS = \"dx-context-menu\";\r\nvar DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS = DX_CONTEXT_MENU_CLASS + \"-container-border\";\r\nvar DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS = \"dx-context-menu-content-delimiter\";\r\nvar DX_SUBMENU_CLASS = \"dx-submenu\";\r\nvar DX_STATE_DISABLED_CLASS = \"dx-state-disabled\";\r\nvar DX_STATE_HOVER_CLASS = \"dx-state-hover\";\r\nvar DX_STATE_ACTIVE_CLASS = \"dx-state-active\";\r\nvar DX_ADAPTIVE_MODE_CLASS = DX_MENU_CLASS + \"-adaptive-mode\";\r\nvar DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS = DX_MENU_CLASS + \"-hamburger-button\";\r\nvar DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS = DX_ADAPTIVE_MODE_CLASS + \"-overlay-wrapper\";\r\nvar FOCUS_UP = \"up\";\r\nvar FOCUS_DOWN = \"down\";\r\nvar FOCUS_LEFT = \"left\";\r\nvar FOCUS_RIGHT = \"right\";\r\nvar SHOW_SUBMENU_OPERATION = \"showSubmenu\";\r\nvar NEXTITEM_OPERATION = \"nextItem\";\r\nvar PREVITEM_OPERATION = \"prevItem\";\r\nvar DEFAULT_DELAY = {\r\n    show: 50,\r\n    hide: 300\r\n};\r\nvar ACTIONS = [\"onSubmenuShowing\", \"onSubmenuShown\", \"onSubmenuHiding\", \"onSubmenuHidden\", \"onItemContextMenu\", \"onItemClick\", \"onSelectionChanged\", \"onItemRendered\"];\r\nvar Menu = function(_MenuBase) {\r\n    _inheritsLoose(Menu, _MenuBase);\r\n\r\n    function Menu() {\r\n        return _MenuBase.apply(this, arguments) || this\r\n    }\r\n    var _proto = Menu.prototype;\r\n    _proto._getDefaultOptions = function() {\r\n        return (0, _extend.extend)(_MenuBase.prototype._getDefaultOptions.call(this), {\r\n            orientation: \"horizontal\",\r\n            submenuDirection: \"auto\",\r\n            showFirstSubmenuMode: {\r\n                name: \"onClick\",\r\n                delay: {\r\n                    show: 50,\r\n                    hide: 300\r\n                }\r\n            },\r\n            hideSubmenuOnMouseLeave: false,\r\n            onSubmenuShowing: null,\r\n            onSubmenuShown: null,\r\n            onSubmenuHiding: null,\r\n            onSubmenuHidden: null,\r\n            adaptivityEnabled: false\r\n        })\r\n    };\r\n    _proto._setOptionsByReference = function() {\r\n        _MenuBase.prototype._setOptionsByReference.call(this);\r\n        (0, _extend.extend)(this._optionsByReference, {\r\n            animation: true,\r\n            selectedItem: true\r\n        })\r\n    };\r\n    _proto._itemElements = function() {\r\n        var rootMenuElements = _MenuBase.prototype._itemElements.call(this);\r\n        var submenuElements = this._submenuItemElements();\r\n        return rootMenuElements.add(submenuElements)\r\n    };\r\n    _proto._submenuItemElements = function() {\r\n        var elements = [];\r\n        var itemSelector = \".\".concat(DX_MENU_ITEM_CLASS);\r\n        var currentSubmenu = this._submenus.length && this._submenus[0];\r\n        if (currentSubmenu && currentSubmenu.itemsContainer()) {\r\n            elements = currentSubmenu.itemsContainer().find(itemSelector)\r\n        }\r\n        return elements\r\n    };\r\n    _proto._focusTarget = function() {\r\n        return this.$element()\r\n    };\r\n    _proto._isMenuHorizontal = function() {\r\n        return \"horizontal\" === this.option(\"orientation\")\r\n    };\r\n    _proto._moveFocus = function(location) {\r\n        var $items = this._getAvailableItems();\r\n        var isMenuHorizontal = this._isMenuHorizontal();\r\n        var $activeItem = this._getActiveItem(true);\r\n        var argument;\r\n        var operation;\r\n        var navigationAction;\r\n        var $newTarget;\r\n        switch (location) {\r\n            case FOCUS_UP:\r\n                operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(PREVITEM_OPERATION);\r\n                argument = isMenuHorizontal ? $activeItem : $items;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_DOWN:\r\n                operation = isMenuHorizontal ? SHOW_SUBMENU_OPERATION : this._getItemsNavigationOperation(NEXTITEM_OPERATION);\r\n                argument = isMenuHorizontal ? $activeItem : $items;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_RIGHT:\r\n                operation = isMenuHorizontal ? this._getItemsNavigationOperation(NEXTITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\r\n                argument = isMenuHorizontal ? $items : $activeItem;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            case FOCUS_LEFT:\r\n                operation = isMenuHorizontal ? this._getItemsNavigationOperation(PREVITEM_OPERATION) : SHOW_SUBMENU_OPERATION;\r\n                argument = isMenuHorizontal ? $items : $activeItem;\r\n                navigationAction = this._getKeyboardNavigationAction(operation, argument);\r\n                $newTarget = navigationAction();\r\n                break;\r\n            default:\r\n                return _MenuBase.prototype._moveFocus.call(this, location)\r\n        }\r\n        if ($newTarget && 0 !== $newTarget.length) {\r\n            this.option(\"focusedElement\", (0, _element.getPublicElement)($newTarget))\r\n        }\r\n    };\r\n    _proto._getItemsNavigationOperation = function(operation) {\r\n        var navOperation = operation;\r\n        if (this.option(\"rtlEnabled\")) {\r\n            navOperation = operation === PREVITEM_OPERATION ? NEXTITEM_OPERATION : PREVITEM_OPERATION\r\n        }\r\n        return navOperation\r\n    };\r\n    _proto._getKeyboardNavigationAction = function(operation, argument) {\r\n        var action = _common.noop;\r\n        switch (operation) {\r\n            case SHOW_SUBMENU_OPERATION:\r\n                if (!argument.hasClass(DX_STATE_DISABLED_CLASS)) {\r\n                    action = this._showSubmenu.bind(this, argument)\r\n                }\r\n                break;\r\n            case NEXTITEM_OPERATION:\r\n                action = this._nextItem.bind(this, argument);\r\n                break;\r\n            case PREVITEM_OPERATION:\r\n                action = this._prevItem.bind(this, argument)\r\n        }\r\n        return action\r\n    };\r\n    _proto._clean = function() {\r\n        _MenuBase.prototype._clean.call(this);\r\n        this.option(\"templatesRenderAsynchronously\") && clearTimeout(this._resizeEventTimer)\r\n    };\r\n    _proto._visibilityChanged = function(visible) {\r\n        if (visible) {\r\n            if (!this._menuItemsWidth) {\r\n                this._updateItemsWidthCache()\r\n            }\r\n            this._dimensionChanged()\r\n        }\r\n    };\r\n    _proto._isAdaptivityEnabled = function() {\r\n        return this.option(\"adaptivityEnabled\") && \"horizontal\" === this.option(\"orientation\")\r\n    };\r\n    _proto._updateItemsWidthCache = function() {\r\n        var $menuItems = this.$element().find(\"ul\").first().children(\"li\").children(\".\".concat(DX_MENU_ITEM_CLASS));\r\n        this._menuItemsWidth = this._getSummaryItemsWidth($menuItems, true)\r\n    };\r\n    _proto._dimensionChanged = function() {\r\n        if (!this._isAdaptivityEnabled()) {\r\n            return\r\n        }\r\n        var containerWidth = this.$element().outerWidth();\r\n        this._toggleAdaptiveMode(this._menuItemsWidth > containerWidth)\r\n    };\r\n    _proto._init = function() {\r\n        _MenuBase.prototype._init.call(this);\r\n        this._submenus = []\r\n    };\r\n    _proto._initActions = function() {\r\n        var _this = this;\r\n        this._actions = {};\r\n        (0, _iterator.each)(ACTIONS, function(index, action) {\r\n            _this._actions[action] = _this._createActionByOption(action)\r\n        })\r\n    };\r\n    _proto._initMarkup = function() {\r\n        this._visibleSubmenu = null;\r\n        this.$element().addClass(DX_MENU_CLASS);\r\n        _MenuBase.prototype._initMarkup.call(this);\r\n        this.setAria(\"role\", \"menubar\")\r\n    };\r\n    _proto._render = function() {\r\n        _MenuBase.prototype._render.call(this);\r\n        this._initAdaptivity()\r\n    };\r\n    _proto._renderHamburgerButton = function() {\r\n        this._hamburger = new _button.default((0, _renderer.default)(\"<div>\").addClass(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS), {\r\n            icon: \"menu\",\r\n            activeStateEnabled: false,\r\n            onClick: this._toggleTreeView.bind(this)\r\n        });\r\n        return this._hamburger.$element()\r\n    };\r\n    _proto._toggleTreeView = function(state) {\r\n        if ((0, _type.isPlainObject)(state)) {\r\n            state = !this._overlay.option(\"visible\")\r\n        }\r\n        this._overlay.option(\"visible\", state);\r\n        this._toggleHamburgerActiveState(state)\r\n    };\r\n    _proto._toggleHamburgerActiveState = function(state) {\r\n        this._hamburger && this._hamburger.$element().toggleClass(DX_STATE_ACTIVE_CLASS, state)\r\n    };\r\n    _proto._toggleAdaptiveMode = function(state) {\r\n        var $menuItemsContainer = this.$element().find(\".\".concat(DX_MENU_HORIZONTAL_CLASS));\r\n        var $adaptiveElements = this.$element().find(\".\".concat(DX_ADAPTIVE_MODE_CLASS));\r\n        if (state) {\r\n            this._hideVisibleSubmenu()\r\n        } else {\r\n            this._treeView && this._treeView.collapseAll();\r\n            this._overlay && this._toggleTreeView(state)\r\n        }\r\n        $menuItemsContainer.toggle(!state);\r\n        $adaptiveElements.toggle(state)\r\n    };\r\n    _proto._removeAdaptivity = function() {\r\n        if (!this._$adaptiveContainer) {\r\n            return\r\n        }\r\n        this._toggleAdaptiveMode(false);\r\n        this._$adaptiveContainer.remove();\r\n        this._$adaptiveContainer = null;\r\n        this._treeView = null;\r\n        this._hamburger = null;\r\n        this._overlay = null\r\n    };\r\n    _proto._treeviewItemClickHandler = function(e) {\r\n        this._actions.onItemClick(e);\r\n        if (!e.node.children.length) {\r\n            this._toggleTreeView(false)\r\n        }\r\n    };\r\n    _proto._getAdaptiveOverlayOptions = function() {\r\n        var _this2 = this;\r\n        var rtl = this.option(\"rtlEnabled\");\r\n        var position = rtl ? \"right\" : \"left\";\r\n        return {\r\n            maxHeight: function() {\r\n                return (0, _utils.getElementMaxHeightByWindow)(_this2.$element())\r\n            },\r\n            deferRendering: false,\r\n            shading: false,\r\n            animation: false,\r\n            closeOnTargetScroll: true,\r\n            onHidden: function() {\r\n                _this2._toggleHamburgerActiveState(false)\r\n            },\r\n            height: \"auto\",\r\n            closeOnOutsideClick: function(e) {\r\n                return !(0, _renderer.default)(e.target).closest(\".\".concat(DX_ADAPTIVE_HAMBURGER_BUTTON_CLASS)).length\r\n            },\r\n            position: {\r\n                collision: \"flipfit\",\r\n                at: \"bottom \" + position,\r\n                my: \"top \" + position,\r\n                of: this._hamburger.$element()\r\n            }\r\n        }\r\n    };\r\n    _proto._getTreeViewOptions = function() {\r\n        var _this3 = this;\r\n        var menuOptions = {};\r\n        var optionsToTransfer = [\"rtlEnabled\", \"width\", \"accessKey\", \"activeStateEnabled\", \"animation\", \"dataSource\", \"disabled\", \"displayExpr\", \"displayExpr\", \"focusStateEnabled\", \"hint\", \"hoverStateEnabled\", \"itemsExpr\", \"items\", \"itemTemplate\", \"selectedExpr\", \"selectionMode\", \"tabIndex\", \"visible\"];\r\n        var actionsToTransfer = [\"onItemContextMenu\", \"onSelectionChanged\"];\r\n        (0, _iterator.each)(optionsToTransfer, function(_, option) {\r\n            menuOptions[option] = _this3.option(option)\r\n        });\r\n        (0, _iterator.each)(actionsToTransfer, function(_, actionName) {\r\n            menuOptions[actionName] = function(e) {\r\n                _this3._actions[actionName](e)\r\n            }\r\n        });\r\n        return (0, _extend.extend)(menuOptions, {\r\n            dataSource: this.getDataSource(),\r\n            animationEnabled: !!this.option(\"animation\"),\r\n            onItemClick: this._treeviewItemClickHandler.bind(this),\r\n            onItemExpanded: function(e) {\r\n                _this3._overlay.repaint();\r\n                _this3._actions.onSubmenuShown(e)\r\n            },\r\n            onItemCollapsed: function(e) {\r\n                _this3._overlay.repaint();\r\n                _this3._actions.onSubmenuHidden(e)\r\n            },\r\n            selectNodesRecursive: false,\r\n            selectByClick: this.option(\"selectByClick\"),\r\n            expandEvent: \"click\"\r\n        })\r\n    };\r\n    _proto._initAdaptivity = function() {\r\n        if (!this._isAdaptivityEnabled()) {\r\n            return\r\n        }\r\n        this._$adaptiveContainer = (0, _renderer.default)(\"<div>\").addClass(DX_ADAPTIVE_MODE_CLASS);\r\n        var $hamburger = this._renderHamburgerButton();\r\n        this._treeView = this._createComponent((0, _renderer.default)(\"<div>\"), _tree_view.default, this._getTreeViewOptions());\r\n        this._overlay = this._createComponent((0, _renderer.default)(\"<div>\"), _overlay.default, this._getAdaptiveOverlayOptions());\r\n        this._overlay.$content().append(this._treeView.$element()).addClass(DX_ADAPTIVE_MODE_CLASS).addClass(this.option(\"cssClass\"));\r\n        this._overlay._wrapper().addClass(DX_ADAPTIVE_MODE_OVERLAY_WRAPPER_CLASS);\r\n        this._$adaptiveContainer.append($hamburger);\r\n        this._$adaptiveContainer.append(this._overlay.$element());\r\n        this.$element().append(this._$adaptiveContainer);\r\n        this._updateItemsWidthCache();\r\n        this._dimensionChanged()\r\n    };\r\n    _proto._getDelay = function(delayType) {\r\n        var delay = this.option(\"showFirstSubmenuMode\").delay;\r\n        if (!(0, _type.isDefined)(delay)) {\r\n            return DEFAULT_DELAY[delayType]\r\n        } else {\r\n            return (0, _type.isObject)(delay) ? delay[delayType] : delay\r\n        }\r\n    };\r\n    _proto._keyboardHandler = function(e) {\r\n        return _MenuBase.prototype._keyboardHandler.call(this, e, !!this._visibleSubmenu)\r\n    };\r\n    _proto._renderContainer = function() {\r\n        var $wrapper = (0, _renderer.default)(\"<div>\");\r\n        $wrapper.appendTo(this.$element()).addClass(this._isMenuHorizontal() ? DX_MENU_HORIZONTAL_CLASS : DX_MENU_VERTICAL_CLASS);\r\n        return _MenuBase.prototype._renderContainer.call(this, $wrapper)\r\n    };\r\n    _proto._renderSubmenuItems = function(node, $itemFrame) {\r\n        var submenu = this._createSubmenu(node, $itemFrame);\r\n        this._submenus.push(submenu);\r\n        this._renderBorderElement($itemFrame);\r\n        return submenu\r\n    };\r\n    _proto._getKeyboardListeners = function() {\r\n        return _MenuBase.prototype._getKeyboardListeners.call(this).concat(this._visibleSubmenu)\r\n    };\r\n    _proto._createSubmenu = function(node, $rootItem) {\r\n        var $submenuContainer = (0, _renderer.default)(\"<div>\").addClass(DX_CONTEXT_MENU_CLASS).appendTo($rootItem);\r\n        var items = this._getChildNodes(node);\r\n        var result = this._createComponent($submenuContainer, _ui2.default, (0, _extend.extend)(this._getSubmenuOptions(), {\r\n            _dataAdapter: this._dataAdapter,\r\n            _parentKey: node.internalFields.key,\r\n            items: items,\r\n            onHoverStart: this._clearTimeouts.bind(this),\r\n            position: this.getSubmenuPosition($rootItem)\r\n        }));\r\n        this._attachSubmenuHandlers($rootItem, result);\r\n        return result\r\n    };\r\n    _proto._getSubmenuOptions = function() {\r\n        var _this4 = this;\r\n        var $submenuTarget = (0, _renderer.default)(\"<div>\");\r\n        var isMenuHorizontal = this._isMenuHorizontal();\r\n        return {\r\n            itemTemplate: this.option(\"itemTemplate\"),\r\n            target: $submenuTarget,\r\n            orientation: this.option(\"orientation\"),\r\n            selectionMode: this.option(\"selectionMode\"),\r\n            cssClass: this.option(\"cssClass\"),\r\n            selectByClick: this.option(\"selectByClick\"),\r\n            hoverStateEnabled: this.option(\"hoverStateEnabled\"),\r\n            activeStateEnabled: this.option(\"activeStateEnabled\"),\r\n            focusStateEnabled: this.option(\"focusStateEnabled\"),\r\n            animation: this.option(\"animation\"),\r\n            showSubmenuMode: this.option(\"showSubmenuMode\"),\r\n            displayExpr: this.option(\"displayExpr\"),\r\n            disabledExpr: this.option(\"disabledExpr\"),\r\n            selectedExpr: this.option(\"selectedExpr\"),\r\n            itemsExpr: this.option(\"itemsExpr\"),\r\n            onFocusedItemChanged: function(e) {\r\n                if (!e.component.option(\"visible\")) {\r\n                    return\r\n                }\r\n                _this4.option(\"focusedElement\", e.component.option(\"focusedElement\"))\r\n            },\r\n            onSelectionChanged: this._nestedItemOnSelectionChangedHandler.bind(this),\r\n            onItemClick: this._nestedItemOnItemClickHandler.bind(this),\r\n            onItemRendered: this._nestedItemOnItemRenderedHandler.bind(this),\r\n            onLeftFirstItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, PREVITEM_OPERATION),\r\n            onLeftLastItem: isMenuHorizontal ? null : this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION),\r\n            onCloseRootSubmenu: this._moveMainMenuFocus.bind(this, isMenuHorizontal ? PREVITEM_OPERATION : null),\r\n            onExpandLastSubmenu: isMenuHorizontal ? this._moveMainMenuFocus.bind(this, NEXTITEM_OPERATION) : null\r\n        }\r\n    };\r\n    _proto._getShowFirstSubmenuMode = function() {\r\n        if (!this._isDesktopDevice()) {\r\n            return \"onClick\"\r\n        }\r\n        var optionValue = this.option(\"showFirstSubmenuMode\");\r\n        return (0, _type.isObject)(optionValue) ? optionValue.name : optionValue\r\n    };\r\n    _proto._moveMainMenuFocus = function(direction) {\r\n        var $items = this._getAvailableItems();\r\n        var itemCount = $items.length;\r\n        var $currentItem = $items.filter(\".\".concat(DX_MENU_ITEM_EXPANDED_CLASS)).eq(0);\r\n        var itemIndex = $items.index($currentItem);\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        itemIndex += direction === PREVITEM_OPERATION ? -1 : 1;\r\n        if (itemIndex >= itemCount) {\r\n            itemIndex = 0\r\n        } else {\r\n            if (itemIndex < 0) {\r\n                itemIndex = itemCount - 1\r\n            }\r\n        }\r\n        var $newItem = $items.eq(itemIndex);\r\n        this.option(\"focusedElement\", (0, _element.getPublicElement)($newItem))\r\n    };\r\n    _proto._nestedItemOnSelectionChangedHandler = function(args) {\r\n        var selectedItem = args.addedItems.length && args.addedItems[0];\r\n        var submenu = _ui2.default.getInstance(args.element);\r\n        var onSelectionChanged = this._actions.onSelectionChanged;\r\n        onSelectionChanged(args);\r\n        selectedItem && this._clearSelectionInSubmenus(selectedItem[0], submenu);\r\n        this._clearRootSelection();\r\n        this._setOptionWithoutOptionChange(\"selectedItem\", selectedItem)\r\n    };\r\n    _proto._clearSelectionInSubmenus = function(item, targetSubmenu) {\r\n        var _this5 = this;\r\n        var cleanAllSubmenus = !arguments.length;\r\n        (0, _iterator.each)(this._submenus, function(index, submenu) {\r\n            var $submenu = submenu._itemContainer();\r\n            var isOtherItem = !$submenu.is(targetSubmenu && targetSubmenu._itemContainer());\r\n            var $selectedItem = $submenu.find(\".\".concat(_this5._selectedItemClass()));\r\n            if (isOtherItem && $selectedItem.length || cleanAllSubmenus) {\r\n                $selectedItem.removeClass(_this5._selectedItemClass());\r\n                var selectedItemData = _this5._getItemData($selectedItem);\r\n                if (selectedItemData) {\r\n                    selectedItemData.selected = false\r\n                }\r\n                submenu._clearSelectedItems()\r\n            }\r\n        })\r\n    };\r\n    _proto._clearRootSelection = function() {\r\n        var $prevSelectedItem = this.$element().find(\".\".concat(DX_MENU_ITEMS_CONTAINER_CLASS)).first().children().children().filter(\".\".concat(this._selectedItemClass()));\r\n        if ($prevSelectedItem.length) {\r\n            var prevSelectedItemData = this._getItemData($prevSelectedItem);\r\n            prevSelectedItemData.selected = false;\r\n            $prevSelectedItem.removeClass(this._selectedItemClass())\r\n        }\r\n    };\r\n    _proto._nestedItemOnItemClickHandler = function(e) {\r\n        this._actions.onItemClick(e)\r\n    };\r\n    _proto._nestedItemOnItemRenderedHandler = function(e) {\r\n        this._actions.onItemRendered(e)\r\n    };\r\n    _proto._attachSubmenuHandlers = function($rootItem, submenu) {\r\n        var _this6 = this;\r\n        var $submenuOverlayContent = submenu.getOverlayContent();\r\n        var submenus = $submenuOverlayContent.find(\".\".concat(DX_SUBMENU_CLASS));\r\n        var submenuMouseLeaveName = (0, _index.addNamespace)(_hover.end, this.NAME + \"_submenu\");\r\n        submenu.option({\r\n            onShowing: this._submenuOnShowingHandler.bind(this, $rootItem, submenu),\r\n            onShown: this._submenuOnShownHandler.bind(this, $rootItem, submenu),\r\n            onHiding: this._submenuOnHidingHandler.bind(this, $rootItem, submenu),\r\n            onHidden: this._submenuOnHiddenHandler.bind(this, $rootItem, submenu)\r\n        });\r\n        (0, _iterator.each)(submenus, function(index, submenu) {\r\n            _events_engine.default.off(submenu, submenuMouseLeaveName);\r\n            _events_engine.default.on(submenu, submenuMouseLeaveName, null, _this6._submenuMouseLeaveHandler.bind(_this6, $rootItem))\r\n        })\r\n    };\r\n    _proto._submenuOnShowingHandler = function($rootItem, submenu) {\r\n        var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\r\n        this._actions.onSubmenuShowing({\r\n            rootItem: (0, _element.getPublicElement)($rootItem),\r\n            submenu: submenu\r\n        });\r\n        $border.show();\r\n        $rootItem.addClass(DX_MENU_ITEM_EXPANDED_CLASS)\r\n    };\r\n    _proto._submenuOnShownHandler = function($rootItem, submenu) {\r\n        this._actions.onSubmenuShown({\r\n            rootItem: (0, _element.getPublicElement)($rootItem),\r\n            submenu: submenu\r\n        })\r\n    };\r\n    _proto._submenuOnHidingHandler = function($rootItem, submenu, eventArgs) {\r\n        var $border = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS));\r\n        var args = eventArgs;\r\n        args.rootItem = (0, _element.getPublicElement)($rootItem);\r\n        args.submenu = submenu;\r\n        this._actions.onSubmenuHiding(args);\r\n        eventArgs = args;\r\n        if (!eventArgs.cancel) {\r\n            if (this._visibleSubmenu === submenu) {\r\n                this._visibleSubmenu = null\r\n            }\r\n            $border.hide();\r\n            $rootItem.removeClass(DX_MENU_ITEM_EXPANDED_CLASS)\r\n        }\r\n    };\r\n    _proto._submenuOnHiddenHandler = function($rootItem, submenu) {\r\n        this._actions.onSubmenuHidden({\r\n            rootItem: (0, _element.getPublicElement)($rootItem),\r\n            submenu: submenu\r\n        })\r\n    };\r\n    _proto._submenuMouseLeaveHandler = function($rootItem, eventArgs) {\r\n        var target = (0, _renderer.default)(eventArgs.relatedTarget).parents(\".\".concat(DX_CONTEXT_MENU_CLASS))[0];\r\n        var contextMenu = this._getSubmenuByRootElement($rootItem).getOverlayContent()[0];\r\n        if (this.option(\"hideSubmenuOnMouseLeave\") && target !== contextMenu) {\r\n            this._clearTimeouts();\r\n            setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"))\r\n        }\r\n    };\r\n    _proto._hideSubmenuAfterTimeout = function() {\r\n        if (!this._visibleSubmenu) {\r\n            return\r\n        }\r\n        var isRootItemHovered = (0, _renderer.default)(this._visibleSubmenu.$element().context).hasClass(DX_STATE_HOVER_CLASS);\r\n        var isSubmenuItemHovered = this._visibleSubmenu.getOverlayContent().find(\".\".concat(DX_STATE_HOVER_CLASS)).length;\r\n        var hoveredElementFromSubMenu = this._visibleSubmenu.getOverlayContent().get(0).querySelector(\":hover\");\r\n        if (!hoveredElementFromSubMenu && !isSubmenuItemHovered && !isRootItemHovered) {\r\n            this._visibleSubmenu.hide()\r\n        }\r\n    };\r\n    _proto._getSubmenuByRootElement = function($rootItem) {\r\n        if (!$rootItem) {\r\n            return false\r\n        }\r\n        var $submenu = $rootItem.children(\".\".concat(DX_CONTEXT_MENU_CLASS));\r\n        return $submenu.length && _ui2.default.getInstance($submenu)\r\n    };\r\n    _proto.getSubmenuPosition = function($rootItem) {\r\n        var isHorizontalMenu = this._isMenuHorizontal();\r\n        var submenuDirection = this.option(\"submenuDirection\").toLowerCase();\r\n        var rtlEnabled = this.option(\"rtlEnabled\");\r\n        var submenuPosition = {\r\n            collision: \"flip\",\r\n            of: $rootItem\r\n        };\r\n        switch (submenuDirection) {\r\n            case \"leftortop\":\r\n                submenuPosition.at = \"left top\";\r\n                submenuPosition.my = isHorizontalMenu ? \"left bottom\" : \"right top\";\r\n                break;\r\n            case \"rightorbottom\":\r\n                submenuPosition.at = isHorizontalMenu ? \"left bottom\" : \"right top\";\r\n                submenuPosition.my = \"left top\";\r\n                break;\r\n            default:\r\n                if (isHorizontalMenu) {\r\n                    submenuPosition.at = rtlEnabled ? \"right bottom\" : \"left bottom\";\r\n                    submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\"\r\n                } else {\r\n                    submenuPosition.at = rtlEnabled ? \"left top\" : \"right top\";\r\n                    submenuPosition.my = rtlEnabled ? \"right top\" : \"left top\"\r\n                }\r\n        }\r\n        return submenuPosition\r\n    };\r\n    _proto._renderBorderElement = function($item) {\r\n        (0, _renderer.default)(\"<div>\").appendTo($item).addClass(DX_CONTEXT_MENU_CONTAINER_BORDER_CLASS).hide()\r\n    };\r\n    _proto._itemPointerDownHandler = function(e) {\r\n        var $target = (0, _renderer.default)(e.target);\r\n        var $closestItem = $target.closest(this._itemElements());\r\n        if ($closestItem.hasClass(\"dx-menu-item-has-submenu\")) {\r\n            this.option(\"focusedElement\", null);\r\n            return\r\n        }\r\n        _MenuBase.prototype._itemPointerDownHandler.call(this, e)\r\n    };\r\n    _proto._hoverStartHandler = function(e) {\r\n        var mouseMoveEventName = (0, _index.addNamespace)(_pointer.default.move, this.NAME);\r\n        var $item = this._getItemElementByEventArgs(e);\r\n        var node = this._dataAdapter.getNodeByItem(this._getItemData($item));\r\n        var isSelectionActive = (0, _type.isDefined)(e.buttons) && 1 === e.buttons || !(0, _type.isDefined)(e.buttons) && 1 === e.which;\r\n        if (this._isItemDisabled($item)) {\r\n            return\r\n        }\r\n        _events_engine.default.off($item, mouseMoveEventName);\r\n        if (!this._hasChildren(node)) {\r\n            this._showSubmenuTimer = setTimeout(this._hideSubmenuAfterTimeout.bind(this), this._getDelay(\"hide\"));\r\n            return\r\n        }\r\n        if (\"onHover\" === this._getShowFirstSubmenuMode() && !isSelectionActive) {\r\n            var submenu = this._getSubmenuByElement($item);\r\n            this._clearTimeouts();\r\n            if (!submenu.isOverlayVisible()) {\r\n                _events_engine.default.on($item, mouseMoveEventName, this._itemMouseMoveHandler.bind(this));\r\n                this._showSubmenuTimer = this._getDelay(\"hide\")\r\n            }\r\n        }\r\n    };\r\n    _proto._hoverEndHandler = function(eventArg) {\r\n        var _this7 = this;\r\n        var $item = this._getItemElementByEventArgs(eventArg);\r\n        var relatedTarget = (0, _renderer.default)(eventArg.relatedTarget);\r\n        _MenuBase.prototype._hoverEndHandler.call(this, eventArg);\r\n        this._clearTimeouts();\r\n        if (this._isItemDisabled($item)) {\r\n            return\r\n        }\r\n        if (relatedTarget.hasClass(DX_CONTEXT_MENU_CONTENT_DELIMITER_CLASS)) {\r\n            return\r\n        }\r\n        if (this.option(\"hideSubmenuOnMouseLeave\") && !relatedTarget.hasClass(DX_MENU_ITEMS_CONTAINER_CLASS)) {\r\n            this._hideSubmenuTimer = setTimeout(function() {\r\n                _this7._hideSubmenuAfterTimeout()\r\n            }, this._getDelay(\"hide\"))\r\n        }\r\n    };\r\n    _proto._hideVisibleSubmenu = function() {\r\n        if (!this._visibleSubmenu) {\r\n            return false\r\n        }\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        return true\r\n    };\r\n    _proto._showSubmenu = function($itemElement) {\r\n        var submenu = this._getSubmenuByElement($itemElement);\r\n        if (this._visibleSubmenu !== submenu) {\r\n            this._hideVisibleSubmenu()\r\n        }\r\n        if (submenu) {\r\n            this._clearTimeouts();\r\n            submenu.show();\r\n            this.option(\"focusedElement\", submenu.option(\"focusedElement\"))\r\n        }\r\n        this._visibleSubmenu = submenu;\r\n        this._hoveredRootItem = $itemElement\r\n    };\r\n    _proto._hideSubmenu = function(submenu) {\r\n        submenu && submenu.hide();\r\n        if (this._visibleSubmenu === submenu) {\r\n            this._visibleSubmenu = null\r\n        }\r\n        this._hoveredRootItem = null\r\n    };\r\n    _proto._itemMouseMoveHandler = function(e) {\r\n        var _this8 = this;\r\n        if (e.pointers && e.pointers.length) {\r\n            return\r\n        }\r\n        var $item = (0, _renderer.default)(e.currentTarget);\r\n        if (!(0, _type.isDefined)(this._showSubmenuTimer)) {\r\n            return\r\n        }\r\n        this._clearTimeouts();\r\n        this._showSubmenuTimer = setTimeout(function() {\r\n            var submenu = _this8._getSubmenuByElement($item);\r\n            if (submenu && !submenu.isOverlayVisible()) {\r\n                _this8._showSubmenu($item)\r\n            }\r\n        }, this._getDelay(\"show\"))\r\n    };\r\n    _proto._clearTimeouts = function() {\r\n        clearTimeout(this._hideSubmenuTimer);\r\n        clearTimeout(this._showSubmenuTimer)\r\n    };\r\n    _proto._getSubmenuByElement = function($itemElement, itemData) {\r\n        var submenu = this._getSubmenuByRootElement($itemElement);\r\n        if (submenu) {\r\n            return submenu\r\n        } else {\r\n            itemData = itemData || this._getItemData($itemElement);\r\n            var node = this._dataAdapter.getNodeByItem(itemData);\r\n            return this._hasChildren(node) && this._renderSubmenuItems(node, $itemElement)\r\n        }\r\n    };\r\n    _proto._updateSubmenuVisibilityOnClick = function(actionArgs) {\r\n        var args = actionArgs.args.length && actionArgs.args[0];\r\n        if (!args || this._disabledGetter(args.itemData)) {\r\n            return\r\n        }\r\n        var $itemElement = (0, _renderer.default)(args.itemElement);\r\n        var currentSubmenu = this._getSubmenuByElement($itemElement, args.itemData);\r\n        this._updateSelectedItemOnClick(actionArgs);\r\n        if (this._visibleSubmenu) {\r\n            if (this._visibleSubmenu === currentSubmenu) {\r\n                if (\"onClick\" === this.option(\"showFirstSubmenuMode\")) {\r\n                    this._hideSubmenu(this._visibleSubmenu)\r\n                }\r\n                return\r\n            } else {\r\n                this._hideSubmenu(this._visibleSubmenu)\r\n            }\r\n        }\r\n        if (!currentSubmenu) {\r\n            return\r\n        }\r\n        if (!currentSubmenu.isOverlayVisible()) {\r\n            this._showSubmenu($itemElement);\r\n            return\r\n        }\r\n    };\r\n    _proto._optionChanged = function(args) {\r\n        if (ACTIONS.indexOf(args.name) >= 0) {\r\n            this._initActions();\r\n            return\r\n        }\r\n        switch (args.name) {\r\n            case \"orientation\":\r\n            case \"submenuDirection\":\r\n                this._invalidate();\r\n                break;\r\n            case \"showFirstSubmenuMode\":\r\n            case \"hideSubmenuOnMouseLeave\":\r\n                break;\r\n            case \"showSubmenuMode\":\r\n                this._changeSubmenusOption(args.name, args.value);\r\n                break;\r\n            case \"adaptivityEnabled\":\r\n                args.value ? this._initAdaptivity() : this._removeAdaptivity();\r\n                break;\r\n            case \"width\":\r\n                if (this._isAdaptivityEnabled()) {\r\n                    this._treeView.option(args.name, args.value);\r\n                    this._overlay.option(args.name, args.value)\r\n                }\r\n                _MenuBase.prototype._optionChanged.call(this, args);\r\n                this._dimensionChanged();\r\n                break;\r\n            case \"animation\":\r\n                if (this._isAdaptivityEnabled()) {\r\n                    this._treeView.option(\"animationEnabled\", !!args.value)\r\n                }\r\n                _MenuBase.prototype._optionChanged.call(this, args);\r\n                break;\r\n            default:\r\n                if (this._isAdaptivityEnabled()) {\r\n                    this._treeView.option(args.name, args.value)\r\n                }\r\n                _MenuBase.prototype._optionChanged.call(this, args)\r\n        }\r\n    };\r\n    _proto._changeSubmenusOption = function(name, value) {\r\n        (0, _iterator.each)(this._submenus, function(index, submenu) {\r\n            submenu.option(name, value)\r\n        })\r\n    };\r\n    _proto.selectItem = function(itemElement) {\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        _MenuBase.prototype.selectItem.call(this, itemElement)\r\n    };\r\n    _proto.unselectItem = function(itemElement) {\r\n        this._hideSubmenu(this._visibleSubmenu);\r\n        _MenuBase.prototype.selectItem.call(this, itemElement)\r\n    };\r\n    return Menu\r\n}(_ui.default);\r\n(0, _component_registrator.default)(\"dxMenu\", Menu);\r\nvar _default = Menu;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}