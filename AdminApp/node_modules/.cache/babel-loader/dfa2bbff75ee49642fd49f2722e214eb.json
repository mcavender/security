{"ast":null,"code":"/**\r\n * DevExtreme (ui/scroll_view/ui.scrollable.simulated.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.SimulatedStrategy = exports.Scroller = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _inflector = require(\"../../core/utils/inflector\");\n\nvar _extend = require(\"../../core/utils/extend\");\n\nvar _window = require(\"../../core/utils/window\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _type = require(\"../../core/utils/type\");\n\nvar _position = require(\"../../core/utils/position\");\n\nvar _translator = require(\"../../animation/translator\");\n\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\n\nvar _animator = _interopRequireDefault(require(\"./animator\"));\n\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\n\nvar _index = require(\"../../events/utils/index\");\n\nvar _common = require(\"../../core/utils/common\");\n\nvar _ui = _interopRequireDefault(require(\"./ui.scrollbar\"));\n\nvar _deferred = require(\"../../core/utils/deferred\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar realDevice = _devices.default.real;\nvar isSluggishPlatform = \"android\" === realDevice.platform;\nvar SCROLLABLE_SIMULATED = \"dxSimulatedScrollable\";\nvar SCROLLABLE_STRATEGY = \"dxScrollableStrategy\";\nvar SCROLLABLE_SIMULATED_CURSOR = SCROLLABLE_SIMULATED + \"Cursor\";\nvar SCROLLABLE_SIMULATED_KEYBOARD = SCROLLABLE_SIMULATED + \"Keyboard\";\nvar SCROLLABLE_SIMULATED_CLASS = \"dx-scrollable-simulated\";\nvar SCROLLABLE_SCROLLBARS_HIDDEN = \"dx-scrollable-scrollbars-hidden\";\nvar SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE = \"dx-scrollable-scrollbars-alwaysvisible\";\nvar SCROLLABLE_SCROLLBAR_CLASS = \"dx-scrollable-scrollbar\";\nvar VERTICAL = \"vertical\";\nvar HORIZONTAL = \"horizontal\";\nvar ACCELERATION = isSluggishPlatform ? .95 : .92;\nvar OUT_BOUNDS_ACCELERATION = .5;\nvar MIN_VELOCITY_LIMIT = 1;\nvar FRAME_DURATION = Math.round(1e3 / 60);\nvar SCROLL_LINE_HEIGHT = 40;\nvar VALIDATE_WHEEL_TIMEOUT = 500;\nvar BOUNCE_MIN_VELOCITY_LIMIT = MIN_VELOCITY_LIMIT / 5;\nvar BOUNCE_DURATION = isSluggishPlatform ? 300 : 400;\nvar BOUNCE_FRAMES = BOUNCE_DURATION / FRAME_DURATION;\nvar BOUNCE_ACCELERATION_SUM = (1 - Math.pow(ACCELERATION, BOUNCE_FRAMES)) / (1 - ACCELERATION);\nvar KEY_CODES = {\n  PAGE_UP: \"pageUp\",\n  PAGE_DOWN: \"pageDown\",\n  END: \"end\",\n  HOME: \"home\",\n  LEFT: \"leftArrow\",\n  UP: \"upArrow\",\n  RIGHT: \"rightArrow\",\n  DOWN: \"downArrow\",\n  TAB: \"tab\"\n};\n\nvar InertiaAnimator = _animator.default.inherit({\n  ctor: function (scroller) {\n    this.callBase();\n    this.scroller = scroller;\n  },\n  VELOCITY_LIMIT: MIN_VELOCITY_LIMIT,\n  _isFinished: function () {\n    return Math.abs(this.scroller._velocity) <= this.VELOCITY_LIMIT;\n  },\n  _step: function () {\n    this.scroller._scrollStep(this.scroller._velocity);\n\n    this.scroller._velocity *= this._acceleration();\n  },\n  _acceleration: function () {\n    return this.scroller._inBounds() ? ACCELERATION : OUT_BOUNDS_ACCELERATION;\n  },\n  _complete: function () {\n    this.scroller._scrollComplete();\n  },\n  _stop: function () {\n    this.scroller._stopComplete();\n  }\n});\n\nvar BounceAnimator = InertiaAnimator.inherit({\n  VELOCITY_LIMIT: BOUNCE_MIN_VELOCITY_LIMIT,\n  _isFinished: function () {\n    return this.scroller._crossBoundOnNextStep() || this.callBase();\n  },\n  _acceleration: function () {\n    return ACCELERATION;\n  },\n  _complete: function () {\n    this.scroller._move(this.scroller._bounceLocation);\n\n    this.callBase();\n  }\n});\n\nvar Scroller = _class.default.inherit({\n  ctor: function (options) {\n    this._initOptions(options);\n\n    this._initAnimators();\n\n    this._initScrollbar();\n  },\n  _initOptions: function (options) {\n    var _this = this;\n\n    this._location = 0;\n    this._topReached = false;\n    this._bottomReached = false;\n    this._axis = options.direction === HORIZONTAL ? \"x\" : \"y\";\n    this._prop = options.direction === HORIZONTAL ? \"left\" : \"top\";\n    this._dimension = options.direction === HORIZONTAL ? \"width\" : \"height\";\n    this._scrollProp = options.direction === HORIZONTAL ? \"scrollLeft\" : \"scrollTop\";\n    (0, _iterator.each)(options, function (optionName, optionValue) {\n      _this[\"_\" + optionName] = optionValue;\n    });\n  },\n  _initAnimators: function () {\n    this._inertiaAnimator = new InertiaAnimator(this);\n    this._bounceAnimator = new BounceAnimator(this);\n  },\n  _initScrollbar: function () {\n    this._scrollbar = new _ui.default((0, _renderer.default)(\"<div>\").appendTo(this._$container), {\n      direction: this._direction,\n      visible: this._scrollByThumb,\n      visibilityMode: this._visibilityModeNormalize(this._scrollbarVisible),\n      expandable: this._scrollByThumb\n    });\n    this._$scrollbar = this._scrollbar.$element();\n  },\n  _visibilityModeNormalize: function (mode) {\n    return true === mode ? \"onScroll\" : false === mode ? \"never\" : mode;\n  },\n  _scrollStep: function (delta) {\n    var prevLocation = this._location;\n    this._location += delta;\n\n    this._suppressBounce();\n\n    this._move();\n\n    if (Math.abs(prevLocation - this._location) < 1) {\n      return;\n    }\n\n    _events_engine.default.triggerHandler(this._$container, {\n      type: \"scroll\"\n    });\n  },\n  _suppressBounce: function () {\n    if (this._bounceEnabled || this._inBounds(this._location)) {\n      return;\n    }\n\n    this._velocity = 0;\n    this._location = this._boundLocation();\n  },\n  _boundLocation: function (location) {\n    location = void 0 !== location ? location : this._location;\n    return Math.max(Math.min(location, this._maxOffset), this._minOffset);\n  },\n  _move: function (location) {\n    this._location = void 0 !== location ? location * this._getScaleRatio() : this._location;\n\n    this._moveContent();\n\n    this._moveScrollbar();\n  },\n  _moveContent: function () {\n    var location = this._location;\n\n    this._$container[this._scrollProp](-location / this._getScaleRatio());\n\n    this._moveContentByTranslator(location);\n  },\n  _getScaleRatio: function () {\n    if ((0, _window.hasWindow)() && !this._scaleRatio) {\n      var element = this._$element.get(0);\n\n      var realDimension = this._getRealDimension(element, this._dimension);\n\n      var baseDimension = this._getBaseDimension(element, this._dimension);\n\n      this._scaleRatio = Math.round(realDimension / baseDimension * 100) / 100;\n    }\n\n    return this._scaleRatio || 1;\n  },\n  _getRealDimension: function (element, dimension) {\n    return Math.round((0, _position.getBoundingRect)(element)[dimension]);\n  },\n  _getBaseDimension: function (element, dimension) {\n    var dimensionName = \"offset\" + (0, _inflector.titleize)(dimension);\n    return element[dimensionName];\n  },\n  _moveContentByTranslator: function (location) {\n    var translateOffset;\n    var minOffset = -this._maxScrollPropValue;\n\n    if (location > 0) {\n      translateOffset = location;\n    } else {\n      if (location <= minOffset) {\n        translateOffset = location - minOffset;\n      } else {\n        translateOffset = location % 1;\n      }\n    }\n\n    if (this._translateOffset === translateOffset) {\n      return;\n    }\n\n    var targetLocation = {};\n    targetLocation[this._prop] = translateOffset;\n    this._translateOffset = translateOffset;\n\n    if (0 === translateOffset) {\n      (0, _translator.resetPosition)(this._$content);\n      return;\n    }\n\n    (0, _translator.move)(this._$content, targetLocation);\n  },\n  _moveScrollbar: function () {\n    this._scrollbar.moveTo(this._location);\n  },\n  _scrollComplete: function () {\n    if (this._inBounds()) {\n      this._hideScrollbar();\n\n      if (this._completeDeferred) {\n        this._completeDeferred.resolve();\n      }\n    }\n\n    this._scrollToBounds();\n  },\n  _scrollToBounds: function () {\n    if (this._inBounds()) {\n      return;\n    }\n\n    this._bounceAction();\n\n    this._setupBounce();\n\n    this._bounceAnimator.start();\n  },\n  _setupBounce: function () {\n    var boundLocation = this._bounceLocation = this._boundLocation();\n\n    var bounceDistance = boundLocation - this._location;\n    this._velocity = bounceDistance / BOUNCE_ACCELERATION_SUM;\n  },\n  _inBounds: function (location) {\n    location = void 0 !== location ? location : this._location;\n    return this._boundLocation(location) === location;\n  },\n  _crossBoundOnNextStep: function () {\n    var location = this._location;\n    var nextLocation = location + this._velocity;\n    return location < this._minOffset && nextLocation >= this._minOffset || location > this._maxOffset && nextLocation <= this._maxOffset;\n  },\n  _initHandler: function (e) {\n    this._stopDeferred = new _deferred.Deferred();\n\n    this._stopScrolling();\n\n    this._prepareThumbScrolling(e);\n\n    return this._stopDeferred.promise();\n  },\n  _stopScrolling: (0, _common.deferRenderer)(function () {\n    this._hideScrollbar();\n\n    this._inertiaAnimator.stop();\n\n    this._bounceAnimator.stop();\n  }),\n  _prepareThumbScrolling: function (e) {\n    if ((0, _index.isDxMouseWheelEvent)(e.originalEvent)) {\n      return;\n    }\n\n    var $target = (0, _renderer.default)(e.originalEvent.target);\n\n    var scrollbarClicked = this._isScrollbar($target);\n\n    if (scrollbarClicked) {\n      this._moveToMouseLocation(e);\n    }\n\n    this._thumbScrolling = scrollbarClicked || this._isThumb($target);\n    this._crossThumbScrolling = !this._thumbScrolling && this._isAnyThumbScrolling($target);\n\n    if (this._thumbScrolling) {\n      this._scrollbar.feedbackOn();\n    }\n  },\n  _isThumbScrollingHandler: function ($target) {\n    return this._isThumb($target);\n  },\n  _moveToMouseLocation: function (e) {\n    var mouseLocation = e[\"page\" + this._axis.toUpperCase()] - this._$element.offset()[this._prop];\n\n    var location = this._location + mouseLocation / this._containerToContentRatio() - this._$container.height() / 2;\n\n    this._scrollStep(-Math.round(location));\n  },\n  _stopComplete: function () {\n    if (this._stopDeferred) {\n      this._stopDeferred.resolve();\n    }\n  },\n  _startHandler: function () {\n    this._showScrollbar();\n  },\n  _moveHandler: function (delta) {\n    if (this._crossThumbScrolling) {\n      return;\n    }\n\n    if (this._thumbScrolling) {\n      delta[this._axis] = -Math.round(delta[this._axis] / this._containerToContentRatio());\n    }\n\n    this._scrollBy(delta);\n  },\n  _scrollBy: function (delta) {\n    delta = delta[this._axis];\n\n    if (!this._inBounds()) {\n      delta *= OUT_BOUNDS_ACCELERATION;\n    }\n\n    this._scrollStep(delta);\n  },\n  _scrollByHandler: function (delta) {\n    this._scrollBy(delta);\n\n    this._scrollComplete();\n  },\n  _containerToContentRatio: function () {\n    return this._scrollbar.containerToContentRatio();\n  },\n  _endHandler: function (velocity) {\n    this._completeDeferred = new _deferred.Deferred();\n    this._velocity = velocity[this._axis];\n\n    this._inertiaHandler();\n\n    this._resetThumbScrolling();\n\n    return this._completeDeferred.promise();\n  },\n  _inertiaHandler: function () {\n    this._suppressInertia();\n\n    this._inertiaAnimator.start();\n  },\n  _suppressInertia: function () {\n    if (!this._inertiaEnabled || this._thumbScrolling) {\n      this._velocity = 0;\n    }\n  },\n  _resetThumbScrolling: function () {\n    this._thumbScrolling = false;\n    this._crossThumbScrolling = false;\n  },\n  _stopHandler: function () {\n    if (this._thumbScrolling) {\n      this._scrollComplete();\n    }\n\n    this._resetThumbScrolling();\n\n    this._scrollToBounds();\n  },\n  _disposeHandler: function () {\n    this._stopScrolling();\n\n    this._$scrollbar.remove();\n  },\n  _updateHandler: function () {\n    this._update();\n\n    this._moveToBounds();\n  },\n  _update: function () {\n    var _this2 = this;\n\n    this._stopScrolling();\n\n    return (0, _common.deferUpdate)(function () {\n      _this2._resetScaleRatio();\n\n      _this2._updateLocation();\n\n      _this2._updateBounds();\n\n      _this2._updateScrollbar();\n\n      (0, _common.deferRender)(function () {\n        _this2._moveScrollbar();\n\n        _this2._scrollbar.update();\n      });\n    });\n  },\n  _resetScaleRatio: function () {\n    this._scaleRatio = null;\n  },\n  _updateLocation: function () {\n    this._location = ((0, _translator.locate)(this._$content)[this._prop] - this._$container[this._scrollProp]()) * this._getScaleRatio();\n  },\n  _updateBounds: function () {\n    this._maxOffset = Math.round(this._getMaxOffset());\n    this._minOffset = Math.round(this._getMinOffset());\n  },\n  _getMaxOffset: function () {\n    return 0;\n  },\n  _getMinOffset: function () {\n    this._maxScrollPropValue = Math.max(this._contentSize() - this._containerSize(), 0);\n    return -this._maxScrollPropValue;\n  },\n  _updateScrollbar: (0, _common.deferUpdater)(function () {\n    var _this3 = this;\n\n    var containerSize = this._containerSize();\n\n    var contentSize = this._contentSize();\n\n    var baseContainerSize = this._getBaseDimension(this._$container.get(0), this._dimension);\n\n    var baseContentSize = this._getBaseDimension(this._$content.get(0), this._dimension);\n\n    (0, _common.deferRender)(function () {\n      _this3._scrollbar.option({\n        containerSize: containerSize,\n        contentSize: contentSize,\n        baseContainerSize: baseContainerSize,\n        baseContentSize: baseContentSize,\n        scaleRatio: _this3._getScaleRatio()\n      });\n    });\n  }),\n  _moveToBounds: (0, _common.deferRenderer)((0, _common.deferUpdater)((0, _common.deferRenderer)(function () {\n    var location = this._boundLocation();\n\n    var locationChanged = location !== this._location;\n    this._location = location;\n\n    this._move();\n\n    if (locationChanged) {\n      this._scrollAction();\n    }\n  }))),\n  _createActionsHandler: function (actions) {\n    this._scrollAction = actions.scroll;\n    this._bounceAction = actions.bounce;\n  },\n  _showScrollbar: function () {\n    this._scrollbar.option(\"visible\", true);\n  },\n  _hideScrollbar: function () {\n    this._scrollbar.option(\"visible\", false);\n  },\n  _containerSize: function () {\n    return this._getRealDimension(this._$container.get(0), this._dimension);\n  },\n  _contentSize: function () {\n    var isOverflowHidden = \"hidden\" === this._$content.css(\"overflow\" + this._axis.toUpperCase());\n\n    var contentSize = this._getRealDimension(this._$content.get(0), this._dimension);\n\n    if (!isOverflowHidden) {\n      var containerScrollSize = this._$content[0][\"scroll\" + (0, _inflector.titleize)(this._dimension)] * this._getScaleRatio();\n\n      contentSize = Math.max(containerScrollSize, contentSize);\n    }\n\n    return contentSize;\n  },\n  _validateEvent: function (e) {\n    var $target = (0, _renderer.default)(e.originalEvent.target);\n    return this._isThumb($target) || this._isScrollbar($target) || this._isContent($target);\n  },\n  _isThumb: function ($element) {\n    return this._scrollByThumb && this._scrollbar.isThumb($element);\n  },\n  _isScrollbar: function ($element) {\n    return this._scrollByThumb && $element && $element.is(this._$scrollbar);\n  },\n  _isContent: function ($element) {\n    return this._scrollByContent && !!$element.closest(this._$element).length;\n  },\n  _reachedMin: function () {\n    return this._location <= this._minOffset;\n  },\n  _reachedMax: function () {\n    return this._location >= this._maxOffset;\n  },\n  _cursorEnterHandler: function () {\n    this._resetScaleRatio();\n\n    this._updateScrollbar();\n\n    this._scrollbar.cursorEnter();\n  },\n  _cursorLeaveHandler: function () {\n    this._scrollbar.cursorLeave();\n  },\n  dispose: _common.noop\n});\n\nexports.Scroller = Scroller;\nvar hoveredScrollable;\nvar activeScrollable;\n\nvar SimulatedStrategy = _class.default.inherit({\n  ctor: function (scrollable) {\n    this._init(scrollable);\n  },\n  _init: function (scrollable) {\n    this._component = scrollable;\n    this._$element = scrollable.$element();\n    this._$container = scrollable._$container;\n    this._$wrapper = scrollable._$wrapper;\n    this._$content = scrollable._$content;\n    this.option = scrollable.option.bind(scrollable);\n    this._createActionByOption = scrollable._createActionByOption.bind(scrollable);\n    this._isLocked = scrollable._isLocked.bind(scrollable);\n    this._isDirection = scrollable._isDirection.bind(scrollable);\n    this._allowedDirection = scrollable._allowedDirection.bind(scrollable);\n    this._getScrollOffset = scrollable._getScrollOffset.bind(scrollable);\n  },\n  render: function () {\n    this._$element.addClass(SCROLLABLE_SIMULATED_CLASS);\n\n    this._createScrollers();\n\n    if (this.option(\"useKeyboard\")) {\n      this._$container.prop(\"tabIndex\", 0);\n    }\n\n    this._attachKeyboardHandler();\n\n    this._attachCursorHandlers();\n  },\n  _createScrollers: function () {\n    this._scrollers = {};\n\n    if (this._isDirection(HORIZONTAL)) {\n      this._createScroller(HORIZONTAL);\n    }\n\n    if (this._isDirection(VERTICAL)) {\n      this._createScroller(VERTICAL);\n    }\n\n    this._$element.toggleClass(SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE, \"always\" === this.option(\"showScrollbar\"));\n\n    this._$element.toggleClass(SCROLLABLE_SCROLLBARS_HIDDEN, !this.option(\"showScrollbar\"));\n  },\n  _createScroller: function (direction) {\n    this._scrollers[direction] = new Scroller(this._scrollerOptions(direction));\n  },\n  _scrollerOptions: function (direction) {\n    return {\n      direction: direction,\n      $content: this._$content,\n      $container: this._$container,\n      $wrapper: this._$wrapper,\n      $element: this._$element,\n      scrollByContent: this.option(\"scrollByContent\"),\n      scrollByThumb: this.option(\"scrollByThumb\"),\n      scrollbarVisible: this.option(\"showScrollbar\"),\n      bounceEnabled: this.option(\"bounceEnabled\"),\n      inertiaEnabled: this.option(\"inertiaEnabled\"),\n      isAnyThumbScrolling: this._isAnyThumbScrolling.bind(this)\n    };\n  },\n  _applyScaleRatio: function (targetLocation) {\n    for (var direction in this._scrollers) {\n      var prop = this._getPropByDirection(direction);\n\n      if ((0, _type.isDefined)(targetLocation[prop])) {\n        var scroller = this._scrollers[direction];\n        targetLocation[prop] *= scroller._getScaleRatio();\n      }\n    }\n\n    return targetLocation;\n  },\n  _isAnyThumbScrolling: function ($target) {\n    var result = false;\n\n    this._eventHandler(\"isThumbScrolling\", $target).done(function (isThumbScrollingVertical, isThumbScrollingHorizontal) {\n      result = isThumbScrollingVertical || isThumbScrollingHorizontal;\n    });\n\n    return result;\n  },\n  handleInit: function (e) {\n    this._suppressDirections(e);\n\n    this._eventForUserAction = e;\n\n    this._eventHandler(\"init\", e).done(this._stopAction);\n  },\n  _suppressDirections: function (e) {\n    if ((0, _index.isDxMouseWheelEvent)(e.originalEvent)) {\n      this._prepareDirections(true);\n\n      return;\n    }\n\n    this._prepareDirections();\n\n    this._eachScroller(function (scroller, direction) {\n      var isValid = scroller._validateEvent(e);\n\n      this._validDirections[direction] = isValid;\n    });\n  },\n  _prepareDirections: function (value) {\n    value = value || false;\n    this._validDirections = {};\n    this._validDirections[HORIZONTAL] = value;\n    this._validDirections[VERTICAL] = value;\n  },\n  _eachScroller: function (callback) {\n    callback = callback.bind(this);\n    (0, _iterator.each)(this._scrollers, function (direction, scroller) {\n      callback(scroller, direction);\n    });\n  },\n  handleStart: function (e) {\n    this._eventForUserAction = e;\n\n    this._eventHandler(\"start\").done(this._startAction);\n  },\n  _saveActive: function () {\n    activeScrollable = this;\n  },\n  _resetActive: function () {\n    if (activeScrollable === this) {\n      activeScrollable = null;\n    }\n  },\n  handleMove: function (e) {\n    if (this._isLocked()) {\n      e.cancel = true;\n\n      this._resetActive();\n\n      return;\n    }\n\n    this._saveActive();\n\n    e.preventDefault && e.preventDefault();\n\n    this._adjustDistance(e, e.delta);\n\n    this._eventForUserAction = e;\n\n    this._eventHandler(\"move\", e.delta);\n  },\n  _adjustDistance: function (e, distance) {\n    distance.x *= this._validDirections[HORIZONTAL];\n    distance.y *= this._validDirections[VERTICAL];\n\n    var devicePixelRatio = this._tryGetDevicePixelRatio();\n\n    if (devicePixelRatio && (0, _index.isDxMouseWheelEvent)(e.originalEvent)) {\n      distance.x = Math.round(distance.x / devicePixelRatio * 100) / 100;\n      distance.y = Math.round(distance.y / devicePixelRatio * 100) / 100;\n    }\n  },\n  _tryGetDevicePixelRatio: function () {\n    if ((0, _window.hasWindow)()) {\n      return (0, _window.getWindow)().devicePixelRatio;\n    }\n  },\n  handleEnd: function (e) {\n    this._resetActive();\n\n    this._refreshCursorState(e.originalEvent && e.originalEvent.target);\n\n    this._adjustDistance(e, e.velocity);\n\n    this._eventForUserAction = e;\n    return this._eventHandler(\"end\", e.velocity).done(this._endAction);\n  },\n  handleCancel: function (e) {\n    this._resetActive();\n\n    this._eventForUserAction = e;\n    return this._eventHandler(\"end\", {\n      x: 0,\n      y: 0\n    });\n  },\n  handleStop: function () {\n    this._resetActive();\n\n    this._eventHandler(\"stop\");\n  },\n  handleScroll: function () {\n    this._component._updateRtlConfig();\n\n    this._scrollAction();\n  },\n  _attachKeyboardHandler: function () {\n    _events_engine.default.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\n\n    if (!this.option(\"disabled\") && this.option(\"useKeyboard\")) {\n      _events_engine.default.on(this._$element, (0, _index.addNamespace)(\"keydown\", SCROLLABLE_SIMULATED_KEYBOARD), this._keyDownHandler.bind(this));\n    }\n  },\n  _keyDownHandler: function (e) {\n    var _this4 = this;\n\n    clearTimeout(this._updateHandlerTimeout);\n    this._updateHandlerTimeout = setTimeout(function () {\n      if ((0, _index.normalizeKeyName)(e) === KEY_CODES.TAB) {\n        _this4._eachScroller(function (scroller) {\n          scroller._updateHandler();\n        });\n      }\n    });\n\n    if (!this._$container.is(_dom_adapter.default.getActiveElement())) {\n      return;\n    }\n\n    var handled = true;\n\n    switch ((0, _index.normalizeKeyName)(e)) {\n      case KEY_CODES.DOWN:\n        this._scrollByLine({\n          y: 1\n        });\n\n        break;\n\n      case KEY_CODES.UP:\n        this._scrollByLine({\n          y: -1\n        });\n\n        break;\n\n      case KEY_CODES.RIGHT:\n        this._scrollByLine({\n          x: 1\n        });\n\n        break;\n\n      case KEY_CODES.LEFT:\n        this._scrollByLine({\n          x: -1\n        });\n\n        break;\n\n      case KEY_CODES.PAGE_DOWN:\n        this._scrollByPage(1);\n\n        break;\n\n      case KEY_CODES.PAGE_UP:\n        this._scrollByPage(-1);\n\n        break;\n\n      case KEY_CODES.HOME:\n        this._scrollToHome();\n\n        break;\n\n      case KEY_CODES.END:\n        this._scrollToEnd();\n\n        break;\n\n      default:\n        handled = false;\n    }\n\n    if (handled) {\n      e.stopPropagation();\n      e.preventDefault();\n    }\n  },\n  _scrollByLine: function (lines) {\n    var devicePixelRatio = this._tryGetDevicePixelRatio();\n\n    var scrollOffset = SCROLL_LINE_HEIGHT;\n\n    if (devicePixelRatio) {\n      scrollOffset = Math.abs(scrollOffset / devicePixelRatio * 100) / 100;\n    }\n\n    this.scrollBy({\n      top: (lines.y || 0) * -scrollOffset,\n      left: (lines.x || 0) * -scrollOffset\n    });\n  },\n  _scrollByPage: function (page) {\n    var prop = this._wheelProp();\n\n    var dimension = this._dimensionByProp(prop);\n\n    var distance = {};\n    distance[prop] = page * -this._$container[dimension]();\n    this.scrollBy(distance);\n  },\n  _dimensionByProp: function (prop) {\n    return \"left\" === prop ? \"width\" : \"height\";\n  },\n  _getPropByDirection: function (direction) {\n    return direction === HORIZONTAL ? \"left\" : \"top\";\n  },\n  _scrollToHome: function () {\n    var prop = this._wheelProp();\n\n    var distance = {};\n    distance[prop] = 0;\n\n    this._component.scrollTo(distance);\n  },\n  _scrollToEnd: function () {\n    var prop = this._wheelProp();\n\n    var dimension = this._dimensionByProp(prop);\n\n    var distance = {};\n    distance[prop] = this._$content[dimension]() - this._$container[dimension]();\n\n    this._component.scrollTo(distance);\n  },\n  createActions: function () {\n    this._startAction = this._createActionHandler(\"onStart\");\n    this._stopAction = this._createActionHandler(\"onStop\");\n    this._endAction = this._createActionHandler(\"onEnd\");\n    this._updateAction = this._createActionHandler(\"onUpdated\");\n\n    this._createScrollerActions();\n  },\n  _createScrollerActions: function () {\n    this._scrollAction = this._createActionHandler(\"onScroll\");\n    this._bounceAction = this._createActionHandler(\"onBounce\");\n\n    this._eventHandler(\"createActions\", {\n      scroll: this._scrollAction,\n      bounce: this._bounceAction\n    });\n  },\n  _createActionHandler: function (optionName) {\n    var _arguments = arguments,\n        _this5 = this;\n\n    var actionHandler = this._createActionByOption(optionName);\n\n    return function () {\n      actionHandler((0, _extend.extend)(_this5._createActionArgs(), _arguments));\n    };\n  },\n  _createActionArgs: function () {\n    var _this$_scrollers = this._scrollers,\n        scrollerX = _this$_scrollers.horizontal,\n        scrollerY = _this$_scrollers.vertical;\n\n    var offset = this._getScrollOffset();\n\n    this._scrollOffset = {\n      top: scrollerY && offset.top,\n      left: scrollerX && offset.left\n    };\n    return {\n      event: this._eventForUserAction,\n      scrollOffset: this._scrollOffset,\n      reachedLeft: scrollerX && scrollerX._reachedMax(),\n      reachedRight: scrollerX && scrollerX._reachedMin(),\n      reachedTop: scrollerY && scrollerY._reachedMax(),\n      reachedBottom: scrollerY && scrollerY._reachedMin()\n    };\n  },\n  _eventHandler: function (eventName) {\n    var args = [].slice.call(arguments).slice(1);\n    var deferreds = (0, _iterator.map)(this._scrollers, function (scroller) {\n      return scroller[\"_\" + eventName + \"Handler\"].apply(scroller, args);\n    });\n    return _deferred.when.apply(_renderer.default, deferreds).promise();\n  },\n  location: function location() {\n    var location = (0, _translator.locate)(this._$content);\n    location.top -= this._$container.scrollTop();\n    location.left -= this._$container.scrollLeft();\n    return location;\n  },\n  disabledChanged: function () {\n    this._attachCursorHandlers();\n  },\n  _attachCursorHandlers: function () {\n    _events_engine.default.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\n\n    if (!this.option(\"disabled\") && this._isHoverMode()) {\n      _events_engine.default.on(this._$element, (0, _index.addNamespace)(\"mouseenter\", SCROLLABLE_SIMULATED_CURSOR), this._cursorEnterHandler.bind(this));\n\n      _events_engine.default.on(this._$element, (0, _index.addNamespace)(\"mouseleave\", SCROLLABLE_SIMULATED_CURSOR), this._cursorLeaveHandler.bind(this));\n    }\n  },\n  _isHoverMode: function () {\n    return \"onHover\" === this.option(\"showScrollbar\");\n  },\n  _cursorEnterHandler: function (e) {\n    e = e || {};\n    e.originalEvent = e.originalEvent || {};\n\n    if (activeScrollable || e.originalEvent._hoverHandled) {\n      return;\n    }\n\n    if (hoveredScrollable) {\n      hoveredScrollable._cursorLeaveHandler();\n    }\n\n    hoveredScrollable = this;\n\n    this._eventHandler(\"cursorEnter\");\n\n    e.originalEvent._hoverHandled = true;\n  },\n  _cursorLeaveHandler: function (e) {\n    if (hoveredScrollable !== this || activeScrollable === hoveredScrollable) {\n      return;\n    }\n\n    this._eventHandler(\"cursorLeave\");\n\n    hoveredScrollable = null;\n\n    this._refreshCursorState(e && e.relatedTarget);\n  },\n  _refreshCursorState: function (target) {\n    if (!this._isHoverMode() && (!target || activeScrollable)) {\n      return;\n    }\n\n    var $target = (0, _renderer.default)(target);\n    var $scrollable = $target.closest(\".\".concat(SCROLLABLE_SIMULATED_CLASS, \":not(.dx-state-disabled)\"));\n    var targetScrollable = $scrollable.length && $scrollable.data(SCROLLABLE_STRATEGY);\n\n    if (hoveredScrollable && hoveredScrollable !== targetScrollable) {\n      hoveredScrollable._cursorLeaveHandler();\n    }\n\n    if (targetScrollable) {\n      targetScrollable._cursorEnterHandler();\n    }\n  },\n  update: function () {\n    var _this6 = this;\n\n    var result = this._eventHandler(\"update\").done(this._updateAction);\n\n    return (0, _deferred.when)(result, (0, _common.deferUpdate)(function () {\n      var allowedDirections = _this6._allowedDirections();\n\n      (0, _common.deferRender)(function () {\n        var touchDirection = allowedDirections.vertical ? \"pan-x\" : \"\";\n        touchDirection = allowedDirections.horizontal ? \"pan-y\" : touchDirection;\n        touchDirection = allowedDirections.vertical && allowedDirections.horizontal ? \"none\" : touchDirection;\n\n        _this6._$container.css(\"touchAction\", touchDirection);\n      });\n      return (0, _deferred.when)().promise();\n    }));\n  },\n  _allowedDirections: function () {\n    var bounceEnabled = this.option(\"bounceEnabled\");\n    var verticalScroller = this._scrollers[VERTICAL];\n    var horizontalScroller = this._scrollers[HORIZONTAL];\n    return {\n      vertical: verticalScroller && (verticalScroller._minOffset < 0 || bounceEnabled),\n      horizontal: horizontalScroller && (horizontalScroller._minOffset < 0 || bounceEnabled)\n    };\n  },\n  updateBounds: function () {\n    this._scrollers[HORIZONTAL] && this._scrollers[HORIZONTAL]._updateBounds();\n  },\n  scrollBy: function (distance) {\n    var verticalScroller = this._scrollers[VERTICAL];\n    var horizontalScroller = this._scrollers[HORIZONTAL];\n\n    if (verticalScroller) {\n      distance.top = verticalScroller._boundLocation(distance.top + verticalScroller._location) - verticalScroller._location;\n    }\n\n    if (horizontalScroller) {\n      distance.left = horizontalScroller._boundLocation(distance.left + horizontalScroller._location) - horizontalScroller._location;\n    }\n\n    this._prepareDirections(true);\n\n    this._startAction();\n\n    this._eventHandler(\"scrollBy\", {\n      x: distance.left,\n      y: distance.top\n    });\n\n    this._endAction();\n  },\n  validate: function (e) {\n    if ((0, _index.isDxMouseWheelEvent)(e) && (0, _index.isCommandKeyPressed)(e)) {\n      return false;\n    }\n\n    if (this.option(\"disabled\")) {\n      return false;\n    }\n\n    if (this.option(\"bounceEnabled\")) {\n      return true;\n    }\n\n    return (0, _index.isDxMouseWheelEvent)(e) ? this._validateWheel(e) : this._validateMove(e);\n  },\n  _validateWheel: function (e) {\n    var _this7 = this;\n\n    var scroller = this._scrollers[this._wheelDirection(e)];\n\n    var reachedMin = scroller._reachedMin();\n\n    var reachedMax = scroller._reachedMax();\n\n    var contentGreaterThanContainer = !reachedMin || !reachedMax;\n    var locatedNotAtBound = !reachedMin && !reachedMax;\n    var scrollFromMin = reachedMin && e.delta > 0;\n    var scrollFromMax = reachedMax && e.delta < 0;\n    var validated = contentGreaterThanContainer && (locatedNotAtBound || scrollFromMin || scrollFromMax);\n    validated = validated || void 0 !== this._validateWheelTimer;\n\n    if (validated) {\n      clearTimeout(this._validateWheelTimer);\n      this._validateWheelTimer = setTimeout(function () {\n        _this7._validateWheelTimer = void 0;\n      }, VALIDATE_WHEEL_TIMEOUT);\n    }\n\n    return validated;\n  },\n  _validateMove: function (e) {\n    if (!this.option(\"scrollByContent\") && !(0, _renderer.default)(e.target).closest(\".\".concat(SCROLLABLE_SCROLLBAR_CLASS)).length) {\n      return false;\n    }\n\n    return this._allowedDirection();\n  },\n  getDirection: function (e) {\n    return (0, _index.isDxMouseWheelEvent)(e) ? this._wheelDirection(e) : this._allowedDirection();\n  },\n  _wheelProp: function () {\n    return this._wheelDirection() === HORIZONTAL ? \"left\" : \"top\";\n  },\n  _wheelDirection: function (e) {\n    switch (this.option(\"direction\")) {\n      case HORIZONTAL:\n        return HORIZONTAL;\n\n      case VERTICAL:\n        return VERTICAL;\n\n      default:\n        return e && e.shiftKey ? HORIZONTAL : VERTICAL;\n    }\n  },\n  verticalOffset: function () {\n    return 0;\n  },\n  dispose: function () {\n    this._resetActive();\n\n    if (hoveredScrollable === this) {\n      hoveredScrollable = null;\n    }\n\n    this._eventHandler(\"dispose\");\n\n    this._detachEventHandlers();\n\n    this._$element.removeClass(SCROLLABLE_SIMULATED_CLASS);\n\n    this._eventForUserAction = null;\n    clearTimeout(this._validateWheelTimer);\n    clearTimeout(this._updateHandlerTimeout);\n  },\n  _detachEventHandlers: function () {\n    _events_engine.default.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\n\n    _events_engine.default.off(this._$container, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\n  }\n});\n\nexports.SimulatedStrategy = SimulatedStrategy;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/scroll_view/ui.scrollable.simulated.js"],"names":["exports","SimulatedStrategy","Scroller","_renderer","_interopRequireDefault","require","_dom_adapter","_events_engine","_inflector","_extend","_window","_iterator","_type","_position","_translator","_class","_animator","_devices","_index","_common","_ui","_deferred","obj","__esModule","realDevice","default","real","isSluggishPlatform","platform","SCROLLABLE_SIMULATED","SCROLLABLE_STRATEGY","SCROLLABLE_SIMULATED_CURSOR","SCROLLABLE_SIMULATED_KEYBOARD","SCROLLABLE_SIMULATED_CLASS","SCROLLABLE_SCROLLBARS_HIDDEN","SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE","SCROLLABLE_SCROLLBAR_CLASS","VERTICAL","HORIZONTAL","ACCELERATION","OUT_BOUNDS_ACCELERATION","MIN_VELOCITY_LIMIT","FRAME_DURATION","Math","round","SCROLL_LINE_HEIGHT","VALIDATE_WHEEL_TIMEOUT","BOUNCE_MIN_VELOCITY_LIMIT","BOUNCE_DURATION","BOUNCE_FRAMES","BOUNCE_ACCELERATION_SUM","pow","KEY_CODES","PAGE_UP","PAGE_DOWN","END","HOME","LEFT","UP","RIGHT","DOWN","TAB","InertiaAnimator","inherit","ctor","scroller","callBase","VELOCITY_LIMIT","_isFinished","abs","_velocity","_step","_scrollStep","_acceleration","_inBounds","_complete","_scrollComplete","_stop","_stopComplete","BounceAnimator","_crossBoundOnNextStep","_move","_bounceLocation","options","_initOptions","_initAnimators","_initScrollbar","_this","_location","_topReached","_bottomReached","_axis","direction","_prop","_dimension","_scrollProp","each","optionName","optionValue","_inertiaAnimator","_bounceAnimator","_scrollbar","appendTo","_$container","_direction","visible","_scrollByThumb","visibilityMode","_visibilityModeNormalize","_scrollbarVisible","expandable","_$scrollbar","$element","mode","delta","prevLocation","_suppressBounce","triggerHandler","type","_bounceEnabled","_boundLocation","location","max","min","_maxOffset","_minOffset","_getScaleRatio","_moveContent","_moveScrollbar","_moveContentByTranslator","hasWindow","_scaleRatio","element","_$element","get","realDimension","_getRealDimension","baseDimension","_getBaseDimension","dimension","getBoundingRect","dimensionName","titleize","translateOffset","minOffset","_maxScrollPropValue","_translateOffset","targetLocation","resetPosition","_$content","move","moveTo","_hideScrollbar","_completeDeferred","resolve","_scrollToBounds","_bounceAction","_setupBounce","start","boundLocation","bounceDistance","nextLocation","_initHandler","e","_stopDeferred","Deferred","_stopScrolling","_prepareThumbScrolling","promise","deferRenderer","stop","isDxMouseWheelEvent","originalEvent","$target","target","scrollbarClicked","_isScrollbar","_moveToMouseLocation","_thumbScrolling","_isThumb","_crossThumbScrolling","_isAnyThumbScrolling","feedbackOn","_isThumbScrollingHandler","mouseLocation","toUpperCase","offset","_containerToContentRatio","height","_startHandler","_showScrollbar","_moveHandler","_scrollBy","_scrollByHandler","containerToContentRatio","_endHandler","velocity","_inertiaHandler","_resetThumbScrolling","_suppressInertia","_inertiaEnabled","_stopHandler","_disposeHandler","remove","_updateHandler","_update","_moveToBounds","_this2","deferUpdate","_resetScaleRatio","_updateLocation","_updateBounds","_updateScrollbar","deferRender","update","locate","_getMaxOffset","_getMinOffset","_contentSize","_containerSize","deferUpdater","_this3","containerSize","contentSize","baseContainerSize","baseContentSize","option","scaleRatio","locationChanged","_scrollAction","_createActionsHandler","actions","scroll","bounce","isOverflowHidden","css","containerScrollSize","_validateEvent","_isContent","isThumb","is","_scrollByContent","closest","length","_reachedMin","_reachedMax","_cursorEnterHandler","cursorEnter","_cursorLeaveHandler","cursorLeave","dispose","noop","hoveredScrollable","activeScrollable","scrollable","_init","_component","_$wrapper","bind","_createActionByOption","_isLocked","_isDirection","_allowedDirection","_getScrollOffset","render","addClass","_createScrollers","prop","_attachKeyboardHandler","_attachCursorHandlers","_scrollers","_createScroller","toggleClass","_scrollerOptions","$content","$container","$wrapper","scrollByContent","scrollByThumb","scrollbarVisible","bounceEnabled","inertiaEnabled","isAnyThumbScrolling","_applyScaleRatio","_getPropByDirection","isDefined","result","_eventHandler","done","isThumbScrollingVertical","isThumbScrollingHorizontal","handleInit","_suppressDirections","_eventForUserAction","_stopAction","_prepareDirections","_eachScroller","isValid","_validDirections","value","callback","handleStart","_startAction","_saveActive","_resetActive","handleMove","cancel","preventDefault","_adjustDistance","distance","x","y","devicePixelRatio","_tryGetDevicePixelRatio","getWindow","handleEnd","_refreshCursorState","_endAction","handleCancel","handleStop","handleScroll","_updateRtlConfig","off","concat","on","addNamespace","_keyDownHandler","_this4","clearTimeout","_updateHandlerTimeout","setTimeout","normalizeKeyName","getActiveElement","handled","_scrollByLine","_scrollByPage","_scrollToHome","_scrollToEnd","stopPropagation","lines","scrollOffset","scrollBy","top","left","page","_wheelProp","_dimensionByProp","scrollTo","createActions","_createActionHandler","_updateAction","_createScrollerActions","_arguments","arguments","_this5","actionHandler","extend","_createActionArgs","_this$_scrollers","scrollerX","horizontal","scrollerY","vertical","_scrollOffset","event","reachedLeft","reachedRight","reachedTop","reachedBottom","eventName","args","slice","call","deferreds","map","apply","when","scrollTop","scrollLeft","disabledChanged","_isHoverMode","_hoverHandled","relatedTarget","$scrollable","targetScrollable","data","_this6","allowedDirections","_allowedDirections","touchDirection","verticalScroller","horizontalScroller","updateBounds","validate","isCommandKeyPressed","_validateWheel","_validateMove","_this7","_wheelDirection","reachedMin","reachedMax","contentGreaterThanContainer","locatedNotAtBound","scrollFromMin","scrollFromMax","validated","_validateWheelTimer","getDirection","shiftKey","verticalOffset","_detachEventHandlers","removeClass"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/scroll_view/ui.scrollable.simulated.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.SimulatedStrategy = exports.Scroller = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _dom_adapter = _interopRequireDefault(require(\"../../core/dom_adapter\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _inflector = require(\"../../core/utils/inflector\");\r\nvar _extend = require(\"../../core/utils/extend\");\r\nvar _window = require(\"../../core/utils/window\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _type = require(\"../../core/utils/type\");\r\nvar _position = require(\"../../core/utils/position\");\r\nvar _translator = require(\"../../animation/translator\");\r\nvar _class = _interopRequireDefault(require(\"../../core/class\"));\r\nvar _animator = _interopRequireDefault(require(\"./animator\"));\r\nvar _devices = _interopRequireDefault(require(\"../../core/devices\"));\r\nvar _index = require(\"../../events/utils/index\");\r\nvar _common = require(\"../../core/utils/common\");\r\nvar _ui = _interopRequireDefault(require(\"./ui.scrollbar\"));\r\nvar _deferred = require(\"../../core/utils/deferred\");\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar realDevice = _devices.default.real;\r\nvar isSluggishPlatform = \"android\" === realDevice.platform;\r\nvar SCROLLABLE_SIMULATED = \"dxSimulatedScrollable\";\r\nvar SCROLLABLE_STRATEGY = \"dxScrollableStrategy\";\r\nvar SCROLLABLE_SIMULATED_CURSOR = SCROLLABLE_SIMULATED + \"Cursor\";\r\nvar SCROLLABLE_SIMULATED_KEYBOARD = SCROLLABLE_SIMULATED + \"Keyboard\";\r\nvar SCROLLABLE_SIMULATED_CLASS = \"dx-scrollable-simulated\";\r\nvar SCROLLABLE_SCROLLBARS_HIDDEN = \"dx-scrollable-scrollbars-hidden\";\r\nvar SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE = \"dx-scrollable-scrollbars-alwaysvisible\";\r\nvar SCROLLABLE_SCROLLBAR_CLASS = \"dx-scrollable-scrollbar\";\r\nvar VERTICAL = \"vertical\";\r\nvar HORIZONTAL = \"horizontal\";\r\nvar ACCELERATION = isSluggishPlatform ? .95 : .92;\r\nvar OUT_BOUNDS_ACCELERATION = .5;\r\nvar MIN_VELOCITY_LIMIT = 1;\r\nvar FRAME_DURATION = Math.round(1e3 / 60);\r\nvar SCROLL_LINE_HEIGHT = 40;\r\nvar VALIDATE_WHEEL_TIMEOUT = 500;\r\nvar BOUNCE_MIN_VELOCITY_LIMIT = MIN_VELOCITY_LIMIT / 5;\r\nvar BOUNCE_DURATION = isSluggishPlatform ? 300 : 400;\r\nvar BOUNCE_FRAMES = BOUNCE_DURATION / FRAME_DURATION;\r\nvar BOUNCE_ACCELERATION_SUM = (1 - Math.pow(ACCELERATION, BOUNCE_FRAMES)) / (1 - ACCELERATION);\r\nvar KEY_CODES = {\r\n    PAGE_UP: \"pageUp\",\r\n    PAGE_DOWN: \"pageDown\",\r\n    END: \"end\",\r\n    HOME: \"home\",\r\n    LEFT: \"leftArrow\",\r\n    UP: \"upArrow\",\r\n    RIGHT: \"rightArrow\",\r\n    DOWN: \"downArrow\",\r\n    TAB: \"tab\"\r\n};\r\nvar InertiaAnimator = _animator.default.inherit({\r\n    ctor: function(scroller) {\r\n        this.callBase();\r\n        this.scroller = scroller\r\n    },\r\n    VELOCITY_LIMIT: MIN_VELOCITY_LIMIT,\r\n    _isFinished: function() {\r\n        return Math.abs(this.scroller._velocity) <= this.VELOCITY_LIMIT\r\n    },\r\n    _step: function() {\r\n        this.scroller._scrollStep(this.scroller._velocity);\r\n        this.scroller._velocity *= this._acceleration()\r\n    },\r\n    _acceleration: function() {\r\n        return this.scroller._inBounds() ? ACCELERATION : OUT_BOUNDS_ACCELERATION\r\n    },\r\n    _complete: function() {\r\n        this.scroller._scrollComplete()\r\n    },\r\n    _stop: function() {\r\n        this.scroller._stopComplete()\r\n    }\r\n});\r\nvar BounceAnimator = InertiaAnimator.inherit({\r\n    VELOCITY_LIMIT: BOUNCE_MIN_VELOCITY_LIMIT,\r\n    _isFinished: function() {\r\n        return this.scroller._crossBoundOnNextStep() || this.callBase()\r\n    },\r\n    _acceleration: function() {\r\n        return ACCELERATION\r\n    },\r\n    _complete: function() {\r\n        this.scroller._move(this.scroller._bounceLocation);\r\n        this.callBase()\r\n    }\r\n});\r\nvar Scroller = _class.default.inherit({\r\n    ctor: function(options) {\r\n        this._initOptions(options);\r\n        this._initAnimators();\r\n        this._initScrollbar()\r\n    },\r\n    _initOptions: function(options) {\r\n        var _this = this;\r\n        this._location = 0;\r\n        this._topReached = false;\r\n        this._bottomReached = false;\r\n        this._axis = options.direction === HORIZONTAL ? \"x\" : \"y\";\r\n        this._prop = options.direction === HORIZONTAL ? \"left\" : \"top\";\r\n        this._dimension = options.direction === HORIZONTAL ? \"width\" : \"height\";\r\n        this._scrollProp = options.direction === HORIZONTAL ? \"scrollLeft\" : \"scrollTop\";\r\n        (0, _iterator.each)(options, function(optionName, optionValue) {\r\n            _this[\"_\" + optionName] = optionValue\r\n        })\r\n    },\r\n    _initAnimators: function() {\r\n        this._inertiaAnimator = new InertiaAnimator(this);\r\n        this._bounceAnimator = new BounceAnimator(this)\r\n    },\r\n    _initScrollbar: function() {\r\n        this._scrollbar = new _ui.default((0, _renderer.default)(\"<div>\").appendTo(this._$container), {\r\n            direction: this._direction,\r\n            visible: this._scrollByThumb,\r\n            visibilityMode: this._visibilityModeNormalize(this._scrollbarVisible),\r\n            expandable: this._scrollByThumb\r\n        });\r\n        this._$scrollbar = this._scrollbar.$element()\r\n    },\r\n    _visibilityModeNormalize: function(mode) {\r\n        return true === mode ? \"onScroll\" : false === mode ? \"never\" : mode\r\n    },\r\n    _scrollStep: function(delta) {\r\n        var prevLocation = this._location;\r\n        this._location += delta;\r\n        this._suppressBounce();\r\n        this._move();\r\n        if (Math.abs(prevLocation - this._location) < 1) {\r\n            return\r\n        }\r\n        _events_engine.default.triggerHandler(this._$container, {\r\n            type: \"scroll\"\r\n        })\r\n    },\r\n    _suppressBounce: function() {\r\n        if (this._bounceEnabled || this._inBounds(this._location)) {\r\n            return\r\n        }\r\n        this._velocity = 0;\r\n        this._location = this._boundLocation()\r\n    },\r\n    _boundLocation: function(location) {\r\n        location = void 0 !== location ? location : this._location;\r\n        return Math.max(Math.min(location, this._maxOffset), this._minOffset)\r\n    },\r\n    _move: function(location) {\r\n        this._location = void 0 !== location ? location * this._getScaleRatio() : this._location;\r\n        this._moveContent();\r\n        this._moveScrollbar()\r\n    },\r\n    _moveContent: function() {\r\n        var location = this._location;\r\n        this._$container[this._scrollProp](-location / this._getScaleRatio());\r\n        this._moveContentByTranslator(location)\r\n    },\r\n    _getScaleRatio: function() {\r\n        if ((0, _window.hasWindow)() && !this._scaleRatio) {\r\n            var element = this._$element.get(0);\r\n            var realDimension = this._getRealDimension(element, this._dimension);\r\n            var baseDimension = this._getBaseDimension(element, this._dimension);\r\n            this._scaleRatio = Math.round(realDimension / baseDimension * 100) / 100\r\n        }\r\n        return this._scaleRatio || 1\r\n    },\r\n    _getRealDimension: function(element, dimension) {\r\n        return Math.round((0, _position.getBoundingRect)(element)[dimension])\r\n    },\r\n    _getBaseDimension: function(element, dimension) {\r\n        var dimensionName = \"offset\" + (0, _inflector.titleize)(dimension);\r\n        return element[dimensionName]\r\n    },\r\n    _moveContentByTranslator: function(location) {\r\n        var translateOffset;\r\n        var minOffset = -this._maxScrollPropValue;\r\n        if (location > 0) {\r\n            translateOffset = location\r\n        } else {\r\n            if (location <= minOffset) {\r\n                translateOffset = location - minOffset\r\n            } else {\r\n                translateOffset = location % 1\r\n            }\r\n        }\r\n        if (this._translateOffset === translateOffset) {\r\n            return\r\n        }\r\n        var targetLocation = {};\r\n        targetLocation[this._prop] = translateOffset;\r\n        this._translateOffset = translateOffset;\r\n        if (0 === translateOffset) {\r\n            (0, _translator.resetPosition)(this._$content);\r\n            return\r\n        }(0, _translator.move)(this._$content, targetLocation)\r\n    },\r\n    _moveScrollbar: function() {\r\n        this._scrollbar.moveTo(this._location)\r\n    },\r\n    _scrollComplete: function() {\r\n        if (this._inBounds()) {\r\n            this._hideScrollbar();\r\n            if (this._completeDeferred) {\r\n                this._completeDeferred.resolve()\r\n            }\r\n        }\r\n        this._scrollToBounds()\r\n    },\r\n    _scrollToBounds: function() {\r\n        if (this._inBounds()) {\r\n            return\r\n        }\r\n        this._bounceAction();\r\n        this._setupBounce();\r\n        this._bounceAnimator.start()\r\n    },\r\n    _setupBounce: function() {\r\n        var boundLocation = this._bounceLocation = this._boundLocation();\r\n        var bounceDistance = boundLocation - this._location;\r\n        this._velocity = bounceDistance / BOUNCE_ACCELERATION_SUM\r\n    },\r\n    _inBounds: function(location) {\r\n        location = void 0 !== location ? location : this._location;\r\n        return this._boundLocation(location) === location\r\n    },\r\n    _crossBoundOnNextStep: function() {\r\n        var location = this._location;\r\n        var nextLocation = location + this._velocity;\r\n        return location < this._minOffset && nextLocation >= this._minOffset || location > this._maxOffset && nextLocation <= this._maxOffset\r\n    },\r\n    _initHandler: function(e) {\r\n        this._stopDeferred = new _deferred.Deferred;\r\n        this._stopScrolling();\r\n        this._prepareThumbScrolling(e);\r\n        return this._stopDeferred.promise()\r\n    },\r\n    _stopScrolling: (0, _common.deferRenderer)(function() {\r\n        this._hideScrollbar();\r\n        this._inertiaAnimator.stop();\r\n        this._bounceAnimator.stop()\r\n    }),\r\n    _prepareThumbScrolling: function(e) {\r\n        if ((0, _index.isDxMouseWheelEvent)(e.originalEvent)) {\r\n            return\r\n        }\r\n        var $target = (0, _renderer.default)(e.originalEvent.target);\r\n        var scrollbarClicked = this._isScrollbar($target);\r\n        if (scrollbarClicked) {\r\n            this._moveToMouseLocation(e)\r\n        }\r\n        this._thumbScrolling = scrollbarClicked || this._isThumb($target);\r\n        this._crossThumbScrolling = !this._thumbScrolling && this._isAnyThumbScrolling($target);\r\n        if (this._thumbScrolling) {\r\n            this._scrollbar.feedbackOn()\r\n        }\r\n    },\r\n    _isThumbScrollingHandler: function($target) {\r\n        return this._isThumb($target)\r\n    },\r\n    _moveToMouseLocation: function(e) {\r\n        var mouseLocation = e[\"page\" + this._axis.toUpperCase()] - this._$element.offset()[this._prop];\r\n        var location = this._location + mouseLocation / this._containerToContentRatio() - this._$container.height() / 2;\r\n        this._scrollStep(-Math.round(location))\r\n    },\r\n    _stopComplete: function() {\r\n        if (this._stopDeferred) {\r\n            this._stopDeferred.resolve()\r\n        }\r\n    },\r\n    _startHandler: function() {\r\n        this._showScrollbar()\r\n    },\r\n    _moveHandler: function(delta) {\r\n        if (this._crossThumbScrolling) {\r\n            return\r\n        }\r\n        if (this._thumbScrolling) {\r\n            delta[this._axis] = -Math.round(delta[this._axis] / this._containerToContentRatio())\r\n        }\r\n        this._scrollBy(delta)\r\n    },\r\n    _scrollBy: function(delta) {\r\n        delta = delta[this._axis];\r\n        if (!this._inBounds()) {\r\n            delta *= OUT_BOUNDS_ACCELERATION\r\n        }\r\n        this._scrollStep(delta)\r\n    },\r\n    _scrollByHandler: function(delta) {\r\n        this._scrollBy(delta);\r\n        this._scrollComplete()\r\n    },\r\n    _containerToContentRatio: function() {\r\n        return this._scrollbar.containerToContentRatio()\r\n    },\r\n    _endHandler: function(velocity) {\r\n        this._completeDeferred = new _deferred.Deferred;\r\n        this._velocity = velocity[this._axis];\r\n        this._inertiaHandler();\r\n        this._resetThumbScrolling();\r\n        return this._completeDeferred.promise()\r\n    },\r\n    _inertiaHandler: function() {\r\n        this._suppressInertia();\r\n        this._inertiaAnimator.start()\r\n    },\r\n    _suppressInertia: function() {\r\n        if (!this._inertiaEnabled || this._thumbScrolling) {\r\n            this._velocity = 0\r\n        }\r\n    },\r\n    _resetThumbScrolling: function() {\r\n        this._thumbScrolling = false;\r\n        this._crossThumbScrolling = false\r\n    },\r\n    _stopHandler: function() {\r\n        if (this._thumbScrolling) {\r\n            this._scrollComplete()\r\n        }\r\n        this._resetThumbScrolling();\r\n        this._scrollToBounds()\r\n    },\r\n    _disposeHandler: function() {\r\n        this._stopScrolling();\r\n        this._$scrollbar.remove()\r\n    },\r\n    _updateHandler: function() {\r\n        this._update();\r\n        this._moveToBounds()\r\n    },\r\n    _update: function() {\r\n        var _this2 = this;\r\n        this._stopScrolling();\r\n        return (0, _common.deferUpdate)(function() {\r\n            _this2._resetScaleRatio();\r\n            _this2._updateLocation();\r\n            _this2._updateBounds();\r\n            _this2._updateScrollbar();\r\n            (0, _common.deferRender)(function() {\r\n                _this2._moveScrollbar();\r\n                _this2._scrollbar.update()\r\n            })\r\n        })\r\n    },\r\n    _resetScaleRatio: function() {\r\n        this._scaleRatio = null\r\n    },\r\n    _updateLocation: function() {\r\n        this._location = ((0, _translator.locate)(this._$content)[this._prop] - this._$container[this._scrollProp]()) * this._getScaleRatio()\r\n    },\r\n    _updateBounds: function() {\r\n        this._maxOffset = Math.round(this._getMaxOffset());\r\n        this._minOffset = Math.round(this._getMinOffset())\r\n    },\r\n    _getMaxOffset: function() {\r\n        return 0\r\n    },\r\n    _getMinOffset: function() {\r\n        this._maxScrollPropValue = Math.max(this._contentSize() - this._containerSize(), 0);\r\n        return -this._maxScrollPropValue\r\n    },\r\n    _updateScrollbar: (0, _common.deferUpdater)(function() {\r\n        var _this3 = this;\r\n        var containerSize = this._containerSize();\r\n        var contentSize = this._contentSize();\r\n        var baseContainerSize = this._getBaseDimension(this._$container.get(0), this._dimension);\r\n        var baseContentSize = this._getBaseDimension(this._$content.get(0), this._dimension);\r\n        (0, _common.deferRender)(function() {\r\n            _this3._scrollbar.option({\r\n                containerSize: containerSize,\r\n                contentSize: contentSize,\r\n                baseContainerSize: baseContainerSize,\r\n                baseContentSize: baseContentSize,\r\n                scaleRatio: _this3._getScaleRatio()\r\n            })\r\n        })\r\n    }),\r\n    _moveToBounds: (0, _common.deferRenderer)((0, _common.deferUpdater)((0, _common.deferRenderer)(function() {\r\n        var location = this._boundLocation();\r\n        var locationChanged = location !== this._location;\r\n        this._location = location;\r\n        this._move();\r\n        if (locationChanged) {\r\n            this._scrollAction()\r\n        }\r\n    }))),\r\n    _createActionsHandler: function(actions) {\r\n        this._scrollAction = actions.scroll;\r\n        this._bounceAction = actions.bounce\r\n    },\r\n    _showScrollbar: function() {\r\n        this._scrollbar.option(\"visible\", true)\r\n    },\r\n    _hideScrollbar: function() {\r\n        this._scrollbar.option(\"visible\", false)\r\n    },\r\n    _containerSize: function() {\r\n        return this._getRealDimension(this._$container.get(0), this._dimension)\r\n    },\r\n    _contentSize: function() {\r\n        var isOverflowHidden = \"hidden\" === this._$content.css(\"overflow\" + this._axis.toUpperCase());\r\n        var contentSize = this._getRealDimension(this._$content.get(0), this._dimension);\r\n        if (!isOverflowHidden) {\r\n            var containerScrollSize = this._$content[0][\"scroll\" + (0, _inflector.titleize)(this._dimension)] * this._getScaleRatio();\r\n            contentSize = Math.max(containerScrollSize, contentSize)\r\n        }\r\n        return contentSize\r\n    },\r\n    _validateEvent: function(e) {\r\n        var $target = (0, _renderer.default)(e.originalEvent.target);\r\n        return this._isThumb($target) || this._isScrollbar($target) || this._isContent($target)\r\n    },\r\n    _isThumb: function($element) {\r\n        return this._scrollByThumb && this._scrollbar.isThumb($element)\r\n    },\r\n    _isScrollbar: function($element) {\r\n        return this._scrollByThumb && $element && $element.is(this._$scrollbar)\r\n    },\r\n    _isContent: function($element) {\r\n        return this._scrollByContent && !!$element.closest(this._$element).length\r\n    },\r\n    _reachedMin: function() {\r\n        return this._location <= this._minOffset\r\n    },\r\n    _reachedMax: function() {\r\n        return this._location >= this._maxOffset\r\n    },\r\n    _cursorEnterHandler: function() {\r\n        this._resetScaleRatio();\r\n        this._updateScrollbar();\r\n        this._scrollbar.cursorEnter()\r\n    },\r\n    _cursorLeaveHandler: function() {\r\n        this._scrollbar.cursorLeave()\r\n    },\r\n    dispose: _common.noop\r\n});\r\nexports.Scroller = Scroller;\r\nvar hoveredScrollable;\r\nvar activeScrollable;\r\nvar SimulatedStrategy = _class.default.inherit({\r\n    ctor: function(scrollable) {\r\n        this._init(scrollable)\r\n    },\r\n    _init: function(scrollable) {\r\n        this._component = scrollable;\r\n        this._$element = scrollable.$element();\r\n        this._$container = scrollable._$container;\r\n        this._$wrapper = scrollable._$wrapper;\r\n        this._$content = scrollable._$content;\r\n        this.option = scrollable.option.bind(scrollable);\r\n        this._createActionByOption = scrollable._createActionByOption.bind(scrollable);\r\n        this._isLocked = scrollable._isLocked.bind(scrollable);\r\n        this._isDirection = scrollable._isDirection.bind(scrollable);\r\n        this._allowedDirection = scrollable._allowedDirection.bind(scrollable);\r\n        this._getScrollOffset = scrollable._getScrollOffset.bind(scrollable)\r\n    },\r\n    render: function() {\r\n        this._$element.addClass(SCROLLABLE_SIMULATED_CLASS);\r\n        this._createScrollers();\r\n        if (this.option(\"useKeyboard\")) {\r\n            this._$container.prop(\"tabIndex\", 0)\r\n        }\r\n        this._attachKeyboardHandler();\r\n        this._attachCursorHandlers()\r\n    },\r\n    _createScrollers: function() {\r\n        this._scrollers = {};\r\n        if (this._isDirection(HORIZONTAL)) {\r\n            this._createScroller(HORIZONTAL)\r\n        }\r\n        if (this._isDirection(VERTICAL)) {\r\n            this._createScroller(VERTICAL)\r\n        }\r\n        this._$element.toggleClass(SCROLLABLE_SCROLLBARS_ALWAYSVISIBLE, \"always\" === this.option(\"showScrollbar\"));\r\n        this._$element.toggleClass(SCROLLABLE_SCROLLBARS_HIDDEN, !this.option(\"showScrollbar\"))\r\n    },\r\n    _createScroller: function(direction) {\r\n        this._scrollers[direction] = new Scroller(this._scrollerOptions(direction))\r\n    },\r\n    _scrollerOptions: function(direction) {\r\n        return {\r\n            direction: direction,\r\n            $content: this._$content,\r\n            $container: this._$container,\r\n            $wrapper: this._$wrapper,\r\n            $element: this._$element,\r\n            scrollByContent: this.option(\"scrollByContent\"),\r\n            scrollByThumb: this.option(\"scrollByThumb\"),\r\n            scrollbarVisible: this.option(\"showScrollbar\"),\r\n            bounceEnabled: this.option(\"bounceEnabled\"),\r\n            inertiaEnabled: this.option(\"inertiaEnabled\"),\r\n            isAnyThumbScrolling: this._isAnyThumbScrolling.bind(this)\r\n        }\r\n    },\r\n    _applyScaleRatio: function(targetLocation) {\r\n        for (var direction in this._scrollers) {\r\n            var prop = this._getPropByDirection(direction);\r\n            if ((0, _type.isDefined)(targetLocation[prop])) {\r\n                var scroller = this._scrollers[direction];\r\n                targetLocation[prop] *= scroller._getScaleRatio()\r\n            }\r\n        }\r\n        return targetLocation\r\n    },\r\n    _isAnyThumbScrolling: function($target) {\r\n        var result = false;\r\n        this._eventHandler(\"isThumbScrolling\", $target).done(function(isThumbScrollingVertical, isThumbScrollingHorizontal) {\r\n            result = isThumbScrollingVertical || isThumbScrollingHorizontal\r\n        });\r\n        return result\r\n    },\r\n    handleInit: function(e) {\r\n        this._suppressDirections(e);\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"init\", e).done(this._stopAction)\r\n    },\r\n    _suppressDirections: function(e) {\r\n        if ((0, _index.isDxMouseWheelEvent)(e.originalEvent)) {\r\n            this._prepareDirections(true);\r\n            return\r\n        }\r\n        this._prepareDirections();\r\n        this._eachScroller(function(scroller, direction) {\r\n            var isValid = scroller._validateEvent(e);\r\n            this._validDirections[direction] = isValid\r\n        })\r\n    },\r\n    _prepareDirections: function(value) {\r\n        value = value || false;\r\n        this._validDirections = {};\r\n        this._validDirections[HORIZONTAL] = value;\r\n        this._validDirections[VERTICAL] = value\r\n    },\r\n    _eachScroller: function(callback) {\r\n        callback = callback.bind(this);\r\n        (0, _iterator.each)(this._scrollers, function(direction, scroller) {\r\n            callback(scroller, direction)\r\n        })\r\n    },\r\n    handleStart: function(e) {\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"start\").done(this._startAction)\r\n    },\r\n    _saveActive: function() {\r\n        activeScrollable = this\r\n    },\r\n    _resetActive: function() {\r\n        if (activeScrollable === this) {\r\n            activeScrollable = null\r\n        }\r\n    },\r\n    handleMove: function(e) {\r\n        if (this._isLocked()) {\r\n            e.cancel = true;\r\n            this._resetActive();\r\n            return\r\n        }\r\n        this._saveActive();\r\n        e.preventDefault && e.preventDefault();\r\n        this._adjustDistance(e, e.delta);\r\n        this._eventForUserAction = e;\r\n        this._eventHandler(\"move\", e.delta)\r\n    },\r\n    _adjustDistance: function(e, distance) {\r\n        distance.x *= this._validDirections[HORIZONTAL];\r\n        distance.y *= this._validDirections[VERTICAL];\r\n        var devicePixelRatio = this._tryGetDevicePixelRatio();\r\n        if (devicePixelRatio && (0, _index.isDxMouseWheelEvent)(e.originalEvent)) {\r\n            distance.x = Math.round(distance.x / devicePixelRatio * 100) / 100;\r\n            distance.y = Math.round(distance.y / devicePixelRatio * 100) / 100\r\n        }\r\n    },\r\n    _tryGetDevicePixelRatio: function() {\r\n        if ((0, _window.hasWindow)()) {\r\n            return (0, _window.getWindow)().devicePixelRatio\r\n        }\r\n    },\r\n    handleEnd: function(e) {\r\n        this._resetActive();\r\n        this._refreshCursorState(e.originalEvent && e.originalEvent.target);\r\n        this._adjustDistance(e, e.velocity);\r\n        this._eventForUserAction = e;\r\n        return this._eventHandler(\"end\", e.velocity).done(this._endAction)\r\n    },\r\n    handleCancel: function(e) {\r\n        this._resetActive();\r\n        this._eventForUserAction = e;\r\n        return this._eventHandler(\"end\", {\r\n            x: 0,\r\n            y: 0\r\n        })\r\n    },\r\n    handleStop: function() {\r\n        this._resetActive();\r\n        this._eventHandler(\"stop\")\r\n    },\r\n    handleScroll: function() {\r\n        this._component._updateRtlConfig();\r\n        this._scrollAction()\r\n    },\r\n    _attachKeyboardHandler: function() {\r\n        _events_engine.default.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD));\r\n        if (!this.option(\"disabled\") && this.option(\"useKeyboard\")) {\r\n            _events_engine.default.on(this._$element, (0, _index.addNamespace)(\"keydown\", SCROLLABLE_SIMULATED_KEYBOARD), this._keyDownHandler.bind(this))\r\n        }\r\n    },\r\n    _keyDownHandler: function(e) {\r\n        var _this4 = this;\r\n        clearTimeout(this._updateHandlerTimeout);\r\n        this._updateHandlerTimeout = setTimeout(function() {\r\n            if ((0, _index.normalizeKeyName)(e) === KEY_CODES.TAB) {\r\n                _this4._eachScroller(function(scroller) {\r\n                    scroller._updateHandler()\r\n                })\r\n            }\r\n        });\r\n        if (!this._$container.is(_dom_adapter.default.getActiveElement())) {\r\n            return\r\n        }\r\n        var handled = true;\r\n        switch ((0, _index.normalizeKeyName)(e)) {\r\n            case KEY_CODES.DOWN:\r\n                this._scrollByLine({\r\n                    y: 1\r\n                });\r\n                break;\r\n            case KEY_CODES.UP:\r\n                this._scrollByLine({\r\n                    y: -1\r\n                });\r\n                break;\r\n            case KEY_CODES.RIGHT:\r\n                this._scrollByLine({\r\n                    x: 1\r\n                });\r\n                break;\r\n            case KEY_CODES.LEFT:\r\n                this._scrollByLine({\r\n                    x: -1\r\n                });\r\n                break;\r\n            case KEY_CODES.PAGE_DOWN:\r\n                this._scrollByPage(1);\r\n                break;\r\n            case KEY_CODES.PAGE_UP:\r\n                this._scrollByPage(-1);\r\n                break;\r\n            case KEY_CODES.HOME:\r\n                this._scrollToHome();\r\n                break;\r\n            case KEY_CODES.END:\r\n                this._scrollToEnd();\r\n                break;\r\n            default:\r\n                handled = false\r\n        }\r\n        if (handled) {\r\n            e.stopPropagation();\r\n            e.preventDefault()\r\n        }\r\n    },\r\n    _scrollByLine: function(lines) {\r\n        var devicePixelRatio = this._tryGetDevicePixelRatio();\r\n        var scrollOffset = SCROLL_LINE_HEIGHT;\r\n        if (devicePixelRatio) {\r\n            scrollOffset = Math.abs(scrollOffset / devicePixelRatio * 100) / 100\r\n        }\r\n        this.scrollBy({\r\n            top: (lines.y || 0) * -scrollOffset,\r\n            left: (lines.x || 0) * -scrollOffset\r\n        })\r\n    },\r\n    _scrollByPage: function(page) {\r\n        var prop = this._wheelProp();\r\n        var dimension = this._dimensionByProp(prop);\r\n        var distance = {};\r\n        distance[prop] = page * -this._$container[dimension]();\r\n        this.scrollBy(distance)\r\n    },\r\n    _dimensionByProp: function(prop) {\r\n        return \"left\" === prop ? \"width\" : \"height\"\r\n    },\r\n    _getPropByDirection: function(direction) {\r\n        return direction === HORIZONTAL ? \"left\" : \"top\"\r\n    },\r\n    _scrollToHome: function() {\r\n        var prop = this._wheelProp();\r\n        var distance = {};\r\n        distance[prop] = 0;\r\n        this._component.scrollTo(distance)\r\n    },\r\n    _scrollToEnd: function() {\r\n        var prop = this._wheelProp();\r\n        var dimension = this._dimensionByProp(prop);\r\n        var distance = {};\r\n        distance[prop] = this._$content[dimension]() - this._$container[dimension]();\r\n        this._component.scrollTo(distance)\r\n    },\r\n    createActions: function() {\r\n        this._startAction = this._createActionHandler(\"onStart\");\r\n        this._stopAction = this._createActionHandler(\"onStop\");\r\n        this._endAction = this._createActionHandler(\"onEnd\");\r\n        this._updateAction = this._createActionHandler(\"onUpdated\");\r\n        this._createScrollerActions()\r\n    },\r\n    _createScrollerActions: function() {\r\n        this._scrollAction = this._createActionHandler(\"onScroll\");\r\n        this._bounceAction = this._createActionHandler(\"onBounce\");\r\n        this._eventHandler(\"createActions\", {\r\n            scroll: this._scrollAction,\r\n            bounce: this._bounceAction\r\n        })\r\n    },\r\n    _createActionHandler: function(optionName) {\r\n        var _arguments = arguments,\r\n            _this5 = this;\r\n        var actionHandler = this._createActionByOption(optionName);\r\n        return function() {\r\n            actionHandler((0, _extend.extend)(_this5._createActionArgs(), _arguments))\r\n        }\r\n    },\r\n    _createActionArgs: function() {\r\n        var _this$_scrollers = this._scrollers,\r\n            scrollerX = _this$_scrollers.horizontal,\r\n            scrollerY = _this$_scrollers.vertical;\r\n        var offset = this._getScrollOffset();\r\n        this._scrollOffset = {\r\n            top: scrollerY && offset.top,\r\n            left: scrollerX && offset.left\r\n        };\r\n        return {\r\n            event: this._eventForUserAction,\r\n            scrollOffset: this._scrollOffset,\r\n            reachedLeft: scrollerX && scrollerX._reachedMax(),\r\n            reachedRight: scrollerX && scrollerX._reachedMin(),\r\n            reachedTop: scrollerY && scrollerY._reachedMax(),\r\n            reachedBottom: scrollerY && scrollerY._reachedMin()\r\n        }\r\n    },\r\n    _eventHandler: function(eventName) {\r\n        var args = [].slice.call(arguments).slice(1);\r\n        var deferreds = (0, _iterator.map)(this._scrollers, function(scroller) {\r\n            return scroller[\"_\" + eventName + \"Handler\"].apply(scroller, args)\r\n        });\r\n        return _deferred.when.apply(_renderer.default, deferreds).promise()\r\n    },\r\n    location: function location() {\r\n        var location = (0, _translator.locate)(this._$content);\r\n        location.top -= this._$container.scrollTop();\r\n        location.left -= this._$container.scrollLeft();\r\n        return location\r\n    },\r\n    disabledChanged: function() {\r\n        this._attachCursorHandlers()\r\n    },\r\n    _attachCursorHandlers: function() {\r\n        _events_engine.default.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\r\n        if (!this.option(\"disabled\") && this._isHoverMode()) {\r\n            _events_engine.default.on(this._$element, (0, _index.addNamespace)(\"mouseenter\", SCROLLABLE_SIMULATED_CURSOR), this._cursorEnterHandler.bind(this));\r\n            _events_engine.default.on(this._$element, (0, _index.addNamespace)(\"mouseleave\", SCROLLABLE_SIMULATED_CURSOR), this._cursorLeaveHandler.bind(this))\r\n        }\r\n    },\r\n    _isHoverMode: function() {\r\n        return \"onHover\" === this.option(\"showScrollbar\")\r\n    },\r\n    _cursorEnterHandler: function(e) {\r\n        e = e || {};\r\n        e.originalEvent = e.originalEvent || {};\r\n        if (activeScrollable || e.originalEvent._hoverHandled) {\r\n            return\r\n        }\r\n        if (hoveredScrollable) {\r\n            hoveredScrollable._cursorLeaveHandler()\r\n        }\r\n        hoveredScrollable = this;\r\n        this._eventHandler(\"cursorEnter\");\r\n        e.originalEvent._hoverHandled = true\r\n    },\r\n    _cursorLeaveHandler: function(e) {\r\n        if (hoveredScrollable !== this || activeScrollable === hoveredScrollable) {\r\n            return\r\n        }\r\n        this._eventHandler(\"cursorLeave\");\r\n        hoveredScrollable = null;\r\n        this._refreshCursorState(e && e.relatedTarget)\r\n    },\r\n    _refreshCursorState: function(target) {\r\n        if (!this._isHoverMode() && (!target || activeScrollable)) {\r\n            return\r\n        }\r\n        var $target = (0, _renderer.default)(target);\r\n        var $scrollable = $target.closest(\".\".concat(SCROLLABLE_SIMULATED_CLASS, \":not(.dx-state-disabled)\"));\r\n        var targetScrollable = $scrollable.length && $scrollable.data(SCROLLABLE_STRATEGY);\r\n        if (hoveredScrollable && hoveredScrollable !== targetScrollable) {\r\n            hoveredScrollable._cursorLeaveHandler()\r\n        }\r\n        if (targetScrollable) {\r\n            targetScrollable._cursorEnterHandler()\r\n        }\r\n    },\r\n    update: function() {\r\n        var _this6 = this;\r\n        var result = this._eventHandler(\"update\").done(this._updateAction);\r\n        return (0, _deferred.when)(result, (0, _common.deferUpdate)(function() {\r\n            var allowedDirections = _this6._allowedDirections();\r\n            (0, _common.deferRender)(function() {\r\n                var touchDirection = allowedDirections.vertical ? \"pan-x\" : \"\";\r\n                touchDirection = allowedDirections.horizontal ? \"pan-y\" : touchDirection;\r\n                touchDirection = allowedDirections.vertical && allowedDirections.horizontal ? \"none\" : touchDirection;\r\n                _this6._$container.css(\"touchAction\", touchDirection)\r\n            });\r\n            return (0, _deferred.when)().promise()\r\n        }))\r\n    },\r\n    _allowedDirections: function() {\r\n        var bounceEnabled = this.option(\"bounceEnabled\");\r\n        var verticalScroller = this._scrollers[VERTICAL];\r\n        var horizontalScroller = this._scrollers[HORIZONTAL];\r\n        return {\r\n            vertical: verticalScroller && (verticalScroller._minOffset < 0 || bounceEnabled),\r\n            horizontal: horizontalScroller && (horizontalScroller._minOffset < 0 || bounceEnabled)\r\n        }\r\n    },\r\n    updateBounds: function() {\r\n        this._scrollers[HORIZONTAL] && this._scrollers[HORIZONTAL]._updateBounds()\r\n    },\r\n    scrollBy: function(distance) {\r\n        var verticalScroller = this._scrollers[VERTICAL];\r\n        var horizontalScroller = this._scrollers[HORIZONTAL];\r\n        if (verticalScroller) {\r\n            distance.top = verticalScroller._boundLocation(distance.top + verticalScroller._location) - verticalScroller._location\r\n        }\r\n        if (horizontalScroller) {\r\n            distance.left = horizontalScroller._boundLocation(distance.left + horizontalScroller._location) - horizontalScroller._location\r\n        }\r\n        this._prepareDirections(true);\r\n        this._startAction();\r\n        this._eventHandler(\"scrollBy\", {\r\n            x: distance.left,\r\n            y: distance.top\r\n        });\r\n        this._endAction()\r\n    },\r\n    validate: function(e) {\r\n        if ((0, _index.isDxMouseWheelEvent)(e) && (0, _index.isCommandKeyPressed)(e)) {\r\n            return false\r\n        }\r\n        if (this.option(\"disabled\")) {\r\n            return false\r\n        }\r\n        if (this.option(\"bounceEnabled\")) {\r\n            return true\r\n        }\r\n        return (0, _index.isDxMouseWheelEvent)(e) ? this._validateWheel(e) : this._validateMove(e)\r\n    },\r\n    _validateWheel: function(e) {\r\n        var _this7 = this;\r\n        var scroller = this._scrollers[this._wheelDirection(e)];\r\n        var reachedMin = scroller._reachedMin();\r\n        var reachedMax = scroller._reachedMax();\r\n        var contentGreaterThanContainer = !reachedMin || !reachedMax;\r\n        var locatedNotAtBound = !reachedMin && !reachedMax;\r\n        var scrollFromMin = reachedMin && e.delta > 0;\r\n        var scrollFromMax = reachedMax && e.delta < 0;\r\n        var validated = contentGreaterThanContainer && (locatedNotAtBound || scrollFromMin || scrollFromMax);\r\n        validated = validated || void 0 !== this._validateWheelTimer;\r\n        if (validated) {\r\n            clearTimeout(this._validateWheelTimer);\r\n            this._validateWheelTimer = setTimeout(function() {\r\n                _this7._validateWheelTimer = void 0\r\n            }, VALIDATE_WHEEL_TIMEOUT)\r\n        }\r\n        return validated\r\n    },\r\n    _validateMove: function(e) {\r\n        if (!this.option(\"scrollByContent\") && !(0, _renderer.default)(e.target).closest(\".\".concat(SCROLLABLE_SCROLLBAR_CLASS)).length) {\r\n            return false\r\n        }\r\n        return this._allowedDirection()\r\n    },\r\n    getDirection: function(e) {\r\n        return (0, _index.isDxMouseWheelEvent)(e) ? this._wheelDirection(e) : this._allowedDirection()\r\n    },\r\n    _wheelProp: function() {\r\n        return this._wheelDirection() === HORIZONTAL ? \"left\" : \"top\"\r\n    },\r\n    _wheelDirection: function(e) {\r\n        switch (this.option(\"direction\")) {\r\n            case HORIZONTAL:\r\n                return HORIZONTAL;\r\n            case VERTICAL:\r\n                return VERTICAL;\r\n            default:\r\n                return e && e.shiftKey ? HORIZONTAL : VERTICAL\r\n        }\r\n    },\r\n    verticalOffset: function() {\r\n        return 0\r\n    },\r\n    dispose: function() {\r\n        this._resetActive();\r\n        if (hoveredScrollable === this) {\r\n            hoveredScrollable = null\r\n        }\r\n        this._eventHandler(\"dispose\");\r\n        this._detachEventHandlers();\r\n        this._$element.removeClass(SCROLLABLE_SIMULATED_CLASS);\r\n        this._eventForUserAction = null;\r\n        clearTimeout(this._validateWheelTimer);\r\n        clearTimeout(this._updateHandlerTimeout)\r\n    },\r\n    _detachEventHandlers: function() {\r\n        _events_engine.default.off(this._$element, \".\".concat(SCROLLABLE_SIMULATED_CURSOR));\r\n        _events_engine.default.off(this._$container, \".\".concat(SCROLLABLE_SIMULATED_KEYBOARD))\r\n    }\r\n});\r\nexports.SimulatedStrategy = SimulatedStrategy;\r\n"]},"metadata":{},"sourceType":"script"}