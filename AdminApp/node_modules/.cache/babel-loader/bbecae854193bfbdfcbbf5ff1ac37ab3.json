{"ast":null,"code":"/**\r\n * DevExtreme (ui/box.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\n\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\n\nvar _extend = require(\"../core/utils/extend\");\n\nvar _common = require(\"../core/utils/common\");\n\nvar _window = require(\"../core/utils/window\");\n\nvar _inflector = require(\"../core/utils/inflector\");\n\nvar _type = require(\"../core/utils/type\");\n\nvar _style = require(\"../core/utils/style\");\n\nvar _iterator = require(\"../core/utils/iterator\");\n\nvar _browser = _interopRequireDefault(require(\"../core/utils/browser\"));\n\nvar _item = _interopRequireDefault(require(\"./collection/item\"));\n\nvar _uiCollection_widget = _interopRequireDefault(require(\"./collection/ui.collection_widget.edit\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nfunction _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n\n  _setPrototypeOf(subClass, superClass);\n}\n\nfunction _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function (o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nvar BOX_CLASS = \"dx-box\";\nvar BOX_SELECTOR = \".dx-box\";\nvar BOX_ITEM_CLASS = \"dx-box-item\";\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\nvar MINSIZE_MAP = {\n  row: \"minWidth\",\n  col: \"minHeight\"\n};\nvar MAXSIZE_MAP = {\n  row: \"maxWidth\",\n  col: \"maxHeight\"\n};\nvar SHRINK = 1;\nvar FLEX_JUSTIFY_CONTENT_MAP = {\n  start: \"flex-start\",\n  end: \"flex-end\",\n  center: \"center\",\n  \"space-between\": \"space-between\",\n  \"space-around\": \"space-around\"\n};\nvar FLEX_ALIGN_ITEMS_MAP = {\n  start: \"flex-start\",\n  end: \"flex-end\",\n  center: \"center\",\n  stretch: \"stretch\"\n};\nvar FLEX_DIRECTION_MAP = {\n  row: \"row\",\n  col: \"column\"\n};\n\nvar setFlexProp = function (element, prop, value) {\n  value = (0, _style.normalizeStyleProp)(prop, value);\n  element.style[(0, _style.styleProp)(prop)] = value;\n\n  if (!(0, _window.hasWindow)()) {\n    if (\"\" === value || !(0, _type.isDefined)(value)) {\n      return;\n    }\n\n    var cssName = (0, _inflector.dasherize)(prop);\n    var styleExpr = cssName + \": \" + value + \";\";\n\n    if (!element.attributes.style) {\n      element.setAttribute(\"style\", styleExpr);\n    } else {\n      if (element.attributes.style.value.indexOf(styleExpr) < 0) {\n        element.attributes.style.value += \" \" + styleExpr;\n      }\n    }\n  }\n};\n\nvar BOX_EVENTNAMESPACE = \"dxBox\";\nvar UPDATE_EVENT = \"dxupdate.\" + BOX_EVENTNAMESPACE;\nvar FALLBACK_BOX_ITEM = \"dx-box-fallback-item\";\nvar FALLBACK_WRAP_MAP = {\n  row: \"nowrap\",\n  col: \"normal\"\n};\nvar FALLBACK_MAIN_SIZE_MAP = {\n  row: \"width\",\n  col: \"height\"\n};\nvar FALLBACK_CROSS_SIZE_MAP = {\n  row: \"height\",\n  col: \"width\"\n};\nvar FALLBACK_PRE_MARGIN_MAP = {\n  row: \"marginLeft\",\n  col: \"marginTop\"\n};\nvar FALLBACK_POST_MARGIN_MAP = {\n  row: \"marginRight\",\n  col: \"marginBottom\"\n};\nvar FALLBACK_CROSS_PRE_MARGIN_MAP = {\n  row: \"marginTop\",\n  col: \"marginLeft\"\n};\nvar FALLBACK_CROSS_POST_MARGIN_MAP = {\n  row: \"marginBottom\",\n  col: \"marginRight\"\n};\nvar MARGINS_RTL_FLIP_MAP = {\n  marginLeft: \"marginRight\",\n  marginRight: \"marginLeft\"\n};\n\nvar BoxItem = function (_CollectionWidgetItem) {\n  _inheritsLoose(BoxItem, _CollectionWidgetItem);\n\n  function BoxItem() {\n    return _CollectionWidgetItem.apply(this, arguments) || this;\n  }\n\n  var _proto = BoxItem.prototype;\n\n  _proto._renderVisible = function (value, oldValue) {\n    _CollectionWidgetItem.prototype._renderVisible.call(this, value);\n\n    if ((0, _type.isDefined)(oldValue)) {\n      this._options.fireItemStateChangedAction({\n        name: \"visible\",\n        state: value,\n        oldState: oldValue\n      });\n    }\n  };\n\n  return BoxItem;\n}(_item.default);\n\nvar FlexLayoutStrategy = function () {\n  function FlexLayoutStrategy($element, option) {\n    this._$element = $element;\n    this._option = option;\n    this.initSize = _common.noop;\n    this.update = _common.noop;\n  }\n\n  var _proto2 = FlexLayoutStrategy.prototype;\n\n  _proto2.renderBox = function () {\n    this._$element.css({\n      display: (0, _style.stylePropPrefix)(\"flexDirection\") + \"flex\"\n    });\n\n    setFlexProp(this._$element.get(0), \"flexDirection\", FLEX_DIRECTION_MAP[this._option(\"direction\")]);\n  };\n\n  _proto2.renderAlign = function () {\n    this._$element.css({\n      justifyContent: this._normalizedAlign()\n    });\n  };\n\n  _proto2._normalizedAlign = function () {\n    var align = this._option(\"align\");\n\n    return align in FLEX_JUSTIFY_CONTENT_MAP ? FLEX_JUSTIFY_CONTENT_MAP[align] : align;\n  };\n\n  _proto2.renderCrossAlign = function () {\n    this._$element.css({\n      alignItems: this._normalizedCrossAlign()\n    });\n  };\n\n  _proto2._normalizedCrossAlign = function () {\n    var crossAlign = this._option(\"crossAlign\");\n\n    return crossAlign in FLEX_ALIGN_ITEMS_MAP ? FLEX_ALIGN_ITEMS_MAP[crossAlign] : crossAlign;\n  };\n\n  _proto2.renderItems = function ($items) {\n    var flexPropPrefix = (0, _style.stylePropPrefix)(\"flexDirection\");\n\n    var direction = this._option(\"direction\");\n\n    (0, _iterator.each)($items, function () {\n      var $item = (0, _renderer.default)(this);\n      var item = $item.data(BOX_ITEM_DATA_KEY);\n      $item.css({\n        display: flexPropPrefix + \"flex\"\n      }).css(MAXSIZE_MAP[direction], item.maxSize || \"none\").css(MINSIZE_MAP[direction], item.minSize || \"0\");\n      setFlexProp($item.get(0), \"flexBasis\", item.baseSize || 0);\n      setFlexProp($item.get(0), \"flexGrow\", item.ratio);\n      setFlexProp($item.get(0), \"flexShrink\", (0, _type.isDefined)(item.shrink) ? item.shrink : SHRINK);\n      $item.children().each(function (_, itemContent) {\n        (0, _renderer.default)(itemContent).css({\n          width: \"auto\",\n          height: \"auto\",\n          display: (0, _style.stylePropPrefix)(\"flexDirection\") + \"flex\",\n          flexBasis: 0\n        });\n        setFlexProp(itemContent, \"flexGrow\", 1);\n        setFlexProp(itemContent, \"flexDirection\", (0, _renderer.default)(itemContent)[0].style.flexDirection || \"column\");\n      });\n    });\n  };\n\n  return FlexLayoutStrategy;\n}();\n\nvar FallbackLayoutStrategy = function () {\n  function FallbackLayoutStrategy($element, option) {\n    this._$element = $element;\n    this._option = option;\n  }\n\n  var _proto3 = FallbackLayoutStrategy.prototype;\n\n  _proto3.renderBox = function () {\n    this._$element.css({\n      fontSize: 0,\n      whiteSpace: FALLBACK_WRAP_MAP[this._option(\"direction\")],\n      verticalAlign: \"top\"\n    });\n\n    _events_engine.default.off(this._$element, UPDATE_EVENT);\n\n    _events_engine.default.on(this._$element, UPDATE_EVENT, this.update.bind(this));\n  };\n\n  _proto3.renderAlign = function () {\n    var $items = this._$items;\n\n    if (!$items) {\n      return;\n    }\n\n    var align = this._option(\"align\");\n\n    var totalItemSize = this.totalItemSize;\n\n    var direction = this._option(\"direction\");\n\n    var boxSize = this._$element[FALLBACK_MAIN_SIZE_MAP[direction]]();\n\n    var freeSpace = boxSize - totalItemSize;\n    var shift = 0;\n\n    this._setItemsMargins($items, direction, 0);\n\n    switch (align) {\n      case \"start\":\n        break;\n\n      case \"end\":\n        shift = freeSpace;\n        $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\n        break;\n\n      case \"center\":\n        shift = .5 * freeSpace;\n        $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\n        $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift);\n        break;\n\n      case \"space-between\":\n        shift = .5 * freeSpace / ($items.length - 1);\n\n        this._setItemsMargins($items, direction, shift);\n\n        $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), 0);\n        $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), 0);\n        break;\n\n      case \"space-around\":\n        shift = .5 * freeSpace / $items.length;\n\n        this._setItemsMargins($items, direction, shift);\n\n    }\n  };\n\n  _proto3._setItemsMargins = function ($items, direction, shift) {\n    $items.css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift).css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift);\n  };\n\n  _proto3.renderCrossAlign = function () {\n    var $items = this._$items;\n\n    if (!$items) {\n      return;\n    }\n\n    var crossAlign = this._option(\"crossAlign\");\n\n    var direction = this._option(\"direction\");\n\n    var size = this._$element[FALLBACK_CROSS_SIZE_MAP[direction]]();\n\n    var that = this;\n\n    switch (crossAlign) {\n      case \"start\":\n        break;\n\n      case \"end\":\n        (0, _iterator.each)($items, function () {\n          var $item = (0, _renderer.default)(this);\n          var itemSize = $item[FALLBACK_CROSS_SIZE_MAP[direction]]();\n          var shift = size - itemSize;\n          $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift);\n        });\n        break;\n\n      case \"center\":\n        (0, _iterator.each)($items, function () {\n          var $item = (0, _renderer.default)(this);\n          var itemSize = $item[FALLBACK_CROSS_SIZE_MAP[direction]]();\n          var shift = .5 * (size - itemSize);\n          $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), shift);\n        });\n        break;\n\n      case \"stretch\":\n        $items.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), 0).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), 0).css(FALLBACK_CROSS_SIZE_MAP[direction], \"100%\");\n    }\n  };\n\n  _proto3._chooseMarginSide = function (value) {\n    if (!this._option(\"rtlEnabled\")) {\n      return value;\n    }\n\n    return MARGINS_RTL_FLIP_MAP[value] || value;\n  };\n\n  _proto3.renderItems = function ($items) {\n    var _this = this;\n\n    this._$items = $items;\n\n    var direction = this._option(\"direction\");\n\n    var totalRatio = 0;\n    var totalWeightedShrink = 0;\n    var totalBaseSize = 0;\n    (0, _iterator.each)($items, function (_, item) {\n      var $item = (0, _renderer.default)(item);\n      $item.css({\n        display: \"inline-block\",\n        verticalAlign: \"top\"\n      });\n      $item[FALLBACK_MAIN_SIZE_MAP[direction]](\"auto\");\n      $item.removeClass(FALLBACK_BOX_ITEM);\n      var itemData = $item.data(BOX_ITEM_DATA_KEY);\n      var ratio = itemData.ratio || 0;\n\n      var size = _this._baseSize($item);\n\n      var shrink = (0, _type.isDefined)(itemData.shrink) ? itemData.shrink : SHRINK;\n      totalRatio += ratio;\n      totalWeightedShrink += shrink * size;\n      totalBaseSize += size;\n    });\n    var freeSpaceSize = this._boxSize() - totalBaseSize;\n\n    var itemSize = function ($item) {\n      var itemData = $item.data(BOX_ITEM_DATA_KEY);\n\n      var size = _this._baseSize($item);\n\n      var factor = freeSpaceSize >= 0 ? itemData.ratio || 0 : ((0, _type.isDefined)(itemData.shrink) ? itemData.shrink : SHRINK) * size;\n      var totalFactor = freeSpaceSize >= 0 ? totalRatio : totalWeightedShrink;\n      var shift = totalFactor ? Math.round(freeSpaceSize * factor / totalFactor) : 0;\n      return size + shift;\n    };\n\n    var totalItemSize = 0;\n    (0, _iterator.each)($items, function (_, item) {\n      var $item = (0, _renderer.default)(item);\n      var itemData = (0, _renderer.default)(item).data(BOX_ITEM_DATA_KEY);\n      var size = itemSize($item);\n      totalItemSize += size;\n      $item.css(MAXSIZE_MAP[direction], itemData.maxSize || \"none\").css(MINSIZE_MAP[direction], itemData.minSize || \"0\").css(FALLBACK_MAIN_SIZE_MAP[direction], size);\n      $item.addClass(FALLBACK_BOX_ITEM);\n    });\n    this.totalItemSize = totalItemSize;\n  };\n\n  _proto3._baseSize = function (item) {\n    var itemData = (0, _renderer.default)(item).data(BOX_ITEM_DATA_KEY);\n    return null == itemData.baseSize ? 0 : \"auto\" === itemData.baseSize ? this._contentSize(item) : this._parseSize(itemData.baseSize);\n  };\n\n  _proto3._contentSize = function (item) {\n    return (0, _renderer.default)(item)[FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")]]();\n  };\n\n  _proto3._parseSize = function (size) {\n    return String(size).match(/.+%$/) ? .01 * parseFloat(size) * this._boxSizeValue : size;\n  };\n\n  _proto3._boxSize = function (value) {\n    if (!arguments.length) {\n      this._boxSizeValue = this._boxSizeValue || this._totalBaseSize();\n      return this._boxSizeValue;\n    }\n\n    this._boxSizeValue = value;\n  };\n\n  _proto3._totalBaseSize = function () {\n    var _this2 = this;\n\n    var result = 0;\n    (0, _iterator.each)(this._$items, function (_, item) {\n      result += _this2._baseSize(item);\n    });\n    return result;\n  };\n\n  _proto3.initSize = function () {\n    this._boxSize(this._$element[FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")]]());\n  };\n\n  _proto3.update = function () {\n    if (!this._$items || this._$element.is(\":hidden\")) {\n      return;\n    }\n\n    this._$items.detach();\n\n    this.initSize();\n\n    this._$element.append(this._$items);\n\n    this.renderItems(this._$items);\n    this.renderAlign();\n    this.renderCrossAlign();\n\n    var element = this._$element.get(0);\n\n    this._$items.find(BOX_SELECTOR).each(function () {\n      if (element === (0, _renderer.default)(this).parent().closest(BOX_SELECTOR).get(0)) {\n        _events_engine.default.triggerHandler(this, UPDATE_EVENT);\n      }\n    });\n  };\n\n  return FallbackLayoutStrategy;\n}();\n\nvar Box = function (_CollectionWidget) {\n  _inheritsLoose(Box, _CollectionWidget);\n\n  function Box() {\n    return _CollectionWidget.apply(this, arguments) || this;\n  }\n\n  var _proto4 = Box.prototype;\n\n  _proto4._getDefaultOptions = function () {\n    return (0, _extend.extend)(_CollectionWidget.prototype._getDefaultOptions.call(this), {\n      direction: \"row\",\n      align: \"start\",\n      crossAlign: \"stretch\",\n      activeStateEnabled: false,\n      focusStateEnabled: false,\n      onItemStateChanged: void 0,\n      _layoutStrategy: \"flex\",\n      _queue: void 0\n    });\n  };\n\n  _proto4._defaultOptionsRules = function () {\n    return _CollectionWidget.prototype._defaultOptionsRules.call(this).concat([{\n      device: function () {\n        return _browser.default.msie;\n      },\n      options: {\n        _layoutStrategy: \"fallback\"\n      }\n    }]);\n  };\n\n  _proto4._itemClass = function () {\n    return BOX_ITEM_CLASS;\n  };\n\n  _proto4._itemDataKey = function () {\n    return BOX_ITEM_DATA_KEY;\n  };\n\n  _proto4._itemElements = function () {\n    return this._itemContainer().children(this._itemSelector());\n  };\n\n  _proto4._init = function () {\n    _CollectionWidget.prototype._init.call(this);\n\n    this.$element().addClass(\"\".concat(BOX_CLASS, \"-\").concat(this.option(\"_layoutStrategy\")));\n\n    this._initLayout();\n\n    this._initBoxQueue();\n  };\n\n  _proto4._initLayout = function () {\n    this._layout = \"fallback\" === this.option(\"_layoutStrategy\") ? new FallbackLayoutStrategy(this.$element(), this.option.bind(this)) : new FlexLayoutStrategy(this.$element(), this.option.bind(this));\n  };\n\n  _proto4._initBoxQueue = function () {\n    this._queue = this.option(\"_queue\") || [];\n  };\n\n  _proto4._queueIsNotEmpty = function () {\n    return this.option(\"_queue\") ? false : !!this._queue.length;\n  };\n\n  _proto4._pushItemToQueue = function ($item, config) {\n    this._queue.push({\n      $item: $item,\n      config: config\n    });\n  };\n\n  _proto4._shiftItemFromQueue = function () {\n    return this._queue.shift();\n  };\n\n  _proto4._initMarkup = function () {\n    this.$element().addClass(BOX_CLASS);\n\n    this._layout.renderBox();\n\n    _CollectionWidget.prototype._initMarkup.call(this);\n\n    this._renderAlign();\n\n    this._renderActions();\n  };\n\n  _proto4._renderActions = function () {\n    this._onItemStateChanged = this._createActionByOption(\"onItemStateChanged\");\n  };\n\n  _proto4._renderAlign = function () {\n    this._layout.renderAlign();\n\n    this._layout.renderCrossAlign();\n  };\n\n  _proto4._renderItems = function (items) {\n    var _this3 = this;\n\n    this._layout.initSize();\n\n    _CollectionWidget.prototype._renderItems.call(this, items);\n\n    while (this._queueIsNotEmpty()) {\n      var item = this._shiftItemFromQueue();\n\n      this._createComponent(item.$item, Box, (0, _extend.extend)({\n        _layoutStrategy: this.option(\"_layoutStrategy\"),\n        itemTemplate: this.option(\"itemTemplate\"),\n        itemHoldTimeout: this.option(\"itemHoldTimeout\"),\n        onItemHold: this.option(\"onItemHold\"),\n        onItemClick: this.option(\"onItemClick\"),\n        onItemContextMenu: this.option(\"onItemContextMenu\"),\n        onItemRendered: this.option(\"onItemRendered\"),\n        _queue: this._queue\n      }, item.config));\n    }\n\n    this._layout.renderItems(this._itemElements());\n\n    clearTimeout(this._updateTimer);\n    this._updateTimer = setTimeout(function () {\n      if (!_this3._isUpdated) {\n        _this3._layout.update();\n      }\n\n      _this3._isUpdated = false;\n      _this3._updateTimer = null;\n    });\n  };\n\n  _proto4._renderItemContent = function (args) {\n    var $itemNode = args.itemData && args.itemData.node;\n\n    if ($itemNode) {\n      return this._renderItemContentByNode(args, $itemNode);\n    }\n\n    return _CollectionWidget.prototype._renderItemContent.call(this, args);\n  };\n\n  _proto4._postprocessRenderItem = function (args) {\n    var boxConfig = args.itemData.box;\n\n    if (!boxConfig) {\n      return;\n    }\n\n    this._pushItemToQueue(args.itemContent, boxConfig);\n  };\n\n  _proto4._createItemByTemplate = function (itemTemplate, args) {\n    if (args.itemData.box) {\n      return itemTemplate.source ? itemTemplate.source() : (0, _renderer.default)();\n    }\n\n    return _CollectionWidget.prototype._createItemByTemplate.call(this, itemTemplate, args);\n  };\n\n  _proto4._visibilityChanged = function (visible) {\n    if (visible) {\n      this._dimensionChanged();\n    }\n  };\n\n  _proto4._dimensionChanged = function () {\n    if (this._updateTimer) {\n      return;\n    }\n\n    this._isUpdated = true;\n\n    this._layout.update();\n  };\n\n  _proto4._dispose = function () {\n    clearTimeout(this._updateTimer);\n\n    _CollectionWidget.prototype._dispose.apply(this, arguments);\n  };\n\n  _proto4._itemOptionChanged = function (item, property, value, oldValue) {\n    if (\"visible\" === property) {\n      this._onItemStateChanged({\n        name: property,\n        state: value,\n        oldState: false !== oldValue\n      });\n    }\n\n    _CollectionWidget.prototype._itemOptionChanged.call(this, item, property, value);\n  };\n\n  _proto4._optionChanged = function (args) {\n    switch (args.name) {\n      case \"_layoutStrategy\":\n      case \"_queue\":\n      case \"direction\":\n        this._invalidate();\n\n        break;\n\n      case \"align\":\n        this._layout.renderAlign();\n\n        break;\n\n      case \"crossAlign\":\n        this._layout.renderCrossAlign();\n\n        break;\n\n      default:\n        _CollectionWidget.prototype._optionChanged.call(this, args);\n\n    }\n  };\n\n  _proto4._itemOptions = function () {\n    var _this4 = this;\n\n    var options = _CollectionWidget.prototype._itemOptions.call(this);\n\n    options.fireItemStateChangedAction = function (e) {\n      _this4._onItemStateChanged(e);\n    };\n\n    return options;\n  };\n\n  _proto4.repaint = function () {\n    this._dimensionChanged();\n  };\n\n  return Box;\n}(_uiCollection_widget.default);\n\nBox.ItemClass = BoxItem;\n(0, _component_registrator.default)(\"dxBox\", Box);\nvar _default = Box;\nexports.default = _default;\nmodule.exports = exports.default;\nmodule.exports.default = module.exports;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/box.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_component_registrator","_extend","_common","_window","_inflector","_type","_style","_iterator","_browser","_item","_uiCollection_widget","obj","__esModule","_inheritsLoose","subClass","superClass","prototype","Object","create","constructor","_setPrototypeOf","o","p","setPrototypeOf","__proto__","BOX_CLASS","BOX_SELECTOR","BOX_ITEM_CLASS","BOX_ITEM_DATA_KEY","MINSIZE_MAP","row","col","MAXSIZE_MAP","SHRINK","FLEX_JUSTIFY_CONTENT_MAP","start","end","center","FLEX_ALIGN_ITEMS_MAP","stretch","FLEX_DIRECTION_MAP","setFlexProp","element","prop","value","normalizeStyleProp","style","styleProp","hasWindow","isDefined","cssName","dasherize","styleExpr","attributes","setAttribute","indexOf","BOX_EVENTNAMESPACE","UPDATE_EVENT","FALLBACK_BOX_ITEM","FALLBACK_WRAP_MAP","FALLBACK_MAIN_SIZE_MAP","FALLBACK_CROSS_SIZE_MAP","FALLBACK_PRE_MARGIN_MAP","FALLBACK_POST_MARGIN_MAP","FALLBACK_CROSS_PRE_MARGIN_MAP","FALLBACK_CROSS_POST_MARGIN_MAP","MARGINS_RTL_FLIP_MAP","marginLeft","marginRight","BoxItem","_CollectionWidgetItem","apply","arguments","_proto","_renderVisible","oldValue","call","_options","fireItemStateChangedAction","name","state","oldState","FlexLayoutStrategy","$element","option","_$element","_option","initSize","noop","update","_proto2","renderBox","css","display","stylePropPrefix","get","renderAlign","justifyContent","_normalizedAlign","align","renderCrossAlign","alignItems","_normalizedCrossAlign","crossAlign","renderItems","$items","flexPropPrefix","direction","each","$item","item","data","maxSize","minSize","baseSize","ratio","shrink","children","_","itemContent","width","height","flexBasis","flexDirection","FallbackLayoutStrategy","_proto3","fontSize","whiteSpace","verticalAlign","off","on","bind","_$items","totalItemSize","boxSize","freeSpace","shift","_setItemsMargins","first","_chooseMarginSide","last","length","size","that","itemSize","_this","totalRatio","totalWeightedShrink","totalBaseSize","removeClass","itemData","_baseSize","freeSpaceSize","_boxSize","factor","totalFactor","Math","round","addClass","_contentSize","_parseSize","String","match","parseFloat","_boxSizeValue","_totalBaseSize","_this2","result","is","detach","append","find","parent","closest","triggerHandler","Box","_CollectionWidget","_proto4","_getDefaultOptions","extend","activeStateEnabled","focusStateEnabled","onItemStateChanged","_layoutStrategy","_queue","_defaultOptionsRules","concat","device","msie","options","_itemClass","_itemDataKey","_itemElements","_itemContainer","_itemSelector","_init","_initLayout","_initBoxQueue","_layout","_queueIsNotEmpty","_pushItemToQueue","config","push","_shiftItemFromQueue","_initMarkup","_renderAlign","_renderActions","_onItemStateChanged","_createActionByOption","_renderItems","items","_this3","_createComponent","itemTemplate","itemHoldTimeout","onItemHold","onItemClick","onItemContextMenu","onItemRendered","clearTimeout","_updateTimer","setTimeout","_isUpdated","_renderItemContent","args","$itemNode","node","_renderItemContentByNode","_postprocessRenderItem","boxConfig","box","_createItemByTemplate","source","_visibilityChanged","visible","_dimensionChanged","_dispose","_itemOptionChanged","property","_optionChanged","_invalidate","_itemOptions","_this4","e","repaint","ItemClass","_default","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/box.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../events/core/events_engine\"));\r\nvar _component_registrator = _interopRequireDefault(require(\"../core/component_registrator\"));\r\nvar _extend = require(\"../core/utils/extend\");\r\nvar _common = require(\"../core/utils/common\");\r\nvar _window = require(\"../core/utils/window\");\r\nvar _inflector = require(\"../core/utils/inflector\");\r\nvar _type = require(\"../core/utils/type\");\r\nvar _style = require(\"../core/utils/style\");\r\nvar _iterator = require(\"../core/utils/iterator\");\r\nvar _browser = _interopRequireDefault(require(\"../core/utils/browser\"));\r\nvar _item = _interopRequireDefault(require(\"./collection/item\"));\r\nvar _uiCollection_widget = _interopRequireDefault(require(\"./collection/ui.collection_widget.edit\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\n\r\nfunction _inheritsLoose(subClass, superClass) {\r\n    subClass.prototype = Object.create(superClass.prototype);\r\n    subClass.prototype.constructor = subClass;\r\n    _setPrototypeOf(subClass, superClass)\r\n}\r\n\r\nfunction _setPrototypeOf(o, p) {\r\n    _setPrototypeOf = Object.setPrototypeOf || function(o, p) {\r\n        o.__proto__ = p;\r\n        return o\r\n    };\r\n    return _setPrototypeOf(o, p)\r\n}\r\nvar BOX_CLASS = \"dx-box\";\r\nvar BOX_SELECTOR = \".dx-box\";\r\nvar BOX_ITEM_CLASS = \"dx-box-item\";\r\nvar BOX_ITEM_DATA_KEY = \"dxBoxItemData\";\r\nvar MINSIZE_MAP = {\r\n    row: \"minWidth\",\r\n    col: \"minHeight\"\r\n};\r\nvar MAXSIZE_MAP = {\r\n    row: \"maxWidth\",\r\n    col: \"maxHeight\"\r\n};\r\nvar SHRINK = 1;\r\nvar FLEX_JUSTIFY_CONTENT_MAP = {\r\n    start: \"flex-start\",\r\n    end: \"flex-end\",\r\n    center: \"center\",\r\n    \"space-between\": \"space-between\",\r\n    \"space-around\": \"space-around\"\r\n};\r\nvar FLEX_ALIGN_ITEMS_MAP = {\r\n    start: \"flex-start\",\r\n    end: \"flex-end\",\r\n    center: \"center\",\r\n    stretch: \"stretch\"\r\n};\r\nvar FLEX_DIRECTION_MAP = {\r\n    row: \"row\",\r\n    col: \"column\"\r\n};\r\nvar setFlexProp = function(element, prop, value) {\r\n    value = (0, _style.normalizeStyleProp)(prop, value);\r\n    element.style[(0, _style.styleProp)(prop)] = value;\r\n    if (!(0, _window.hasWindow)()) {\r\n        if (\"\" === value || !(0, _type.isDefined)(value)) {\r\n            return\r\n        }\r\n        var cssName = (0, _inflector.dasherize)(prop);\r\n        var styleExpr = cssName + \": \" + value + \";\";\r\n        if (!element.attributes.style) {\r\n            element.setAttribute(\"style\", styleExpr)\r\n        } else {\r\n            if (element.attributes.style.value.indexOf(styleExpr) < 0) {\r\n                element.attributes.style.value += \" \" + styleExpr\r\n            }\r\n        }\r\n    }\r\n};\r\nvar BOX_EVENTNAMESPACE = \"dxBox\";\r\nvar UPDATE_EVENT = \"dxupdate.\" + BOX_EVENTNAMESPACE;\r\nvar FALLBACK_BOX_ITEM = \"dx-box-fallback-item\";\r\nvar FALLBACK_WRAP_MAP = {\r\n    row: \"nowrap\",\r\n    col: \"normal\"\r\n};\r\nvar FALLBACK_MAIN_SIZE_MAP = {\r\n    row: \"width\",\r\n    col: \"height\"\r\n};\r\nvar FALLBACK_CROSS_SIZE_MAP = {\r\n    row: \"height\",\r\n    col: \"width\"\r\n};\r\nvar FALLBACK_PRE_MARGIN_MAP = {\r\n    row: \"marginLeft\",\r\n    col: \"marginTop\"\r\n};\r\nvar FALLBACK_POST_MARGIN_MAP = {\r\n    row: \"marginRight\",\r\n    col: \"marginBottom\"\r\n};\r\nvar FALLBACK_CROSS_PRE_MARGIN_MAP = {\r\n    row: \"marginTop\",\r\n    col: \"marginLeft\"\r\n};\r\nvar FALLBACK_CROSS_POST_MARGIN_MAP = {\r\n    row: \"marginBottom\",\r\n    col: \"marginRight\"\r\n};\r\nvar MARGINS_RTL_FLIP_MAP = {\r\n    marginLeft: \"marginRight\",\r\n    marginRight: \"marginLeft\"\r\n};\r\nvar BoxItem = function(_CollectionWidgetItem) {\r\n    _inheritsLoose(BoxItem, _CollectionWidgetItem);\r\n\r\n    function BoxItem() {\r\n        return _CollectionWidgetItem.apply(this, arguments) || this\r\n    }\r\n    var _proto = BoxItem.prototype;\r\n    _proto._renderVisible = function(value, oldValue) {\r\n        _CollectionWidgetItem.prototype._renderVisible.call(this, value);\r\n        if ((0, _type.isDefined)(oldValue)) {\r\n            this._options.fireItemStateChangedAction({\r\n                name: \"visible\",\r\n                state: value,\r\n                oldState: oldValue\r\n            })\r\n        }\r\n    };\r\n    return BoxItem\r\n}(_item.default);\r\nvar FlexLayoutStrategy = function() {\r\n    function FlexLayoutStrategy($element, option) {\r\n        this._$element = $element;\r\n        this._option = option;\r\n        this.initSize = _common.noop;\r\n        this.update = _common.noop\r\n    }\r\n    var _proto2 = FlexLayoutStrategy.prototype;\r\n    _proto2.renderBox = function() {\r\n        this._$element.css({\r\n            display: (0, _style.stylePropPrefix)(\"flexDirection\") + \"flex\"\r\n        });\r\n        setFlexProp(this._$element.get(0), \"flexDirection\", FLEX_DIRECTION_MAP[this._option(\"direction\")])\r\n    };\r\n    _proto2.renderAlign = function() {\r\n        this._$element.css({\r\n            justifyContent: this._normalizedAlign()\r\n        })\r\n    };\r\n    _proto2._normalizedAlign = function() {\r\n        var align = this._option(\"align\");\r\n        return align in FLEX_JUSTIFY_CONTENT_MAP ? FLEX_JUSTIFY_CONTENT_MAP[align] : align\r\n    };\r\n    _proto2.renderCrossAlign = function() {\r\n        this._$element.css({\r\n            alignItems: this._normalizedCrossAlign()\r\n        })\r\n    };\r\n    _proto2._normalizedCrossAlign = function() {\r\n        var crossAlign = this._option(\"crossAlign\");\r\n        return crossAlign in FLEX_ALIGN_ITEMS_MAP ? FLEX_ALIGN_ITEMS_MAP[crossAlign] : crossAlign\r\n    };\r\n    _proto2.renderItems = function($items) {\r\n        var flexPropPrefix = (0, _style.stylePropPrefix)(\"flexDirection\");\r\n        var direction = this._option(\"direction\");\r\n        (0, _iterator.each)($items, function() {\r\n            var $item = (0, _renderer.default)(this);\r\n            var item = $item.data(BOX_ITEM_DATA_KEY);\r\n            $item.css({\r\n                display: flexPropPrefix + \"flex\"\r\n            }).css(MAXSIZE_MAP[direction], item.maxSize || \"none\").css(MINSIZE_MAP[direction], item.minSize || \"0\");\r\n            setFlexProp($item.get(0), \"flexBasis\", item.baseSize || 0);\r\n            setFlexProp($item.get(0), \"flexGrow\", item.ratio);\r\n            setFlexProp($item.get(0), \"flexShrink\", (0, _type.isDefined)(item.shrink) ? item.shrink : SHRINK);\r\n            $item.children().each(function(_, itemContent) {\r\n                (0, _renderer.default)(itemContent).css({\r\n                    width: \"auto\",\r\n                    height: \"auto\",\r\n                    display: (0, _style.stylePropPrefix)(\"flexDirection\") + \"flex\",\r\n                    flexBasis: 0\r\n                });\r\n                setFlexProp(itemContent, \"flexGrow\", 1);\r\n                setFlexProp(itemContent, \"flexDirection\", (0, _renderer.default)(itemContent)[0].style.flexDirection || \"column\")\r\n            })\r\n        })\r\n    };\r\n    return FlexLayoutStrategy\r\n}();\r\nvar FallbackLayoutStrategy = function() {\r\n    function FallbackLayoutStrategy($element, option) {\r\n        this._$element = $element;\r\n        this._option = option\r\n    }\r\n    var _proto3 = FallbackLayoutStrategy.prototype;\r\n    _proto3.renderBox = function() {\r\n        this._$element.css({\r\n            fontSize: 0,\r\n            whiteSpace: FALLBACK_WRAP_MAP[this._option(\"direction\")],\r\n            verticalAlign: \"top\"\r\n        });\r\n        _events_engine.default.off(this._$element, UPDATE_EVENT);\r\n        _events_engine.default.on(this._$element, UPDATE_EVENT, this.update.bind(this))\r\n    };\r\n    _proto3.renderAlign = function() {\r\n        var $items = this._$items;\r\n        if (!$items) {\r\n            return\r\n        }\r\n        var align = this._option(\"align\");\r\n        var totalItemSize = this.totalItemSize;\r\n        var direction = this._option(\"direction\");\r\n        var boxSize = this._$element[FALLBACK_MAIN_SIZE_MAP[direction]]();\r\n        var freeSpace = boxSize - totalItemSize;\r\n        var shift = 0;\r\n        this._setItemsMargins($items, direction, 0);\r\n        switch (align) {\r\n            case \"start\":\r\n                break;\r\n            case \"end\":\r\n                shift = freeSpace;\r\n                $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\r\n                break;\r\n            case \"center\":\r\n                shift = .5 * freeSpace;\r\n                $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift);\r\n                $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift);\r\n                break;\r\n            case \"space-between\":\r\n                shift = .5 * freeSpace / ($items.length - 1);\r\n                this._setItemsMargins($items, direction, shift);\r\n                $items.first().css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), 0);\r\n                $items.last().css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), 0);\r\n                break;\r\n            case \"space-around\":\r\n                shift = .5 * freeSpace / $items.length;\r\n                this._setItemsMargins($items, direction, shift)\r\n        }\r\n    };\r\n    _proto3._setItemsMargins = function($items, direction, shift) {\r\n        $items.css(this._chooseMarginSide(FALLBACK_PRE_MARGIN_MAP[direction]), shift).css(this._chooseMarginSide(FALLBACK_POST_MARGIN_MAP[direction]), shift)\r\n    };\r\n    _proto3.renderCrossAlign = function() {\r\n        var $items = this._$items;\r\n        if (!$items) {\r\n            return\r\n        }\r\n        var crossAlign = this._option(\"crossAlign\");\r\n        var direction = this._option(\"direction\");\r\n        var size = this._$element[FALLBACK_CROSS_SIZE_MAP[direction]]();\r\n        var that = this;\r\n        switch (crossAlign) {\r\n            case \"start\":\r\n                break;\r\n            case \"end\":\r\n                (0, _iterator.each)($items, function() {\r\n                    var $item = (0, _renderer.default)(this);\r\n                    var itemSize = $item[FALLBACK_CROSS_SIZE_MAP[direction]]();\r\n                    var shift = size - itemSize;\r\n                    $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift)\r\n                });\r\n                break;\r\n            case \"center\":\r\n                (0, _iterator.each)($items, function() {\r\n                    var $item = (0, _renderer.default)(this);\r\n                    var itemSize = $item[FALLBACK_CROSS_SIZE_MAP[direction]]();\r\n                    var shift = .5 * (size - itemSize);\r\n                    $item.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), shift).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), shift)\r\n                });\r\n                break;\r\n            case \"stretch\":\r\n                $items.css(that._chooseMarginSide(FALLBACK_CROSS_PRE_MARGIN_MAP[direction]), 0).css(that._chooseMarginSide(FALLBACK_CROSS_POST_MARGIN_MAP[direction]), 0).css(FALLBACK_CROSS_SIZE_MAP[direction], \"100%\")\r\n        }\r\n    };\r\n    _proto3._chooseMarginSide = function(value) {\r\n        if (!this._option(\"rtlEnabled\")) {\r\n            return value\r\n        }\r\n        return MARGINS_RTL_FLIP_MAP[value] || value\r\n    };\r\n    _proto3.renderItems = function($items) {\r\n        var _this = this;\r\n        this._$items = $items;\r\n        var direction = this._option(\"direction\");\r\n        var totalRatio = 0;\r\n        var totalWeightedShrink = 0;\r\n        var totalBaseSize = 0;\r\n        (0, _iterator.each)($items, function(_, item) {\r\n            var $item = (0, _renderer.default)(item);\r\n            $item.css({\r\n                display: \"inline-block\",\r\n                verticalAlign: \"top\"\r\n            });\r\n            $item[FALLBACK_MAIN_SIZE_MAP[direction]](\"auto\");\r\n            $item.removeClass(FALLBACK_BOX_ITEM);\r\n            var itemData = $item.data(BOX_ITEM_DATA_KEY);\r\n            var ratio = itemData.ratio || 0;\r\n            var size = _this._baseSize($item);\r\n            var shrink = (0, _type.isDefined)(itemData.shrink) ? itemData.shrink : SHRINK;\r\n            totalRatio += ratio;\r\n            totalWeightedShrink += shrink * size;\r\n            totalBaseSize += size\r\n        });\r\n        var freeSpaceSize = this._boxSize() - totalBaseSize;\r\n        var itemSize = function($item) {\r\n            var itemData = $item.data(BOX_ITEM_DATA_KEY);\r\n            var size = _this._baseSize($item);\r\n            var factor = freeSpaceSize >= 0 ? itemData.ratio || 0 : ((0, _type.isDefined)(itemData.shrink) ? itemData.shrink : SHRINK) * size;\r\n            var totalFactor = freeSpaceSize >= 0 ? totalRatio : totalWeightedShrink;\r\n            var shift = totalFactor ? Math.round(freeSpaceSize * factor / totalFactor) : 0;\r\n            return size + shift\r\n        };\r\n        var totalItemSize = 0;\r\n        (0, _iterator.each)($items, function(_, item) {\r\n            var $item = (0, _renderer.default)(item);\r\n            var itemData = (0, _renderer.default)(item).data(BOX_ITEM_DATA_KEY);\r\n            var size = itemSize($item);\r\n            totalItemSize += size;\r\n            $item.css(MAXSIZE_MAP[direction], itemData.maxSize || \"none\").css(MINSIZE_MAP[direction], itemData.minSize || \"0\").css(FALLBACK_MAIN_SIZE_MAP[direction], size);\r\n            $item.addClass(FALLBACK_BOX_ITEM)\r\n        });\r\n        this.totalItemSize = totalItemSize\r\n    };\r\n    _proto3._baseSize = function(item) {\r\n        var itemData = (0, _renderer.default)(item).data(BOX_ITEM_DATA_KEY);\r\n        return null == itemData.baseSize ? 0 : \"auto\" === itemData.baseSize ? this._contentSize(item) : this._parseSize(itemData.baseSize)\r\n    };\r\n    _proto3._contentSize = function(item) {\r\n        return (0, _renderer.default)(item)[FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")]]()\r\n    };\r\n    _proto3._parseSize = function(size) {\r\n        return String(size).match(/.+%$/) ? .01 * parseFloat(size) * this._boxSizeValue : size\r\n    };\r\n    _proto3._boxSize = function(value) {\r\n        if (!arguments.length) {\r\n            this._boxSizeValue = this._boxSizeValue || this._totalBaseSize();\r\n            return this._boxSizeValue\r\n        }\r\n        this._boxSizeValue = value\r\n    };\r\n    _proto3._totalBaseSize = function() {\r\n        var _this2 = this;\r\n        var result = 0;\r\n        (0, _iterator.each)(this._$items, function(_, item) {\r\n            result += _this2._baseSize(item)\r\n        });\r\n        return result\r\n    };\r\n    _proto3.initSize = function() {\r\n        this._boxSize(this._$element[FALLBACK_MAIN_SIZE_MAP[this._option(\"direction\")]]())\r\n    };\r\n    _proto3.update = function() {\r\n        if (!this._$items || this._$element.is(\":hidden\")) {\r\n            return\r\n        }\r\n        this._$items.detach();\r\n        this.initSize();\r\n        this._$element.append(this._$items);\r\n        this.renderItems(this._$items);\r\n        this.renderAlign();\r\n        this.renderCrossAlign();\r\n        var element = this._$element.get(0);\r\n        this._$items.find(BOX_SELECTOR).each(function() {\r\n            if (element === (0, _renderer.default)(this).parent().closest(BOX_SELECTOR).get(0)) {\r\n                _events_engine.default.triggerHandler(this, UPDATE_EVENT)\r\n            }\r\n        })\r\n    };\r\n    return FallbackLayoutStrategy\r\n}();\r\nvar Box = function(_CollectionWidget) {\r\n    _inheritsLoose(Box, _CollectionWidget);\r\n\r\n    function Box() {\r\n        return _CollectionWidget.apply(this, arguments) || this\r\n    }\r\n    var _proto4 = Box.prototype;\r\n    _proto4._getDefaultOptions = function() {\r\n        return (0, _extend.extend)(_CollectionWidget.prototype._getDefaultOptions.call(this), {\r\n            direction: \"row\",\r\n            align: \"start\",\r\n            crossAlign: \"stretch\",\r\n            activeStateEnabled: false,\r\n            focusStateEnabled: false,\r\n            onItemStateChanged: void 0,\r\n            _layoutStrategy: \"flex\",\r\n            _queue: void 0\r\n        })\r\n    };\r\n    _proto4._defaultOptionsRules = function() {\r\n        return _CollectionWidget.prototype._defaultOptionsRules.call(this).concat([{\r\n            device: function() {\r\n                return _browser.default.msie\r\n            },\r\n            options: {\r\n                _layoutStrategy: \"fallback\"\r\n            }\r\n        }])\r\n    };\r\n    _proto4._itemClass = function() {\r\n        return BOX_ITEM_CLASS\r\n    };\r\n    _proto4._itemDataKey = function() {\r\n        return BOX_ITEM_DATA_KEY\r\n    };\r\n    _proto4._itemElements = function() {\r\n        return this._itemContainer().children(this._itemSelector())\r\n    };\r\n    _proto4._init = function() {\r\n        _CollectionWidget.prototype._init.call(this);\r\n        this.$element().addClass(\"\".concat(BOX_CLASS, \"-\").concat(this.option(\"_layoutStrategy\")));\r\n        this._initLayout();\r\n        this._initBoxQueue()\r\n    };\r\n    _proto4._initLayout = function() {\r\n        this._layout = \"fallback\" === this.option(\"_layoutStrategy\") ? new FallbackLayoutStrategy(this.$element(), this.option.bind(this)) : new FlexLayoutStrategy(this.$element(), this.option.bind(this))\r\n    };\r\n    _proto4._initBoxQueue = function() {\r\n        this._queue = this.option(\"_queue\") || []\r\n    };\r\n    _proto4._queueIsNotEmpty = function() {\r\n        return this.option(\"_queue\") ? false : !!this._queue.length\r\n    };\r\n    _proto4._pushItemToQueue = function($item, config) {\r\n        this._queue.push({\r\n            $item: $item,\r\n            config: config\r\n        })\r\n    };\r\n    _proto4._shiftItemFromQueue = function() {\r\n        return this._queue.shift()\r\n    };\r\n    _proto4._initMarkup = function() {\r\n        this.$element().addClass(BOX_CLASS);\r\n        this._layout.renderBox();\r\n        _CollectionWidget.prototype._initMarkup.call(this);\r\n        this._renderAlign();\r\n        this._renderActions()\r\n    };\r\n    _proto4._renderActions = function() {\r\n        this._onItemStateChanged = this._createActionByOption(\"onItemStateChanged\")\r\n    };\r\n    _proto4._renderAlign = function() {\r\n        this._layout.renderAlign();\r\n        this._layout.renderCrossAlign()\r\n    };\r\n    _proto4._renderItems = function(items) {\r\n        var _this3 = this;\r\n        this._layout.initSize();\r\n        _CollectionWidget.prototype._renderItems.call(this, items);\r\n        while (this._queueIsNotEmpty()) {\r\n            var item = this._shiftItemFromQueue();\r\n            this._createComponent(item.$item, Box, (0, _extend.extend)({\r\n                _layoutStrategy: this.option(\"_layoutStrategy\"),\r\n                itemTemplate: this.option(\"itemTemplate\"),\r\n                itemHoldTimeout: this.option(\"itemHoldTimeout\"),\r\n                onItemHold: this.option(\"onItemHold\"),\r\n                onItemClick: this.option(\"onItemClick\"),\r\n                onItemContextMenu: this.option(\"onItemContextMenu\"),\r\n                onItemRendered: this.option(\"onItemRendered\"),\r\n                _queue: this._queue\r\n            }, item.config))\r\n        }\r\n        this._layout.renderItems(this._itemElements());\r\n        clearTimeout(this._updateTimer);\r\n        this._updateTimer = setTimeout(function() {\r\n            if (!_this3._isUpdated) {\r\n                _this3._layout.update()\r\n            }\r\n            _this3._isUpdated = false;\r\n            _this3._updateTimer = null\r\n        })\r\n    };\r\n    _proto4._renderItemContent = function(args) {\r\n        var $itemNode = args.itemData && args.itemData.node;\r\n        if ($itemNode) {\r\n            return this._renderItemContentByNode(args, $itemNode)\r\n        }\r\n        return _CollectionWidget.prototype._renderItemContent.call(this, args)\r\n    };\r\n    _proto4._postprocessRenderItem = function(args) {\r\n        var boxConfig = args.itemData.box;\r\n        if (!boxConfig) {\r\n            return\r\n        }\r\n        this._pushItemToQueue(args.itemContent, boxConfig)\r\n    };\r\n    _proto4._createItemByTemplate = function(itemTemplate, args) {\r\n        if (args.itemData.box) {\r\n            return itemTemplate.source ? itemTemplate.source() : (0, _renderer.default)()\r\n        }\r\n        return _CollectionWidget.prototype._createItemByTemplate.call(this, itemTemplate, args)\r\n    };\r\n    _proto4._visibilityChanged = function(visible) {\r\n        if (visible) {\r\n            this._dimensionChanged()\r\n        }\r\n    };\r\n    _proto4._dimensionChanged = function() {\r\n        if (this._updateTimer) {\r\n            return\r\n        }\r\n        this._isUpdated = true;\r\n        this._layout.update()\r\n    };\r\n    _proto4._dispose = function() {\r\n        clearTimeout(this._updateTimer);\r\n        _CollectionWidget.prototype._dispose.apply(this, arguments)\r\n    };\r\n    _proto4._itemOptionChanged = function(item, property, value, oldValue) {\r\n        if (\"visible\" === property) {\r\n            this._onItemStateChanged({\r\n                name: property,\r\n                state: value,\r\n                oldState: false !== oldValue\r\n            })\r\n        }\r\n        _CollectionWidget.prototype._itemOptionChanged.call(this, item, property, value)\r\n    };\r\n    _proto4._optionChanged = function(args) {\r\n        switch (args.name) {\r\n            case \"_layoutStrategy\":\r\n            case \"_queue\":\r\n            case \"direction\":\r\n                this._invalidate();\r\n                break;\r\n            case \"align\":\r\n                this._layout.renderAlign();\r\n                break;\r\n            case \"crossAlign\":\r\n                this._layout.renderCrossAlign();\r\n                break;\r\n            default:\r\n                _CollectionWidget.prototype._optionChanged.call(this, args)\r\n        }\r\n    };\r\n    _proto4._itemOptions = function() {\r\n        var _this4 = this;\r\n        var options = _CollectionWidget.prototype._itemOptions.call(this);\r\n        options.fireItemStateChangedAction = function(e) {\r\n            _this4._onItemStateChanged(e)\r\n        };\r\n        return options\r\n    };\r\n    _proto4.repaint = function() {\r\n        this._dimensionChanged()\r\n    };\r\n    return Box\r\n}(_uiCollection_widget.default);\r\nBox.ItemClass = BoxItem;\r\n(0, _component_registrator.default)(\"dxBox\", Box);\r\nvar _default = Box;\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\nmodule.exports.default = module.exports;\r\n"]},"metadata":{},"sourceType":"script"}