{"ast":null,"code":"/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.error_handling.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\n\"use strict\";\n\nexports.default = void 0;\n\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\n\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\n\nvar _click = require(\"../../events/click\");\n\nvar _iterator = require(\"../../core/utils/iterator\");\n\nvar _uiGrid_core = _interopRequireDefault(require(\"./ui.grid_core.modules\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    \"default\": obj\n  };\n}\n\nvar ERROR_ROW_CLASS = \"dx-error-row\";\nvar ERROR_MESSAGE_CLASS = \"dx-error-message\";\nvar ERROR_CLOSEBUTTON_CLASS = \"dx-closebutton\";\nvar ACTION_CLASS = \"action\";\n\nvar ErrorHandlingController = _uiGrid_core.default.ViewController.inherit({\n  init: function () {\n    var that = this;\n    that._columnHeadersView = that.getView(\"columnHeadersView\");\n    that._rowsView = that.getView(\"rowsView\");\n  },\n  _createErrorRow: function (error, $tableElements) {\n    var that = this;\n    var $errorRow;\n    var $closeButton;\n\n    var $errorMessage = this._renderErrorMessage(error);\n\n    if ($tableElements) {\n      $errorRow = (0, _renderer.default)(\"<tr>\").addClass(ERROR_ROW_CLASS);\n      $closeButton = (0, _renderer.default)(\"<div>\").addClass(ERROR_CLOSEBUTTON_CLASS).addClass(that.addWidgetPrefix(ACTION_CLASS));\n\n      _events_engine.default.on($closeButton, _click.name, that.createAction(function (args) {\n        var e = args.event;\n        var $errorRow;\n        var errorRowIndex = (0, _renderer.default)(e.currentTarget).closest(\".\" + ERROR_ROW_CLASS).index();\n        e.stopPropagation();\n        (0, _iterator.each)($tableElements, function (_, tableElement) {\n          $errorRow = (0, _renderer.default)(tableElement).children(\"tbody\").children(\"tr\").eq(errorRowIndex);\n          that.removeErrorRow($errorRow);\n        });\n        that.getController(\"resizing\") && that.getController(\"resizing\").fireContentReadyAction();\n      }));\n\n      (0, _renderer.default)(\"<td>\").attr({\n        colSpan: that.getController(\"columns\").getVisibleColumns().length,\n        role: \"presentation\"\n      }).prepend($closeButton).append($errorMessage).appendTo($errorRow);\n      return $errorRow;\n    }\n\n    return $errorMessage;\n  },\n  _renderErrorMessage: function (error) {\n    var message = error.url ? error.message.replace(error.url, \"\") : error.message || error;\n    var $message = (0, _renderer.default)(\"<div>\").addClass(ERROR_MESSAGE_CLASS).text(message);\n\n    if (error.url) {\n      (0, _renderer.default)(\"<a>\").attr(\"href\", error.url).text(error.url).appendTo($message);\n    }\n\n    return $message;\n  },\n  renderErrorRow: function (error, rowIndex, $popupContent) {\n    var that = this;\n    var $errorMessageElement;\n    var $firstErrorRow;\n\n    if ($popupContent) {\n      $popupContent.find(\".\" + ERROR_MESSAGE_CLASS).remove();\n      $errorMessageElement = that._createErrorRow(error);\n      $popupContent.prepend($errorMessageElement);\n      return $errorMessageElement;\n    }\n\n    var viewElement = rowIndex >= 0 || !that._columnHeadersView.isVisible() ? that._rowsView : that._columnHeadersView;\n    var $tableElements = $popupContent || viewElement.getTableElements();\n    (0, _iterator.each)($tableElements, function (_, tableElement) {\n      $errorMessageElement = that._createErrorRow(error, $tableElements);\n      $firstErrorRow = $firstErrorRow || $errorMessageElement;\n\n      if (rowIndex >= 0) {\n        var $row = viewElement._getRowElements((0, _renderer.default)(tableElement)).eq(rowIndex);\n\n        that.removeErrorRow($row.next());\n        $errorMessageElement.insertAfter($row);\n      } else {\n        var $tbody = (0, _renderer.default)(tableElement).children(\"tbody\");\n        var rowElements = $tbody.children(\"tr\");\n\n        if (that._columnHeadersView.isVisible()) {\n          that.removeErrorRow(rowElements.last());\n          (0, _renderer.default)(tableElement).append($errorMessageElement);\n        } else {\n          that.removeErrorRow(rowElements.first());\n          $tbody.first().prepend($errorMessageElement);\n        }\n      }\n    });\n\n    if (!$popupContent) {\n      var resizingController = that.getController(\"resizing\");\n      resizingController && resizingController.fireContentReadyAction();\n    }\n\n    return $firstErrorRow;\n  },\n  removeErrorRow: function ($row) {\n    if (!$row) {\n      var $columnHeaders = this._columnHeadersView && this._columnHeadersView.element();\n\n      $row = $columnHeaders && $columnHeaders.find(\".\" + ERROR_ROW_CLASS);\n\n      if (!$row || !$row.length) {\n        var $rowsViewElement = this._rowsView.element();\n\n        $row = $rowsViewElement && $rowsViewElement.find(\".\" + ERROR_ROW_CLASS);\n      }\n    }\n\n    $row && $row.hasClass(ERROR_ROW_CLASS) && $row.remove();\n  },\n  optionChanged: function (args) {\n    var that = this;\n\n    switch (args.name) {\n      case \"errorRowEnabled\":\n        args.handled = true;\n        break;\n\n      default:\n        that.callBase(args);\n    }\n  }\n});\n\nvar _default = {\n  defaultOptions: function () {\n    return {\n      errorRowEnabled: true\n    };\n  },\n  controllers: {\n    errorHandling: ErrorHandlingController\n  },\n  extenders: {\n    controllers: {\n      data: {\n        init: function () {\n          var that = this;\n          var errorHandlingController = that.getController(\"errorHandling\");\n          that.callBase();\n          that.dataErrorOccurred.add(function (error, $popupContent) {\n            if (that.option(\"errorRowEnabled\")) {\n              errorHandlingController.renderErrorRow(error, void 0, $popupContent);\n            }\n          });\n          that.changed.add(function (e) {\n            if (e && \"loadError\" === e.changeType) {\n              return;\n            }\n\n            var errorHandlingController = that.getController(\"errorHandling\");\n            var editingController = that.getController(\"editing\");\n\n            if (editingController && !editingController.hasChanges()) {\n              errorHandlingController && errorHandlingController.removeErrorRow();\n            }\n          });\n        }\n      }\n    }\n  }\n};\nexports.default = _default;\nmodule.exports = exports.default;","map":{"version":3,"sources":["C:/Users/CapiniaC/Desktop/Collection/Work/project/security/node_modules/devextreme/ui/grid_core/ui.grid_core.error_handling.js"],"names":["exports","default","_renderer","_interopRequireDefault","require","_events_engine","_click","_iterator","_uiGrid_core","obj","__esModule","ERROR_ROW_CLASS","ERROR_MESSAGE_CLASS","ERROR_CLOSEBUTTON_CLASS","ACTION_CLASS","ErrorHandlingController","ViewController","inherit","init","that","_columnHeadersView","getView","_rowsView","_createErrorRow","error","$tableElements","$errorRow","$closeButton","$errorMessage","_renderErrorMessage","addClass","addWidgetPrefix","on","name","createAction","args","e","event","errorRowIndex","currentTarget","closest","index","stopPropagation","each","_","tableElement","children","eq","removeErrorRow","getController","fireContentReadyAction","attr","colSpan","getVisibleColumns","length","role","prepend","append","appendTo","message","url","replace","$message","text","renderErrorRow","rowIndex","$popupContent","$errorMessageElement","$firstErrorRow","find","remove","viewElement","isVisible","getTableElements","$row","_getRowElements","next","insertAfter","$tbody","rowElements","last","first","resizingController","$columnHeaders","element","$rowsViewElement","hasClass","optionChanged","handled","callBase","_default","defaultOptions","errorRowEnabled","controllers","errorHandling","extenders","data","errorHandlingController","dataErrorOccurred","add","option","changed","changeType","editingController","hasChanges","module"],"mappings":"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","sourcesContent":["/**\r\n * DevExtreme (ui/grid_core/ui.grid_core.error_handling.js)\r\n * Version: 20.2.6\r\n * Build date: Tue Mar 16 2021\r\n *\r\n * Copyright (c) 2012 - 2021 Developer Express Inc. ALL RIGHTS RESERVED\r\n * Read about DevExtreme licensing here: https://js.devexpress.com/Licensing/\r\n */\r\n\"use strict\";\r\nexports.default = void 0;\r\nvar _renderer = _interopRequireDefault(require(\"../../core/renderer\"));\r\nvar _events_engine = _interopRequireDefault(require(\"../../events/core/events_engine\"));\r\nvar _click = require(\"../../events/click\");\r\nvar _iterator = require(\"../../core/utils/iterator\");\r\nvar _uiGrid_core = _interopRequireDefault(require(\"./ui.grid_core.modules\"));\r\n\r\nfunction _interopRequireDefault(obj) {\r\n    return obj && obj.__esModule ? obj : {\r\n        \"default\": obj\r\n    }\r\n}\r\nvar ERROR_ROW_CLASS = \"dx-error-row\";\r\nvar ERROR_MESSAGE_CLASS = \"dx-error-message\";\r\nvar ERROR_CLOSEBUTTON_CLASS = \"dx-closebutton\";\r\nvar ACTION_CLASS = \"action\";\r\nvar ErrorHandlingController = _uiGrid_core.default.ViewController.inherit({\r\n    init: function() {\r\n        var that = this;\r\n        that._columnHeadersView = that.getView(\"columnHeadersView\");\r\n        that._rowsView = that.getView(\"rowsView\")\r\n    },\r\n    _createErrorRow: function(error, $tableElements) {\r\n        var that = this;\r\n        var $errorRow;\r\n        var $closeButton;\r\n        var $errorMessage = this._renderErrorMessage(error);\r\n        if ($tableElements) {\r\n            $errorRow = (0, _renderer.default)(\"<tr>\").addClass(ERROR_ROW_CLASS);\r\n            $closeButton = (0, _renderer.default)(\"<div>\").addClass(ERROR_CLOSEBUTTON_CLASS).addClass(that.addWidgetPrefix(ACTION_CLASS));\r\n            _events_engine.default.on($closeButton, _click.name, that.createAction(function(args) {\r\n                var e = args.event;\r\n                var $errorRow;\r\n                var errorRowIndex = (0, _renderer.default)(e.currentTarget).closest(\".\" + ERROR_ROW_CLASS).index();\r\n                e.stopPropagation();\r\n                (0, _iterator.each)($tableElements, function(_, tableElement) {\r\n                    $errorRow = (0, _renderer.default)(tableElement).children(\"tbody\").children(\"tr\").eq(errorRowIndex);\r\n                    that.removeErrorRow($errorRow)\r\n                });\r\n                that.getController(\"resizing\") && that.getController(\"resizing\").fireContentReadyAction()\r\n            }));\r\n            (0, _renderer.default)(\"<td>\").attr({\r\n                colSpan: that.getController(\"columns\").getVisibleColumns().length,\r\n                role: \"presentation\"\r\n            }).prepend($closeButton).append($errorMessage).appendTo($errorRow);\r\n            return $errorRow\r\n        }\r\n        return $errorMessage\r\n    },\r\n    _renderErrorMessage: function(error) {\r\n        var message = error.url ? error.message.replace(error.url, \"\") : error.message || error;\r\n        var $message = (0, _renderer.default)(\"<div>\").addClass(ERROR_MESSAGE_CLASS).text(message);\r\n        if (error.url) {\r\n            (0, _renderer.default)(\"<a>\").attr(\"href\", error.url).text(error.url).appendTo($message)\r\n        }\r\n        return $message\r\n    },\r\n    renderErrorRow: function(error, rowIndex, $popupContent) {\r\n        var that = this;\r\n        var $errorMessageElement;\r\n        var $firstErrorRow;\r\n        if ($popupContent) {\r\n            $popupContent.find(\".\" + ERROR_MESSAGE_CLASS).remove();\r\n            $errorMessageElement = that._createErrorRow(error);\r\n            $popupContent.prepend($errorMessageElement);\r\n            return $errorMessageElement\r\n        }\r\n        var viewElement = rowIndex >= 0 || !that._columnHeadersView.isVisible() ? that._rowsView : that._columnHeadersView;\r\n        var $tableElements = $popupContent || viewElement.getTableElements();\r\n        (0, _iterator.each)($tableElements, function(_, tableElement) {\r\n            $errorMessageElement = that._createErrorRow(error, $tableElements);\r\n            $firstErrorRow = $firstErrorRow || $errorMessageElement;\r\n            if (rowIndex >= 0) {\r\n                var $row = viewElement._getRowElements((0, _renderer.default)(tableElement)).eq(rowIndex);\r\n                that.removeErrorRow($row.next());\r\n                $errorMessageElement.insertAfter($row)\r\n            } else {\r\n                var $tbody = (0, _renderer.default)(tableElement).children(\"tbody\");\r\n                var rowElements = $tbody.children(\"tr\");\r\n                if (that._columnHeadersView.isVisible()) {\r\n                    that.removeErrorRow(rowElements.last());\r\n                    (0, _renderer.default)(tableElement).append($errorMessageElement)\r\n                } else {\r\n                    that.removeErrorRow(rowElements.first());\r\n                    $tbody.first().prepend($errorMessageElement)\r\n                }\r\n            }\r\n        });\r\n        if (!$popupContent) {\r\n            var resizingController = that.getController(\"resizing\");\r\n            resizingController && resizingController.fireContentReadyAction()\r\n        }\r\n        return $firstErrorRow\r\n    },\r\n    removeErrorRow: function($row) {\r\n        if (!$row) {\r\n            var $columnHeaders = this._columnHeadersView && this._columnHeadersView.element();\r\n            $row = $columnHeaders && $columnHeaders.find(\".\" + ERROR_ROW_CLASS);\r\n            if (!$row || !$row.length) {\r\n                var $rowsViewElement = this._rowsView.element();\r\n                $row = $rowsViewElement && $rowsViewElement.find(\".\" + ERROR_ROW_CLASS)\r\n            }\r\n        }\r\n        $row && $row.hasClass(ERROR_ROW_CLASS) && $row.remove()\r\n    },\r\n    optionChanged: function(args) {\r\n        var that = this;\r\n        switch (args.name) {\r\n            case \"errorRowEnabled\":\r\n                args.handled = true;\r\n                break;\r\n            default:\r\n                that.callBase(args)\r\n        }\r\n    }\r\n});\r\nvar _default = {\r\n    defaultOptions: function() {\r\n        return {\r\n            errorRowEnabled: true\r\n        }\r\n    },\r\n    controllers: {\r\n        errorHandling: ErrorHandlingController\r\n    },\r\n    extenders: {\r\n        controllers: {\r\n            data: {\r\n                init: function() {\r\n                    var that = this;\r\n                    var errorHandlingController = that.getController(\"errorHandling\");\r\n                    that.callBase();\r\n                    that.dataErrorOccurred.add(function(error, $popupContent) {\r\n                        if (that.option(\"errorRowEnabled\")) {\r\n                            errorHandlingController.renderErrorRow(error, void 0, $popupContent)\r\n                        }\r\n                    });\r\n                    that.changed.add(function(e) {\r\n                        if (e && \"loadError\" === e.changeType) {\r\n                            return\r\n                        }\r\n                        var errorHandlingController = that.getController(\"errorHandling\");\r\n                        var editingController = that.getController(\"editing\");\r\n                        if (editingController && !editingController.hasChanges()) {\r\n                            errorHandlingController && errorHandlingController.removeErrorRow()\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n        }\r\n    }\r\n};\r\nexports.default = _default;\r\nmodule.exports = exports.default;\r\n"]},"metadata":{},"sourceType":"script"}